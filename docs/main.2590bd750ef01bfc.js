"use strict";var EB=Object.defineProperty,wB=Object.defineProperties,bB=Object.getOwnPropertyDescriptors,xN=Object.getOwnPropertySymbols,CB=Object.prototype.hasOwnProperty,IB=Object.prototype.propertyIsEnumerable,RN=(nt,we,N)=>we in nt?EB(nt,we,{enumerable:!0,configurable:!0,writable:!0,value:N}):nt[we]=N,PN=(nt,we)=>{for(var N in we||(we={}))CB.call(we,N)&&RN(nt,N,we[N]);if(xN)for(var N of xN(we))IB.call(we,N)&&RN(nt,N,we[N]);return nt},NN=(nt,we)=>wB(nt,bB(we));(self.webpackChunkangular_tour_of_heroes=self.webpackChunkangular_tour_of_heroes||[]).push([[179],{2011:(nt,we,N)=>{N.d(we,{hO:()=>We,xv:()=>he,Dh:()=>oe,GT:()=>ge,cc:()=>Me,on:()=>G,pX:()=>ne});var p=N(5e3),X=N(127),O=N(5813);nt=N.hmd(nt);const le=["ngOnDestroy"],ne=(Ie,Ke,Je,Te={})=>new Proxy(Ie,{get:(Ee,be)=>Je.runOutsideAngular(()=>{var je;if(Ie[be])return(null===(je=null==Te?void 0:Te.spy)||void 0===je?void 0:je.get)&&Te.spy.get(be,Ie[be]),Ie[be];if(le.indexOf(be)>-1)return()=>{};const Be=Ke.toPromise().then($=>{const ve=$&&$[be];return"function"==typeof ve?ve.bind($):ve&&ve.then?ve.then(Z=>Je.run(()=>Z)):Je.run(()=>ve)});return new Proxy(()=>{},{get:($,ve)=>Be[ve],apply:($,ve,Z)=>Be.then(re=>{var ee;const ye=re&&re(...Z);return(null===(ee=null==Te?void 0:Te.spy)||void 0===ee?void 0:ee.apply)&&Te.spy.apply(be,Z,ye),ye})})})}),ge=(Ie,Ke)=>{Ke.forEach(Je=>{Object.getOwnPropertyNames(Je.prototype||Je).forEach(Te=>{Object.defineProperty(Ie.prototype,Te,Object.getOwnPropertyDescriptor(Je.prototype||Je,Te))})})};class ue{constructor(Ke){return Ke}}const oe=new p.OlP("angularfire2.app.options"),he=new p.OlP("angularfire2.app.name");function G(Ie,Ke,Je){const Ee="object"==typeof Je&&Je||{};Ee.name=Ee.name||"string"==typeof Je&&Je||"[DEFAULT]";const je=X.Z.apps.filter(Be=>Be&&Be.name===Ee.name)[0]||Ke.runOutsideAngular(()=>X.Z.initializeApp(Ie,Ee));try{JSON.stringify(Ie)!==JSON.stringify(je.options)&&H("error",`${je.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ue(je)}const H=(Ie,...Ke)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Ie](...Ke)},te={provide:ue,useFactory:G,deps:[oe,p.R0b,[new p.FiY,he]]};let We=(()=>{class Ie{constructor(Je){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",p.q4F.full,Je.toString())}static initializeApp(Je,Te){return{ngModule:Ie,providers:[{provide:oe,useValue:Je},{provide:he,useValue:Te}]}}}return Ie.\u0275fac=function(Je){return new(Je||Ie)(p.LFG(p.Lbi))},Ie.\u0275mod=p.oAB({type:Ie}),Ie.\u0275inj=p.cJS({providers:[te]}),Ie})();function Me(Ie,Ke,Je,Te,Ee){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ie)||[];if(be)return function Ne(Ie,Ke){try{return Ie.toString()===Ke.toString()}catch(Je){return Ie===Ke}}(Ee,je)||(pe("error",`${Ke} was already initialized on the ${Je} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ee,was:je})),be;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Be,Ee]),Be}}const Ue=!!nt.hot,pe=(Ie,...Ke)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Ie](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,we,N)=>{N.d(we,{q4:()=>sa,iC:()=>aa,fc:()=>fi,HU:()=>mf,vb:()=>Hd,JM:()=>yg});var p=N(5e3),X=N(5867),O=N(5861),le=N(9681),ne=N(2090),ge=N(4859),ue=N(1877),oe=N(8766);const he="@firebase/installations",G="0.5.9",te=`w:${G}`,We="FIS_v2",Ke=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Te({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ee(I){return{token:I.token,requestStatus:2,expiresIn:re(I.expiresIn),creationTime:Date.now()}}function be(I,D){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(I,D){const L=(yield D.json()).error;return Ke.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Be({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function $(I,{refreshToken:D}){const R=Be(I);return R.append("Authorization",function ee(I){return`${We} ${I}`}(D)),R}function ve(I){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function re(I){return Number(I.replace("s","000"))}function ye(I,D){return ae.apply(this,arguments)}function ae(){return(ae=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:R}){const L=Te(I),Y=Be(I),ie=D.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:We,appId:I.appId,sdkVersion:te})},wt=yield ve(()=>fetch(L,Ve));if(wt.ok){const bt=yield wt.json();return{fid:bt.fid||R,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Ee(bt.authToken)}}throw yield be("Create Installation",wt)})).apply(this,arguments)}function Oe(I){return new Promise(D=>{setTimeout(D,I)})}const Gt=/^[cdef][\w-]{21}$/;function Xe(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function tn(I){return function dt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Gt.test(R)?R:""}catch(I){return""}}function xn(I){return`${I.appName}!${I.appId}`}const un=new Map;function Xt(I,D){const R=xn(I);Vt(R,D),function hs(I,D){const R=function pr(){return!ni&&"BroadcastChannel"in self&&(ni=new BroadcastChannel("[Firebase] FID Change"),ni.onmessage=I=>{Vt(I.data.key,I.data.fid)}),ni}();R&&R.postMessage({key:I,fid:D}),function Mr(){0===un.size&&ni&&(ni.close(),ni=null)}()}(R,D)}function Vt(I,D){const R=un.get(I);if(R)for(const L of R)L(D)}let ni=null;const ri="firebase-installations-store";let Ii=null;function mt(){return Ii||(Ii=(0,oe.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(ri)}})),Ii}function ii(I,D){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,O.Z)(function*(I,D){const R=xn(I),Y=(yield mt()).transaction(ri,"readwrite"),ie=Y.objectStore(ri),Pe=yield ie.get(R);return yield ie.put(D,R),yield Y.done,(!Pe||Pe.fid!==D.fid)&&Xt(I,D.fid),D})).apply(this,arguments)}function Rn(I){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(I){const D=xn(I),L=(yield mt()).transaction(ri,"readwrite");yield L.objectStore(ri).delete(D),yield L.done})).apply(this,arguments)}function si(I,D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(I,D){const R=xn(I),Y=(yield mt()).transaction(ri,"readwrite"),ie=Y.objectStore(ri),Pe=yield ie.get(R),Ve=D(Pe);return void 0===Ve?yield ie.delete(R):yield ie.put(Ve,R),yield Y.done,Ve&&(!Pe||Pe.fid!==Ve.fid)&&Xt(I,Ve.fid),Ve})).apply(this,arguments)}function jn(I){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(I){let D;const R=yield si(I.appConfig,L=>{const Y=Bo(L),ie=qt(I,Y);return D=ie.registrationPromise,ie.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Bo(I){return Xs(I||{fid:Xe(),registrationStatus:0})}function qt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ke.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},L=function at(I,D){return Et.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:L}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:gr(I)}:{installationEntry:D}}function Et(){return(Et=(0,O.Z)(function*(I,D){try{const R=yield ye(I,D);return ii(I.appConfig,R)}catch(R){throw Je(R)&&409===R.customData.serverCode?yield Rn(I.appConfig):yield ii(I.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function gr(I){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(I){let D=yield Bt(I.appConfig);for(;1===D.registrationStatus;)yield Oe(100),D=yield Bt(I.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield jn(I);return L||R}return D})).apply(this,arguments)}function Bt(I){return si(I,D=>{if(!D)throw Ke.create("installation-not-found");return Xs(D)})}function Xs(I){return function mr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function yr(I,D){return U.apply(this,arguments)}function U(){return(U=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},R){const L=z(I,R),Y=$(I,R),ie=D.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:I.appId}})},wt=yield ve(()=>fetch(L,Ve));if(wt.ok)return Ee(yield wt.json());throw yield be("Generate Auth Token",wt)})).apply(this,arguments)}function z(I,{fid:D}){return`${Te(I)}/${D}/authTokens:generate`}function W(I){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(I,D=!1){let R;const L=yield si(I.appConfig,ie=>{if(!Tt(ie))throw Ke.create("not-registered");const Pe=ie.authToken;if(!D&&fn(Pe))return ie;if(1===Pe.requestStatus)return R=q(I,D),ie;{if(!navigator.onLine)throw Ke.create("app-offline");const Ve=Wn(ie);return R=tt(I,Ve),Ve}});return R?yield R:L.authToken})).apply(this,arguments)}function q(I,D){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(I,D){let R=yield Re(I.appConfig);for(;1===R.authToken.requestStatus;)yield Oe(100),R=yield Re(I.appConfig);const L=R.authToken;return 0===L.requestStatus?W(I,D):L})).apply(this,arguments)}function Re(I){return si(I,D=>{if(!Tt(D))throw Ke.create("not-registered");return function xr(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function tt(I,D){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(I,D){try{const R=yield yr(I,D),L=Object.assign(Object.assign({},D),{authToken:R});return yield ii(I.appConfig,L),R}catch(R){if(!Je(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ii(I.appConfig,L)}else yield Rn(I.appConfig);throw R}})).apply(this,arguments)}function Tt(I){return void 0!==I&&2===I.registrationStatus}function fn(I){return 2===I.requestStatus&&!function It(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Wn(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Va(){return(Va=(0,O.Z)(function*(I){const D=I,{installationEntry:R,registrationPromise:L}=yield jn(D);return L?L.catch(console.error):W(D).catch(console.error),R.fid})).apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(I,D=!1){const R=I;return yield Kn(R),(yield W(R,D)).token})).apply(this,arguments)}function Kn(I){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,O.Z)(function*(I){const{registrationPromise:D}=yield jn(I);D&&(yield D)})).apply(this,arguments)}function jo(I){return Ke.create("missing-app-config-values",{valueName:I})}const Wr="installations",ct=I=>{const D=I.getProvider("app").getImmediate(),R=function ir(I){if(!I||!I.options)throw jo("App Configuration");if(!I.name)throw jo("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!I.options[R])throw jo(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,le._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},nn=I=>{const D=I.getProvider("app").getImmediate(),R=(0,le._getProvider)(D,Wr).getImmediate();return{getId:()=>function Tu(I){return Va.apply(this,arguments)}(R),getToken:Y=>function Su(I){return Ua.apply(this,arguments)}(R,Y)}};(function Kr(){(0,le._registerComponent)(new ge.wA(Wr,ct,"PUBLIC")),(0,le._registerComponent)(new ge.wA("installations-internal",nn,"PRIVATE"))})(),(0,le.registerVersion)(he,G),(0,le.registerVersion)(he,G,"esm2017");const Ui="@firebase/remote-config",Pn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ig{constructor(D,R,L,Y){this.client=D,this.storage=R,this.storageCache=L,this.logger=Y}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,Y=L<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var R=this;return(0,O.Z)(function*(){const[L,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(D.cacheMaxAgeMillis,L))return Y;D.eTag=Y&&Y.eTag;const ie=yield R.client.fetch(D),Pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Pe.push(R.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Pe),ie})()}}function bd(I=navigator){return I.languages&&I.languages[0]||I.language}class _r{constructor(D,R,L,Y,ie,Pe){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=L,this.projectId=Y,this.apiKey=ie,this.appId=Pe}fetch(D){var R=this;return(0,O.Z)(function*(){const[L,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},wt={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:Y,app_id:R.appId,language_code:bd()},bt={method:"POST",headers:Ve,body:JSON.stringify(wt)},jt=fetch(Pe,bt),Ct=new Promise((xi,pi)=>{D.signal.addEventListener(()=>{const $d=new Error("The operation was aborted.");$d.name="AbortError",pi($d)})});let cr;try{yield Promise.race([jt,Ct]),cr=yield jt}catch(xi){let pi="fetch-client-network";throw"AbortError"===xi.name&&(pi="fetch-timeout"),Pn.create(pi,{originalErrorMessage:xi.message})}let Gn=cr.status;const wn=cr.headers.get("ETag")||void 0;let dn,Lr;if(200===cr.status){let xi;try{xi=yield cr.json()}catch(pi){throw Pn.create("fetch-client-parse",{originalErrorMessage:pi.message})}dn=xi.entries,Lr=xi.state}if("INSTANCE_STATE_UNSPECIFIED"===Lr?Gn=500:"NO_CHANGE"===Lr?Gn=304:("NO_TEMPLATE"===Lr||"EMPTY_CONFIG"===Lr)&&(dn={}),304!==Gn&&200!==Gn)throw Pn.create("fetch-status",{httpStatus:Gn});return{status:Gn,eTag:wn,config:dn}})()}}class sg{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,O.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,L)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:L}){var Y=this;return(0,O.Z)(function*(){yield function Us(I,D){return new Promise((R,L)=>{const Y=Math.max(D-Date.now(),0),ie=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ie),L(Pn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const ie=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Cd(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ie))throw ie;const Pe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(Pe),Y.attemptFetch(D,Pe)}})()}}class Id{constructor(D,R,L,Y,ie){this.app=D,this._client=R,this._storageCache=L,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kl(I,D){const R=I.target.error||void 0;return Pn.create(D,{originalErrorMessage:R&&R.message})}const Bs="app_namespace_store";class lg{constructor(D,R,L,Y=function ug(){return new Promise((I,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{D(kl(L,"storage-open"))},R.onsuccess=L=>{I(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Bs,{keyPath:"compositeKey"})}}catch(R){D(Pn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ie)=>{const Ve=L.transaction([Bs],"readonly").objectStore(Bs),wt=R.createCompositeKey(D);try{const bt=Ve.get(wt);bt.onerror=jt=>{ie(kl(jt,"storage-get"))},bt.onsuccess=jt=>{const Ct=jt.target.result;Y(Ct?Ct.value:void 0)}}catch(bt){ie(Pn.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(D,R){var L=this;return(0,O.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((ie,Pe)=>{const wt=Y.transaction([Bs],"readwrite").objectStore(Bs),bt=L.createCompositeKey(D);try{const jt=wt.put({compositeKey:bt,value:R});jt.onerror=Ct=>{Pe(kl(Ct,"storage-set"))},jt.onsuccess=()=>{ie()}}catch(jt){Pe(Pn.create("storage-set",{originalErrorMessage:jt&&jt.message}))}})})()}delete(D){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ie)=>{const Ve=L.transaction([Bs],"readwrite").objectStore(Bs),wt=R.createCompositeKey(D);try{const bt=Ve.delete(wt);bt.onerror=jt=>{ie(kl(jt,"storage-delete"))},bt.onsuccess=()=>{Y()}}catch(bt){ie(Pn.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Td{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const R=D.storage.getLastFetchStatus(),L=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),ie=yield R;ie&&(D.lastFetchStatus=ie);const Pe=yield L;Pe&&(D.lastSuccessfulFetchTimestampMillis=Pe);const Ve=yield Y;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ru(){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}!function $o(){(0,le._registerComponent)(new ge.wA("remote-config",function I(D,{instanceIdentifier:R}){const L=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,ne.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Pe,appId:Ve}=L.options;if(!ie)throw Pn.create("registration-project-id");if(!Pe)throw Pn.create("registration-api-key");if(!Ve)throw Pn.create("registration-app-id");const wt=new lg(Ve,L.name,R=R||"firebase"),bt=new Td(wt),jt=new ue.Yd(Ui);jt.logLevel=ue.in.ERROR;const Ct=new _r(Y,le.SDK_VERSION,R,ie,Pe,Ve),cr=new sg(Ct,wt),Gn=new ig(cr,wt,bt,jt),wn=new Id(L,Gn,bt,wt,jt);return function ln(I){const D=(0,ne.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(wn),wn},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Ui,"0.3.8"),(0,le.registerVersion)(Ui,"0.3.8","esm2017")}();const Ad="/firebase-messaging-sw.js",vr="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Go="google.c.a.c_id",Md="google.c.a.c_l",lf="google.c.a.ts",xd="google.c.a.e";var qo=(()=>{return(I=qo||(qo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",qo;var I})();function Pr(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rd(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),Y=new Uint8Array(L.length);for(let ie=0;ie<L.length;++ie)Y[ie]=L.charCodeAt(ie);return Y}const Nr="fcm_token_details_db",ai="fcm_token_object_Store";function Fl(I){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Nr))return null;let D=null;return(yield(0,oe.X3)(Nr,5,{upgrade:(L=(0,O.Z)(function*(Y,ie,Pe,Ve){var wt;if(ie<2||!Y.objectStoreNames.contains(ai))return;const bt=Ve.objectStore(ai),jt=yield bt.index("fcmSenderId").get(I);if(yield bt.clear(),jt)if(2===ie){const Ct=jt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;D={token:Ct.fcmToken,createTime:null!==(wt=Ct.createTime)&&void 0!==wt?wt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:Pr(Ct.vapidKey)}}}else if(3===ie){const Ct=jt;D={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Pr(Ct.auth),p256dh:Pr(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Pr(Ct.vapidKey)}}}else if(4===ie){const Ct=jt;D={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Pr(Ct.auth),p256dh:Pr(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Pr(Ct.vapidKey)}}}}),function(ie,Pe,Ve,wt){return L.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Nr),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Ll(D)?D:null;var L}),Pd.apply(this,arguments)}function Ll(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const zi="firebase-messaging-store";let cf=null;function rn(){return cf||(cf=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(zi)}})),cf}function $a(I){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(I){const D=or(I),L=yield(yield rn()).transaction(zi).objectStore(zi).get(D);if(L)return L;{const Y=yield Fl(I.appConfig.senderId);if(Y)return yield en(I,Y),Y}})).apply(this,arguments)}function en(I,D){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,O.Z)(function*(I,D){const R=or(I),Y=(yield rn()).transaction(zi,"readwrite");return yield Y.objectStore(zi).put(D,R),yield Y.done,D})).apply(this,arguments)}function Pu(I){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(I){const D=or(I),L=(yield rn()).transaction(zi,"readwrite");yield L.objectStore(zi).delete(D),yield L.done})).apply(this,arguments)}function or({appConfig:I}){return I.appId}const bn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wi(I,D){return ar.apply(this,arguments)}function ar(){return(ar=(0,O.Z)(function*(I,D){const R=yield Ko(I),L=Zo(D),Y={method:"POST",headers:R,body:JSON.stringify(L)};let ie;try{ie=yield(yield fetch(Ki(I.appConfig),Y)).json()}catch(Pe){throw bn.create("token-subscribe-failed",{errorInfo:Pe})}if(ie.error)throw bn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw bn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function so(I,D){return gs.apply(this,arguments)}function gs(){return(gs=(0,O.Z)(function*(I,D){const R=yield Ko(I),L=Zo(D.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(L)};let ie;try{ie=yield(yield fetch(`${Ki(I.appConfig)}/${D.token}`,Y)).json()}catch(Pe){throw bn.create("token-update-failed",{errorInfo:Pe})}if(ie.error)throw bn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw bn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function qa(I,D){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*(I,D){const L={method:"DELETE",headers:yield Ko(I)};try{const ie=yield(yield fetch(`${Ki(I.appConfig)}/${D}`,L)).json();if(ie.error)throw bn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw bn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Ki({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ko(I){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*({appConfig:I,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Zo({p256dh:I,auth:D,endpoint:R,vapidKey:L}){const Y={web:{endpoint:R,auth:D,p256dh:I}};return L!==no&&(Y.web.applicationPubKey=L),Y}const Nu=6048e5;function za(I){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,O.Z)(function*(I){const D=yield gn(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Pr(D.getKey("auth")),p256dh:Pr(D.getKey("p256dh"))},L=yield $a(I.firebaseDependencies);if(L){if(oo(L.subscriptionOptions,R))return Date.now()>=L.createTime+Nu?Hl(I,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield qa(I.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return Lt(I.firebaseDependencies,R)}return Lt(I.firebaseDependencies,R)})).apply(this,arguments)}function Wa(I){return jl.apply(this,arguments)}function jl(){return(jl=(0,O.Z)(function*(I){const D=yield $a(I.firebaseDependencies);D&&(yield qa(I.firebaseDependencies,D.token),yield Pu(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Hl(I,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,O.Z)(function*(I,D){try{const R=yield so(I.firebaseDependencies,D),L=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield en(I.firebaseDependencies,L),R}catch(R){throw yield Wa(I),R}})).apply(this,arguments)}function Lt(I,D){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,O.Z)(function*(I,D){const L={token:yield Wi(I,D),createTime:Date.now(),subscriptionOptions:D};return yield en(I,L),L.token})).apply(this,arguments)}function gn(I,D){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rd(D)})})).apply(this,arguments)}function oo(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function ui(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Ka(I,D){if(!D.notification)return;I.notification={};const R=D.notification.title;R&&(I.notification.title=R);const L=D.notification.body;L&&(I.notification.body=L);const Y=D.notification.image;Y&&(I.notification.image=Y)}(D,I),function $l(I,D){!D.data||(I.data=D.data)}(D,I),function cg(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const R=D.fcmOptions.link;R&&(I.fcmOptions.link=R);const L=D.fcmOptions.analytics_label;L&&(I.fcmOptions.analyticsLabel=L)}(D,I),D}function ku(I){return"object"==typeof I&&!!I&&Go in I}function Za(I,D){const R=[];for(let L=0;L<I.length;L++)R.push(I.charAt(L)),L<D.length&&R.push(D.charAt(L));return R.join("")}function Nn(I){return bn.create("missing-app-config-values",{valueName:I})}Za("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Za("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ms{constructor(D,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Fu(I){if(!I||!I.options)throw Nn("App Configuration Object");if(!I.name)throw Nn("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const L of D)if(!R[L])throw Nn(L);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Ya(I){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Ad,{scope:vr}),I.swRegistration.update().catch(()=>{})}catch(D){throw bn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ai(I,D){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield Ya(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw bn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function Lu(I,D){return ql.apply(this,arguments)}function ql(){return(ql=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=no)})).apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(I,D){if(!navigator)throw bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bn.create("permission-blocked");return yield Lu(I,null==D?void 0:D.vapidKey),yield Ai(I,null==D?void 0:D.serviceWorkerRegistration),za(I)})).apply(this,arguments)}function Qo(I,D,R){return zl.apply(this,arguments)}function zl(){return(zl=(0,O.Z)(function*(I,D,R){const L=Ja(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[Go],message_name:R[Md],message_time:R[lf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ja(I){switch(I){case qo.NOTIFICATION_CLICKED:return"notification_open";case qo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wl(){return(Wl=(0,O.Z)(function*(I,D){const R=D.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===qo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ui(R)):I.onMessageHandler.next(ui(R)));const L=R.data;ku(L)&&"1"===L[xd]&&(yield Qo(I,R.messageType,L))})).apply(this,arguments)}const Jo="@firebase/messaging",Nd=I=>{const D=new ms(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function dg(I,D){return Wl.apply(this,arguments)}(D,R)),D},Xo=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:L=>function Vu(I,D){return Qa.apply(this,arguments)}(D,L)}};function ea(){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Od(){(0,le._registerComponent)(new ge.wA("messaging",Nd,"PUBLIC")),(0,le._registerComponent)(new ge.wA("messaging-internal",Xo,"PRIVATE")),(0,le.registerVersion)(Jo,"0.9.13"),(0,le.registerVersion)(Jo,"0.9.13","esm2017")}();const kd="analytics",hg="firebase_id",ys="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ta="https://www.googletagmanager.com/gtag/js",er=new ue.Yd("@firebase/analytics");function ff(I){return Promise.all(I.map(D=>D.catch(R=>R)))}function ao(I,D){const R=document.createElement("script");R.src=`${ta}?l=${I}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Ld(I,D,R,L,Y,ie){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,O.Z)(function*(I,D,R,L,Y,ie){const Pe=L[Y];try{if(Pe)yield D[Pe];else{const wt=(yield ff(R)).find(bt=>bt.measurementId===Y);wt&&(yield D[wt.appId])}}catch(Ve){er.error(Ve)}I("config",Y,ie)})).apply(this,arguments)}function ju(I,D,R,L,Y){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(I,D,R,L,Y){try{let ie=[];if(Y&&Y.send_to){let Pe=Y.send_to;Array.isArray(Pe)||(Pe=[Pe]);const Ve=yield ff(R);for(const wt of Pe){const bt=Ve.find(Ct=>Ct.measurementId===wt),jt=bt&&D[bt.appId];if(!jt){ie=[];break}ie.push(jt)}}0===ie.length&&(ie=Object.values(D)),yield Promise.all(ie),I("event",L,Y||{})}catch(ie){er.error(ie)}})).apply(this,arguments)}function pf(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(ta))return D;return null}const kt=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),na=new class Ht{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Ud(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function li(I){return ur.apply(this,arguments)}function ur(){return(ur=(0,O.Z)(function*(I){var D;const{appId:R,apiKey:L}=I,Y={method:"GET",headers:Ud(L)},ie=ys.replace("{app-id}",R),Pe=yield fetch(ie,Y);if(200!==Pe.status&&304!==Pe.status){let Ve="";try{const wt=yield Pe.json();(null===(D=wt.error)||void 0===D?void 0:D.message)&&(Ve=wt.error.message)}catch(wt){}throw kt.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:Ve})}return Pe.json()})).apply(this,arguments)}function sn(I){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(I,D=na,R){const{appId:L,apiKey:Y,measurementId:ie}=I.options;if(!L)throw kt.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:L};throw kt.create("no-api-key")}const Pe=D.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new tu;return setTimeout((0,O.Z)(function*(){Ve.abort()}),void 0!==R?R:6e4),_s({appId:L,apiKey:Y,measurementId:ie},Pe,Ve,D)})).apply(this,arguments)}function _s(I,D,R){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:R},L,Y=na){const{appId:ie,measurementId:Pe}=I;try{yield Hu(L,D)}catch(Ve){if(Pe)return er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ie,measurementId:Pe};throw Ve}try{const Ve=yield li(I);return Y.deleteThrottleMetadata(ie),Ve}catch(Ve){if(!ra(Ve)){if(Y.deleteThrottleMetadata(ie),Pe)return er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ie,measurementId:Pe};throw Ve}const wt=503===Number(Ve.customData.httpStatus)?(0,ne.$s)(R,Y.intervalMillis,30):(0,ne.$s)(R,Y.intervalMillis),bt={throttleEndTimeMillis:Date.now()+wt,backoffCount:R+1};return Y.setThrottleMetadata(ie,bt),er.debug(`Calling attemptFetch again in ${wt} millis`),_s(I,bt,L,Y)}})).apply(this,arguments)}function Hu(I,D){return new Promise((R,L)=>{const Y=Math.max(D-Date.now(),0),ie=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ie),L(kt.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function ra(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class tu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Bd(){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(){if(!(0,ne.hl)())return er.warn(kt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return er.warn(kt.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(I,D,R,L,Y,ie,Pe){var Ve;const wt=sn(I);wt.then(Gn=>{R[Gn.measurementId]=Gn.appId,I.options.measurementId&&Gn.measurementId!==I.options.measurementId&&er.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>er.error(Gn)),D.push(wt);const bt=Bd().then(Gn=>{if(Gn)return L.getId()}),[jt,Ct]=yield Promise.all([wt,bt]);pf()||ao(ie,jt.measurementId),Y("js",new Date);const cr=null!==(Ve=null==Pe?void 0:Pe.config)&&void 0!==Ve?Ve:{};return cr.origin="firebase",cr.update=!0,null!=Ct&&(cr[hg]=Ct),Y("config",jt.measurementId,cr),jt.measurementId})).apply(this,arguments)}class co{constructor(D){this.app=D}_delete(){return delete lr[this.app.options.appId],Promise.resolve()}}let lr={},me=[];const wr={};let yt,ho,Mi="dataLayer",di=!1;function xt(I,D,R){!function fo(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),R=kt.create("invalid-analytics-context",{errorInfo:D});er.warn(R.message)}}();const L=I.options.appId;if(!L)throw kt.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw kt.create("no-api-key");er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=lr[L])throw kt.create("already-exists",{id:L});if(!di){!function Uu(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Mi);const{wrappedGtag:ie,gtagCore:Pe}=function fg(I,D,R,L,Y){let ie=function(...Pe){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function Vd(I,D,R,L){function ie(){return(ie=(0,O.Z)(function*(Pe,Ve,wt){try{"event"===Pe?yield ju(I,D,R,Ve,wt):"config"===Pe?yield Ld(I,D,R,L,Ve,wt):I("set",Ve)}catch(bt){er.error(bt)}})).apply(this,arguments)}return function Y(Pe,Ve,wt){return ie.apply(this,arguments)}}(ie,I,D,R),{gtagCore:ie,wrappedGtag:window[Y]}}(lr,me,wr,Mi,"gtag");ho=ie,yt=Pe,di=!0}return lr[L]=function Er(I,D,R,L,Y,ie,Pe){return On.apply(this,arguments)}(I,me,wr,D,yt,Mi,R),new co(I)}function ia(){return(ia=(0,O.Z)(function*(I,D,R,L,Y){if(Y&&Y.global)I("event",R,L);else{const ie=yield D;I("event",R,Object.assign(Object.assign({},L),{send_to:ie}))}})).apply(this,arguments)}function pg(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}const Gu="@firebase/analytics";!function Or(){(0,le._registerComponent)(new ge.wA(kd,(D,{options:R})=>xt(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,le._registerComponent)(new ge.wA("analytics-internal",function I(D){try{const R=D.getProvider(kd).getImmediate();return{logEvent:(L,Y,ie)=>function jd(I,D,R,L){I=(0,ne.m9)(I),function Xi(I,D,R,L,Y){return ia.apply(this,arguments)}(ho,lr[I.app.options.appId],D,R,L).catch(Y=>er.error(Y))}(R,L,Y,ie)}}catch(R){throw kt.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,le.registerVersion)(Gu,"0.7.9"),(0,le.registerVersion)(Gu,"0.7.9","esm2017")}();var yo=N(4408),In=N(7565);const Es=new class qu extends In.v{}(class kr extends yo.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(D,R,L):D.flush(this)}});var zu=N(4986),Qr=N(8505),br=N(5363),ru=N(9468);const sa=new p.GfV("7.3.0"),hi="__angularfire_symbol__analyticsIsSupportedValue",_o="__angularfire_symbol__analyticsIsSupported",ws="__angularfire_symbol__remoteConfigIsSupportedValue",ts="__angularfire_symbol__remoteConfigIsSupported",Wu="__angularfire_symbol__messagingIsSupportedValue",Yl="__angularfire_symbol__messagingIsSupported";function yg(I,D,R){if(D){if(1===D.length)return D[0];const ie=D.filter(Pe=>Pe.app===R);if(1===ie.length)return ie[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[_o]||(globalThis[_o]=pg().then(I=>globalThis[hi]=I).catch(()=>globalThis[hi]=!1)),globalThis[Yl]||(globalThis[Yl]=ea().then(I=>globalThis[Wu]=I).catch(()=>globalThis[Wu]=!1)),globalThis[ts]||(globalThis[ts]=Ru().then(I=>globalThis[ws]=I).catch(()=>globalThis[ws]=!1));const Hd=(I,D)=>{const R=D?[D]:(0,X.C6)(),L=[];return R.forEach(Y=>{Y.container.getProvider(I).instances.forEach(Pe=>{L.includes(Pe)||L.push(Pe)})}),L};function ns(){}class Ql{constructor(D,R=Es){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,L){const Y=this.zone;return this.delegate.schedule(function(Pe){Y.runGuarded(()=>{D.apply(this,[Pe])})},R,L)}}class Jl{constructor(D){this.zone=D,this.task=null}call(D,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ns,{},ns,ns)),R.pipe((0,Qr.b)({next:L,complete:L,error:L})).subscribe(D).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let mf=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ql(Zone.current)),this.insideAngular=R.run(()=>new Ql(Zone.current,zu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function mn(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function fi(I){return I.pipe((0,br.Q)(mn().outsideAngular))}function aa(I){return mn(),function qs(I){return function(R){return(R=R.lift(new Jl(I.ngZone))).pipe((0,ru.R)(I.outsideAngular),(0,br.Q)(I.insideAngular))}}(mn())(I)}},2090:(nt,we,N)=>{N.d(we,{BH:()=>We,LL:()=>ae,ZR:()=>ye,zI:()=>Z,US:()=>ge,tV:()=>he,L:()=>oe,$s:()=>Bt,r3:()=>Ar,Sg:()=>Me,ne:()=>Ii,vZ:()=>ni,ZB:()=>H,pd:()=>ks,m9:()=>yr,z$:()=>Ne,jU:()=>Ie,ru:()=>Ke,d:()=>Te,xb:()=>Vt,w1:()=>Ee,hl:()=>$,uI:()=>Ue,UG:()=>pe,b$:()=>Je,G6:()=>Be,Mn:()=>be,xO:()=>Mr,zd:()=>Vi,eu:()=>ve});const le=function(U){const z=[];let W=0;for(let Ce=0;Ce<U.length;Ce++){let q=U.charCodeAt(Ce);q<128?z[W++]=q:q<2048?(z[W++]=q>>6|192,z[W++]=63&q|128):55296==(64512&q)&&Ce+1<U.length&&56320==(64512&U.charCodeAt(Ce+1))?(q=65536+((1023&q)<<10)+(1023&U.charCodeAt(++Ce)),z[W++]=q>>18|240,z[W++]=q>>12&63|128,z[W++]=q>>6&63|128,z[W++]=63&q|128):(z[W++]=q>>12|224,z[W++]=q>>6&63|128,z[W++]=63&q|128)}return z},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,z){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let q=0;q<U.length;q+=3){const J=U[q],Re=q+1<U.length,tt=Re?U[q+1]:0,ht=q+2<U.length,Tt=ht?U[q+2]:0;let Wn=(15&tt)<<2|Tt>>6,xr=63&Tt;ht||(xr=64,Re||(Wn=64)),Ce.push(W[J>>2],W[(3&J)<<4|tt>>4],W[Wn],W[xr])}return Ce.join("")},encodeString(U,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(U):this.encodeByteArray(le(U),z)},decodeString(U,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(U):function(U){const z=[];let W=0,Ce=0;for(;W<U.length;){const q=U[W++];if(q<128)z[Ce++]=String.fromCharCode(q);else if(q>191&&q<224){const J=U[W++];z[Ce++]=String.fromCharCode((31&q)<<6|63&J)}else if(q>239&&q<365){const ht=((7&q)<<18|(63&U[W++])<<12|(63&U[W++])<<6|63&U[W++])-65536;z[Ce++]=String.fromCharCode(55296+(ht>>10)),z[Ce++]=String.fromCharCode(56320+(1023&ht))}else{const J=U[W++],Re=U[W++];z[Ce++]=String.fromCharCode((15&q)<<12|(63&J)<<6|63&Re)}}return z.join("")}(this.decodeStringToByteArray(U,z))},decodeStringToByteArray(U,z){this.init_();const W=z?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let q=0;q<U.length;){const J=W[U.charAt(q++)],tt=q<U.length?W[U.charAt(q)]:0;++q;const Tt=q<U.length?W[U.charAt(q)]:64;++q;const It=q<U.length?W[U.charAt(q)]:64;if(++q,null==J||null==tt||null==Tt||null==It)throw Error();Ce.push(J<<2|tt>>4),64!==Tt&&(Ce.push(tt<<4&240|Tt>>2),64!==It&&Ce.push(Tt<<6&192|It))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},oe=function(U){return function(U){const z=le(U);return ge.encodeByteArray(z,!0)}(U).replace(/\./g,"")},he=function(U){try{return ge.decodeString(U,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function H(U,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return z}for(const W in z)!z.hasOwnProperty(W)||!te(W)||(U[W]=H(U[W],z[W]));return U}function te(U){return"__proto__"!==U}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,W)=>{this.resolve=z,this.reject=W})}wrapCallback(z){return(W,Ce)=>{W?this.reject(W):this.resolve(Ce),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(W):z(W,Ce))}}}function Me(U,z){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=z||"demo-project",q=U.iat||0,J=U.sub||U.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:q,exp:q+3600,auth_time:q,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},U);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Re)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function Ke(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Je(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Ne().indexOf("Electron/")>=0}function Ee(){const U=Ne();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function be(){return Ne().indexOf("MSAppHost/")>=0}function Be(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function ve(){return new Promise((U,z)=>{try{let W=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Ce);q.onsuccess=()=>{q.result.close(),W||self.indexedDB.deleteDatabase(Ce),U(!0)},q.onupgradeneeded=()=>{W=!1},q.onerror=()=>{var J;z((null===(J=q.error)||void 0===J?void 0:J.message)||"")}}catch(W){z(W)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(z,W,Ce){super(W),this.code=z,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(z,W,Ce){this.service=z,this.serviceName=W,this.errors=Ce}create(z,...W){const Ce=W[0]||{},q=`${this.service}/${z}`,J=this.errors[z],Re=J?function Oe(U,z){return U.replace(dt,(W,Ce)=>{const q=z[Ce];return null!=q?String(q):`<${Ce}?>`})}(J,Ce):"Error";return new ye(q,`${this.serviceName}: ${Re} (${q}).`,Ce)}}const dt=/\{\$([^}]+)}/g;function Ar(U,z){return Object.prototype.hasOwnProperty.call(U,z)}function Vt(U){for(const z in U)if(Object.prototype.hasOwnProperty.call(U,z))return!1;return!0}function ni(U,z){if(U===z)return!0;const W=Object.keys(U),Ce=Object.keys(z);for(const q of W){if(!Ce.includes(q))return!1;const J=U[q],Re=z[q];if(pr(J)&&pr(Re)){if(!ni(J,Re))return!1}else if(J!==Re)return!1}for(const q of Ce)if(!W.includes(q))return!1;return!0}function pr(U){return null!==U&&"object"==typeof U}function Mr(U){const z=[];for(const[W,Ce]of Object.entries(U))Array.isArray(Ce)?Ce.forEach(q=>{z.push(encodeURIComponent(W)+"="+encodeURIComponent(q))}):z.push(encodeURIComponent(W)+"="+encodeURIComponent(Ce));return z.length?"&"+z.join("&"):""}function Vi(U){const z={};return U.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[q,J]=Ce.split("=");z[decodeURIComponent(q)]=decodeURIComponent(J)}}),z}function ks(U){const z=U.indexOf("?");if(!z)return"";const W=U.indexOf("#",z);return U.substring(z,W>0?W:void 0)}function Ii(U,z){const W=new mt(U,z);return W.subscribe.bind(W)}class mt{constructor(z,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{z(this)}).catch(Ce=>{this.error(Ce)})}next(z){this.forEachObserver(W=>{W.next(z)})}error(z){this.forEachObserver(W=>{W.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,W,Ce){let q;if(void 0===z&&void 0===W&&void 0===Ce)throw new Error("Missing Observer.");q=function Sn(U,z){if("object"!=typeof U||null===U)return!1;for(const W of z)if(W in U&&"function"==typeof U[W])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:W,complete:Ce},void 0===q.next&&(q.next=Rn),void 0===q.error&&(q.error=Rn),void 0===q.complete&&(q.complete=Rn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(Re){}}),this.observers.push(q),J}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,z)}sendOne(z,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{W(this.observers[z])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}function Bt(U,z=1e3,W=2){const Ce=z*Math.pow(W,U),q=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+q)}function yr(U){return U&&U._delegate?U._delegate:U}},2130:(nt,we,N)=>{var p=N(5e3);let X=null;function O(){return X}const ue=new p.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function he(){return(0,p.LFG)(H)}()},providedIn:"platform"}),n})();const G=new p.OlP("Location Initialized");let H=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function We(){return new H((0,p.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,p.LFG)(ue).location;return new Je((0,p.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ke=new p.OlP("appBaseHref");let Je=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(Ke,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(Ke,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Be(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(p.LFG(pe),p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function be(){return new Ee((0,p.LFG)(pe),(0,p.LFG)(oe))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function Ho(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}let ji=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})(),Jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ln,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ln{constructor(){this.$implicit=null,this.ngIf=null}}function Mu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let xd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function zo(n){return"server"===n}let Ll=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Wo((0,p.LFG)(ue),window)}),n})();class Wo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function zi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Vl(this.window.history)||Vl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Vl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class rn{}class io extends class $a extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){X||(X=n)}(new io)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ga(){return en=en||document.querySelector("base"),en?en.getAttribute("href"):null}();return null==t?null:function js(n){Pu=Pu||document.createElement("a"),Pu.setAttribute("href",n);const e=Pu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){en=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ho(document.cookie,e)}}let Pu,en=null;const or=new p.OlP("TRANSITION_ID"),bn=[{provide:p.ip1,useFactory:function Ul(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[or,ue,p.zs3],multi:!0}];class Wi{static init(){(0,p.VLi)(new Wi)}addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const so=new p.OlP("EventManagerPlugins");let gs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(so),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class qa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Si=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ki=(()=>{class n extends Si{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ko),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ko))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ko(n){O().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zo=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(Zo,n),t.push(i))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Yo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ka(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new $l(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(gs),p.LFG(Ki),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Yo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=ft[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ft[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(r)):this.eventManager.addEventListener(e,t,Lt(r))}}class Ka extends Yo{constructor(e,t,r,i){super(e),this.component=r;const u=Se(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function jl(n){return"_ngcontent-%COMP%".replace(Zo,n)}(i+"-"+r.id),this.hostAttr=function Hl(n){return"_nghost-%COMP%".replace(Zo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $l extends Yo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Se(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cg=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ku=["alt","control","meta","shift"],Fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ms={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ya=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(ku.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Hs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Nn.hasOwnProperty(e)&&(e=Nn[e]))}return Fu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ku.forEach(u=>{u!=i&&ms[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Vu=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Ai(){io.makeCurrent(),Wi.init()},multi:!0},{provide:ue,useFactory:function Lu(){return(0,p.RDi)(document),document},deps:[]}]),Qa=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Gl(){return new p.qLn},deps:[]},{provide:so,useClass:cg,multi:!0,deps:[ue,p.R0b,p.Lbi]},{provide:so,useClass:Ya,multi:!0,deps:[ue]},{provide:gn,useClass:gn,deps:[gs,Ki,p.AFp]},{provide:p.FYo,useExisting:gn},{provide:Si,useExisting:Ki},{provide:Ki,useClass:Ki,deps:[ue]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:gs,useClass:gs,deps:[so,p.R0b]},{provide:rn,useClass:ar,deps:[]}];let Qo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:or,useExisting:p.AFp},bn]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Qa,imports:[xd,p.hGG]}),n})();"undefined"!=typeof window&&window;var pf=N(4986),Qi=N(8306),kt=N(8996),Ji=N(7669);function pt(...n){const e=(0,Ji.yG)(n);return(0,kt.D)(n,e)}var Ht=N(5813),na=N(8189);function li(...n){return function Ud(){return(0,na.J)(1)}()((0,kt.D)(n,(0,Ji.yG)(n)))}var ur=N(4482);function sn(...n){const e=(0,Ji.yG)(n);return(0,ur.e)((t,r)=>{(e?li(n,t,e):li(n,t)).subscribe(r)})}var $n=N(5403);function _s(){return(0,ur.e)((n,e)=>{let t,r=!1;n.subscribe((0,$n.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var Mt=N(4004);function Hu(n,e,t,r,i){return(u,c)=>{let f=t,y=e,b=0;u.subscribe((0,$n.x)(c,S=>{const M=b++;y=f?n(y,S,M):(f=!0,S),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function ra(n,e){return(0,ur.e)(Hu(n,e,arguments.length>=2,!0))}var tu=N(4671);function lo(n,e){return n===e}function Er(n,e){return(0,ur.e)((t,r)=>{let i=0;t.subscribe((0,$n.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var et,On=N(2011),lr=(N(8775),N(3942)),me=N(5861),wr=N(9681),Mi=N(4859),ci=N(1877),yt=N(2090),ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},di={},fo=fo||{},xt=ho||self;function Xi(){}function ia(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function es(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var po="closure_uid_"+(1e9*Math.random()>>>0),nu=0;function go(n,e,t){return n.call.apply(n.bind,arguments)}function vs(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Cn(n,e,t){return(Cn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?go:vs).apply(null,arguments)}function mo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Yr(){this.s=this.s,this.o=this.o}var Kl={};Yr.prototype.s=!1,Yr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $u(n){return Object.prototype.hasOwnProperty.call(n,po)&&n[po]||(n[po]=++nu)}(this);delete Kl[n]}},Yr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const En=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},gf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function gg(n){return Array.prototype.concat.apply([],arguments)}function jd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gu(n){return/^[\s\xa0]*$/.test(n)}var kr,Zl=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Or(n,e){return-1!=n.indexOf(e)}function yo(n,e){return n<e?-1:n>e?1:0}e:{var In=xt.navigator;if(In){var qu=In.userAgent;if(qu){kr=qu;break e}}kr=""}function Es(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function mg(n){const e={};for(const t in n)e[t]=n[t];return e}var zu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qr(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<zu.length;u++)t=zu[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function br(n){return br[" "](n),n}br[" "]=Xi;var vo,n,sa=Or(kr,"Opera"),hi=Or(kr,"Trident")||Or(kr,"MSIE"),_o=Or(kr,"Edge"),ws=_o||hi,ts=Or(kr,"Gecko")&&!(Or(kr.toLowerCase(),"webkit")&&!Or(kr,"Edge"))&&!(Or(kr,"Trident")||Or(kr,"MSIE"))&&!Or(kr,"Edge"),Wu=Or(kr.toLowerCase(),"webkit")&&!Or(kr,"Edge");function Yl(){var n=xt.document;return n?n.documentMode:void 0}e:{var Fr="",oa=(n=kr,ts?/rv:([^\);]+)(\)|;)/.exec(n):_o?/Edge\/([\d\.]+)/.exec(n):hi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Wu?/WebKit\/(\S+)/.exec(n):sa?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(oa&&(Fr=oa?oa[1]:""),hi){var $s=Yl();if(null!=$s&&$s>parseFloat(Fr)){vo=String($s);break e}}vo=Fr}var yg={};var Jl=xt.document&&hi&&(Yl()||parseInt(vo,10))||void 0,mf=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",Xi,e),xt.removeEventListener("test",Xi,e)}catch(t){}return n}();function mn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Gs(n,e){if(mn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ts){e:{try{br(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:bs[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gs.Z.h.call(this)}}mn.prototype.h=function(){this.defaultPrevented=!0},Mn(Gs,mn);var bs={2:"touch",3:"pen",4:"mouse"};Gs.prototype.h=function(){Gs.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var fi="closure_listenable_"+(1e6*Math.random()|0),Ay=0;function aa(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Ay,this.ca=this.fa=!1}function qs(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Cs(n){this.src=n,this.g={},this.h=0}function Ku(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=En(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(qs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function I(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Cs.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=I(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new aa(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var D="closure_lm_"+(1e6*Math.random()|0),R={};function L(n,e,t,r,i){if(r&&r.once)return Pe(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)L(n,e[u],t,r,i);return null}return t=Gn(t),n&&n[fi]?n.N(e,t,es(r)?!!r.capture:!!r,i):Y(n,e,t,!1,r,i)}function Y(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=es(i)?!!i.capture:!!i,f=Ct(n);if(f||(n[D]=f=new Cs(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function ie(){var e=jt;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mf||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bt(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Pe(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Pe(n,e[u],t,r,i);return null}return t=Gn(t),n&&n[fi]?n.O(e,t,es(r)?!!r.capture:!!r,i):Y(n,e,t,!0,r,i)}function Ve(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ve(n,e[u],t,r,i);else r=es(r)?!!r.capture:!!r,t=Gn(t),n&&n[fi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=I(u=n.g[e],t,r,i))&&(qs(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ct(n))&&(e=n.g[e.toString()],n=-1,e&&(n=I(e,t,r,i)),(t=-1<n?e[n]:null)&&wt(t))}function wt(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[fi])Ku(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bt(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ct(e))?(Ku(t,n),0==t.h&&(t.src=null,e[D]=null)):qs(n)}}}function bt(n){return n in R?R[n]:R[n]="on"+n}function jt(n,e){if(n.ca)n=!0;else{e=new Gs(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wt(n),n=t.call(r,e)}return n}function Ct(n){return(n=n[D])instanceof Cs?n:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gn(n){return"function"==typeof n?n:(n[cr]||(n[cr]=function(e){return n.handleEvent(e)}),n[cr])}function wn(){Yr.call(this),this.i=new Cs(this),this.P=this,this.I=null}function dn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mn(e,n);else if(e instanceof mn)e.target=e.target||n;else{var i=e;Qr(e=new mn(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Lr(c,r,!0,e)&&i}if(i=Lr(c=e.g=n,r,!0,e)&&i,i=Lr(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Lr(c=e.g=t[u],r,!1,e)&&i}function Lr(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var f=c.listener,y=c.ia||c.src;c.fa&&Ku(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}Mn(wn,Yr),wn.prototype[fi]=!0,wn.prototype.removeEventListener=function(n,e,t,r){Ve(this,n,e,t,r)},wn.prototype.M=function(){if(wn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qs(t[r]);delete n.g[e],n.h--}}this.I=null},wn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},wn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var xi=xt.JSON.stringify;function pi(){var n=Zu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Wd,Gd=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qd,n=>n.reset());class qd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Xl(n){xt.setTimeout(()=>{throw n},0)}function zd(n,e){Wd||function yf(){var n=xt.Promise.resolve(void 0);Wd=function(){n.then(My)}}(),ua||(Wd(),ua=!0),Zu.add(n,e)}var ua=!1,Zu=new class $d{constructor(){this.h=this.g=null}add(e,t){const r=Gd.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function My(){for(var n;n=pi();){try{n.h.call(n.g)}catch(t){Xl(t)}var e=Gd;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ua=!1}function ec(n,e){wn.call(this),this.h=n||1,this.g=e||xt,this.j=Cn(this.kb,this),this.l=Date.now()}function Kd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _f(n,e,t){if("function"==typeof n)t&&(n=Cn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Cn(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function _g(n){n.g=_f(()=>{n.g=null,n.i&&(n.i=!1,_g(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mn(ec,wn),(et=ec.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),dn(this,"tick"),this.da&&(Kd(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){ec.Z.M.call(this),Kd(this),delete this.g};class xy extends Yr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_g(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(n){Yr.call(this),this.h=n,this.g={}}Mn(la,Yr);var vg=[];function tc(n,e,t,r){Array.isArray(t)||(t&&(vg[0]=t.toString()),t=vg);for(var i=0;i<t.length;i++){var u=L(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Zd(n){Es(n.g,function(e,t){this.g.hasOwnProperty(t)&&wt(e)},n),n.g={}}function Eo(){this.g=!0}function nc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return xi(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}la.prototype.M=function(){la.Z.M.call(this),Zd(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Eo.prototype.Aa=function(){this.g=!1},Eo.prototype.info=function(){};var ca={},vf=null;function ic(){return vf=vf||new wn}function Ef(n){mn.call(this,ca.Ma,n)}function sc(n){const e=ic();dn(e,new Ef(e,n))}function wf(n,e){mn.call(this,ca.STAT_EVENT,n),this.stat=e}function Jr(n){const e=ic();dn(e,new wf(e,n))}function Eg(n,e){mn.call(this,ca.Na,n),this.size=e}function oc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}ca.Ma="serverreachability",Mn(Ef,mn),ca.STAT_EVENT="statevent",Mn(wf,mn),ca.Na="timingevent",Mn(Eg,mn);var Is={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},da={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bf(){}function Ny(){}bf.prototype.h=null;var Jd,ac={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function wg(){mn.call(this,"d")}function Qd(){mn.call(this,"c")}function uc(){}function Yu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new la(this),this.P=Oy,this.W=new ec(n=ws?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bg}function bg(){this.i=null,this.g="",this.h=!1}Mn(wg,mn),Mn(Qd,mn),Mn(uc,bf),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},Jd=new uc;var Oy=45e3,Cg={},If={};function rs(n,e,t){n.K=1,n.v=yn(bo(e)),n.s=t,n.U=!0,Df(n,null)}function Df(n,e){n.F=Date.now(),fa(n),n.A=bo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Af(t.h,"t",r),n.C=0,t=n.l.H,n.h=new bg,n.g=Vf(n.l,t?e:null,!n.s),0<n.O&&(n.L=new xy(Cn(n.Ia,n,n.g),n.O)),tc(n.V,n.g,"readystatechange",n.gb),e=n.H?mg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sc(1),function Ry(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),y=0;y<f.length;y++){var b=f[y].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ds(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ha(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Ig(n,t),i==If){4==e&&(n.o=4,Jr(14),r=!1),nc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Cg){n.o=4,Jr(15),nc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}nc(n.j,n.m,i,null),lc(n,i)}Ds(n)&&i!=If&&i!=Cg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Jr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ff(e),e.L=!0,Jr(11))):(nc(n.j,n.m,t,"[Invalid Chunked Response]"),Ju(n),Qu(n))}function Ig(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?If:(t=Number(e.substring(t,r)),isNaN(t)?Cg:(r+=1)+t>e.length?If:(e=e.substr(r,t),n.C=r+t,e))}function fa(n){n.Y=Date.now()+n.P,Tf(n,n.P)}function Tf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=oc(Cn(n.eb,n),e)}function Sf(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Qu(n){0==n.l.G||n.I||oh(n.l,n)}function Ju(n){Sf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Kd(n.W),Zd(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function lc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xr(t.i,n)))if(t.I=n.N,!n.J&&Xr(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=oc(Cn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;uu(t),P(t)}au(t),Jr(18)}if(1>=Mf(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else zs(t,11)}else if((n.J||t.g==n)&&uu(t),!Gu(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const B=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var u=r.i;!u.g&&(Or(B,"spdy")||Or(B,"quic")||Or(B,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(ma(u,u.h),u.h=null))}if(r.D){const se=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.sa=se,Dn(r.F,r.D,se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=uh(r,r.H?r.la:null,r.W),c.J){xf(r.i,c);var f=c,y=r.K;y&&f.setTimeout(y),f.B&&(Sf(f),fa(f)),r.g=c}else _i(r);0<t.l.length&&Fe(t)}else"stop"!=b[0]&&"close"!=b[0]||zs(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?zs(t,7):T(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}sc(4)}catch(b){}}function dc(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ia(n)||"string"==typeof n)gf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ia(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function cc(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ia(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function hc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof hc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Dg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];pa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)pa(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function pa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=Yu.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==yi(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const S=yi(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||ws||this.g&&(this.h.h||this.g.ga()||Ts(this.g)))){this.I||4!=S||7==e||sc(8==e||0>=M?3:2),Sf(this);var t=this.g.ba();this.N=t;t:if(Ds(this)){var r=Ts(this.g);n="";var i=r.length,u=4==yi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ju(this),Qu(this);var c="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function Py(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gu(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Jr(12),Ju(this),Qu(this);break e}nc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lc(this,t)}this.U?(ha(this,S,c),ws&&this.i&&3==S&&(tc(this.V,this.W,"tick",this.fb),this.W.start())):(nc(this.j,this.m,c,null),lc(this,c)),4==S&&Ju(this),this.i&&!this.I&&(4==S?oh(this.l,this):(this.i=!1,fa(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Jr(12)):(this.o=0,Jr(13)),Ju(this),Qu(this)}}}catch(S){}},et.fb=function(){if(this.g){var n=yi(this.g),e=this.g.ga();this.C<e.length&&(Sf(this),ha(this,n,e),this.i&&4!=n&&fa(this))}},et.cancel=function(){this.I=!0,Ju(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Yd(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sc(3),Jr(17)),Ju(this),this.o=2,Qu(this)):Tf(this,this.Y-n)},(et=hc.prototype).R=function(){Dg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Dg(this),this.g.concat()},et.get=function(n,e){return pa(this.h,n)?this.h[n]:e},et.set=function(n,e){pa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var Tg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wo){this.g=void 0!==e?e:n.g,fc(this,n.j),this.s=n.s,Co(this,n.i),Xu(this,n.m),this.l=n.l,e=n.h;var t=new gc;t.i=e.i,e.g&&(t.g=new hc(e.g),t.h=e.h),Xd(this,t),this.o=n.o}else n&&(t=String(n).match(Tg))?(this.g=!!e,fc(this,t[1]||"",!0),this.s=iu(t[2]||""),Co(this,t[3]||"",!0),Xu(this,t[4]),this.l=iu(t[5]||"",!0),Xd(this,t[6]||"",!0),this.o=iu(t[7]||"")):(this.g=!!e,this.h=new gc(null,this.g))}function bo(n){return new wo(n)}function fc(n,e,t){n.j=t?iu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Co(n,e,t){n.i=t?iu(e,!0):e}function Xu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Xd(n,e,t){e instanceof gc?(n.h=e,function dr(n,e){e&&!n.j&&(is(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Vr(this,r),Af(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=su(e,pc)),n.h=new gc(e,n.g))}function Dn(n,e,t){n.h.set(e,t)}function yn(n){return Dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function iu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function su(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ly),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ly(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(su(e,Ag,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(su(e,Ag,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(su(t,"/"==t.charAt(0)?Uy:Vy,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",su(t,W0)),n.join("")};var Ag=/[#\/\?@]/g,Vy=/[#\?:]/g,Uy=/[#\?]/g,pc=/[#\?@]/g,W0=/#/g;function gc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function is(n){n.g||(n.g=new hc,n.h=0,n.i&&function Sg(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Vr(n,e){is(n),e=ga(n,e),pa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,pa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Dg(n)))}function eh(n,e){return is(n),e=ga(n,e),pa(n.g.h,e)}function Af(n,e,t){Vr(n,e),0<t.length&&(n.i=null,n.g.set(ga(n,e),jd(t)),n.h+=t.length)}function ga(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function mc(n){this.l=n||By,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=gc.prototype).add=function(n,e){is(this),this.i=null,n=ga(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){is(this),this.g.forEach(function(t,r){gf(t,function(i){n.call(e,i,r,this)},this)},this)},et.T=function(){is(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},et.R=function(n){is(this);var e=[];if("string"==typeof n)eh(this,n)&&(e=gg(e,this.g.get(ga(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=gg(e,n[t])}return e},et.set=function(n,e){return is(this),this.i=null,eh(this,n=ga(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var By=10;function th(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Mf(n){return n.h?1:n.g?n.g.size:0}function Xr(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ma(n,e){n.g?n.g.add(e):n.h=e}function xf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Rf(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return jd(n.i)}function yc(){}function Pf(){this.g=new yc}function Nf(n,e,t){const r=t||"";try{dc(n,function(i,u){let c=i;es(i)&&(c=xi(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function nh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function gi(n){this.l=n.$b||null,this.j=n.ib||!1}function _c(n,e){wn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Of,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mc.prototype.cancel=function(){if(this.i=Rf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yc.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},yc.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Mn(gi,bf),gi.prototype.g=function(){return new _c(this.l,this.j)},gi.prototype.i=function(n){return function(){return n}}({}),Mn(_c,wn);var Of=0;function vc(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ec(n){n.readyState=4,n.l=null,n.j=null,n.A=null,el(n)}function el(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=_c.prototype).open=function(n,e){if(this.readyState!=Of)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,el(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ec(this)),this.readyState=Of},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,el(this)),this.g&&(this.readyState=3,el(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vc(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ec(this):el(this),3==this.readyState&&vc(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Ec(this))},et.Ta=function(n){this.g&&(this.response=n,Ec(this))},et.ha=function(){this.g&&Ec(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_c.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mi=xt.JSON.parse;function kn(n){wn.call(this),this.headers=new hc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rh,this.K=this.L=!1}Mn(kn,wn);var rh="",xg=/^https?$/i,Io=["POST","PUT"];function Rg(n){return"content-type"==n.toLowerCase()}function kf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Pg(n),sh(n)}function Pg(n){n.D||(n.D=!0,dn(n,"complete"),dn(n,"error"))}function ih(n){if(n.h&&void 0!==fo&&(!n.C[1]||4!=yi(n)||2!=n.ba()))if(n.v&&4==yi(n))_f(n.Fa,0,n);else if(dn(n,"readystatechange"),4==yi(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Tg)[1]||null;if(!i&&xt.self&&xt.self.location){var u=xt.self.location.protocol;i=u.substr(0,u.length-1)}r=!xg.test(i?i.toLowerCase():"")}t=r}if(t)dn(n,"complete"),dn(n,"success");else{n.m=6;try{var c=2<yi(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",Pg(n)}}finally{sh(n)}}}function sh(n,e){if(n.g){Ng(n);const t=n.g,r=n.C[0]?Xi:null;n.g=null,n.C=null,e||dn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Ng(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function yi(n){return n.g?n.g.readyState:0}function Ts(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rh:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function h(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function _(n){let e="";return Es(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Dn(n,e,t))}function m(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function E(n){this.za=0,this.l=[],this.h=new Eo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=m("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=m("baseRetryDelayMs",5e3,n),this.$a=m("retryDelaySeedMs",1e4,n),this.Ya=m("forwardChannelMaxRetries",2,n),this.ra=m("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new mc(n&&n.concurrentRequestLimit),this.Ca=new Pf,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function T(n){if(K(n),3==n.G){var e=n.V++,t=bo(n.F);Dn(t,"SID",n.J),Dn(t,"RID",e),Dn(t,"TYPE","terminate"),ut(n,t),(e=new Yu(n,n.h,e,void 0)).K=2,e.v=yn(bo(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Vf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fa(e)}Lf(n)}function P(n){n.g&&(Ff(n),n.g.cancel(),n.g=null)}function K(n){P(n),n.u&&(xt.clearTimeout(n.u),n.u=null),uu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function fe(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Fe(n)}function Fe(n){th(n.i)||n.m||(n.m=!0,zd(n.Ha,n),n.C=0)}function gt(n,e){var t;t=e?e.m:n.V++;const r=bo(n.F);Dn(r,"SID",n.J),Dn(r,"RID",t),Dn(r,"AID",n.U),ut(n,r),n.o&&n.s&&h(r,n.o,n.s),t=new Yu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Fn(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ma(n.i,t),rs(t,r,e)}function ut(n,e){n.j&&dc({},function(t,r){Dn(e,r,t)})}function Fn(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Cn(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let b=i[y].h;const S=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),f=!1;else try{Nf(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function _i(n){n.g||n.u||(n.Y=1,zd(n.Ga,n),n.A=0)}function au(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=oc(Cn(n.Ga,n),ah(n,n.A)),n.A++,0))}function Ff(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function Do(n){n.g=new Yu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=bo(n.oa);Dn(e,"RID","rpc"),Dn(e,"SID",n.J),Dn(e,"CI",n.N?"0":"1"),Dn(e,"AID",n.U),ut(n,e),Dn(e,"TYPE","xmlhttp"),n.o&&n.s&&h(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=yn(bo(e)),t.s=null,t.U=!0,Df(t,n)}function uu(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function oh(n,e){var t=null;if(n.g==e){uu(n),Ff(n),n.g=null;var r=2}else{if(!Xr(n.i,e))return;t=e.D,xf(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;dn(r=ic(),new Eg(r,t,e,i)),Fe(n)}else _i(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Qe(n,e){return!(Mf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=oc(Cn(n.Ha,n,e),ah(n,n.C)),n.C++,0)))}(n,e)||2==r&&au(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:zs(n,5);break;case 4:zs(n,10);break;case 3:zs(n,6);break;default:zs(n,2)}}function ah(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function zs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Cn(n.jb,n);t||(t=new wo("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||fc(t,"https"),yn(t)),function Mg(n,e){const t=new Eo;if(xt.Image){const r=new Image;r.onload=mo(nh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=mo(nh,t,r,"TestLoadImage: error",!1,e),r.onabort=mo(nh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=mo(nh,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Jr(2);n.G=0,n.j&&n.j.va(e),Lf(n),K(n)}function Lf(n){n.G=0,n.I=-1,n.j&&((0!=Rf(n.i).length||0!=n.l.length)&&(n.i.i.length=0,jd(n.l),n.l.length=0),n.j.ua())}function uh(n,e,t){let r=function ky(n){return n instanceof wo?bo(n):new wo(n,void 0)}(t);if(""!=r.i)e&&Co(r,e+"."+r.i),Xu(r,r.m);else{const i=xt.location;r=function Fy(n,e,t,r){var i=new wo(null,void 0);return n&&fc(i,n),e&&Co(i,e),t&&Xu(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Es(n.aa,function(i,u){Dn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Dn(r,e,t),Dn(r,"VER",n.ma),ut(n,r),r}function Vf(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kn(t&&n.Ba&&!n.qa?new gi({ib:!0}):n.qa)).L=n.H,e}function Og(){}function tl(){if(hi&&!(10<=Number(Jl)))throw Error("Environmental error: no available transport.")}function Ri(n,e){wn.call(this),this.g=new E(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Gu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new bc(this)}function jy(n){wg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function kg(){Qd.call(this),this.status=1}function bc(n){this.g=n}(et=kn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jd.g(),this.C=function Cf(n){return n.h||(n.h=n.i())}(this.u?this.u:Jd),this.g.onreadystatechange=Cn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void kf(this,u)}n=t||"";const i=new hc(this.headers);r&&dc(r,function(u,c){i.set(c,u)}),r=function Sy(n){e:{var e=Rg;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=En(Io,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ng(this),0<this.B&&((this.K=function wc(n){return hi&&function Hd(){return function ru(n){var e=yg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Zl(String(vo)).split("."),t=Zl("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=yo(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||yo(0==i[2].length,0==u[2].length)||yo(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cn(this.pa,this)):this.A=_f(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){kf(this,u)}},et.pa=function(){void 0!==fo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dn(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,dn(this,"complete"),dn(this,"abort"),sh(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sh(this,!0)),kn.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?ih(this):this.cb())},et.cb=function(){ih(this)},et.ba=function(){try{return 2<yi(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),mi(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=E.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Yu(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=mg(u),Qr(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fn(this,i,e),Dn(t=bo(this.F),"RID",n),Dn(t,"CVER",22),this.D&&Dn(t,"X-HTTP-Session-Id",this.D),ut(this,t),this.o&&u&&h(t,this.o,u),ma(this.i,i),this.Ra&&Dn(t,"TYPE","init"),this.ja?(Dn(t,"$req",e),Dn(t,"SID","null"),i.$=!0,rs(i,t,null)):rs(i,t,e),this.G=2}}else 3==this.G&&(n?gt(this,n):0==this.l.length||th(this.i)||gt(this))},et.Ga=function(){if(this.u=null,Do(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=oc(Cn(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Jr(10),P(this),Do(this))},et.ab=function(){null!=this.v&&(this.v=null,P(this),au(this),Jr(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Jr(2)):(this.h.info("Failed to ping google.com"),Jr(1))},(et=Og.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},tl.prototype.g=function(n,e){return new Ri(n,e)},Mn(Ri,wn),Ri.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),zd(Cn(n.hb,n,e))),Jr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=uh(n,null,n.W),Fe(n)},Ri.prototype.close=function(){T(this.g)},Ri.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,fe(this.g,e)}else this.v?((e={}).__data__=xi(n),fe(this.g,e)):fe(this.g,n)},Ri.prototype.M=function(){this.g.j=null,delete this.j,T(this.g),delete this.g,Ri.Z.M.call(this)},Mn(jy,wg),Mn(kg,Qd),Mn(bc,Og),bc.prototype.xa=function(){dn(this.g,"a")},bc.prototype.wa=function(n){dn(this.g,new jy(n))},bc.prototype.va=function(n){dn(this.g,new kg(n))},bc.prototype.ua=function(){dn(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,Ri.prototype.send=Ri.prototype.u,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,da.COMPLETE="complete",Ny.EventType=ac,ac.OPEN="a",ac.CLOSE="b",ac.ERROR="c",ac.MESSAGE="d",wn.prototype.listen=wn.prototype.N,kn.prototype.listenOnce=kn.prototype.O,kn.prototype.getLastError=kn.prototype.La,kn.prototype.getLastErrorCode=kn.prototype.Da,kn.prototype.getStatus=kn.prototype.ba,kn.prototype.getResponseJson=kn.prototype.Qa,kn.prototype.getResponseText=kn.prototype.ga,kn.prototype.send=kn.prototype.ea;var Hy=di.createWebChannelTransport=function(){return new tl},EI=di.getStatEventTarget=function(){return ic()},$y=di.ErrorCode=Is,K0=di.EventType=da,Z0=di.Event=ca,nl=di.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Y0=di.FetchXmlHttpFactory=gi,Uf=di.WebChannel=Ny,wI=di.XhrIo=kn;const Bf="@firebase/firestore";class ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let Cc="9.8.0";const lu=new ci.Yd("@firebase/firestore");function Fg(){return lu.logLevel}function ke(n,...e){if(lu.logLevel<=ci.in.DEBUG){const t=e.map(Lg);lu.debug(`Firestore (${Cc}): ${n}`,...t)}}function qn(n,...e){if(lu.logLevel<=ci.in.ERROR){const t=e.map(Lg);lu.error(`Firestore (${Cc}): ${n}`,...t)}}function rl(n,...e){if(lu.logLevel<=ci.in.WARN){const t=e.map(Lg);lu.warn(`Firestore (${Cc}): ${n}`,...t)}}function Lg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: `+n;throw qn(e),new Error(e)}function Rt(n,e){n||st()}function qe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Q0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class zy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class X0{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ur,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,me.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ur)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new Q0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new ei(e)}}class xA{constructor(e,t,r){this.type="FirstParty",this.user=ei.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class eE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new xA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new tE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function To(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ss.A=-1;class rE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=To(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function lh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iE(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new tr(0,0))}static max(){return new St(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Wy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ic(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jf{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ye extends jf{construct(e,t,r){return new Ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ye(t)}static emptyPath(){return new Ye([])}}const oE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends jf{construct(e,t,r){return new hr(e,t,r)}static isValidIdentifier(e){return oE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}class Dc{constructor(e){this.fields=e,e.sort(hr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hn(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const aE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function il(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=aE.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ln(n.seconds),nanos:Ln(n.nanos)}}function Ln(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pi(n){return"string"==typeof n?hn.fromBase64String(n):hn.fromUint8Array(n)}function Hf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ky(n){const e=n.mapValue.fields.__previous_value__;return Hf(e)?Ky(e):e}function Tc(n){const e=il(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class PA{constructor(e,t,r,i,u,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class ya{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ya("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}function Ug(n){return null==n}function sl(n){return 0===n&&1/n==-1/0}function $f(n){return"number"==typeof n&&Number.isInteger(n)&&!sl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Ye.fromString(e))}static fromName(e){return new $e(Ye.fromString(e).popFirst(5))}static empty(){return new $e(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ye.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Ye(e.slice()))}}const _a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ch={nullValue:"NULL_VALUE"};function dh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hf(n)?4:bI(n)?9007199254740991:10:st()}function va(n,e){if(n===e)return!0;const t=dh(n);if(t!==dh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tc(n).isEqual(Tc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=il(r.timestampValue),c=il(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Pi(n.bytesValue).isEqual(Pi(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ln(r.geoPointValue.latitude)===Ln(i.geoPointValue.latitude)&&Ln(r.geoPointValue.longitude)===Ln(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ln(r.integerValue)===Ln(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Ln(r.doubleValue),c=Ln(i.doubleValue);return u===c?sl(u)===sl(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return lh(n.arrayValue.values||[],e.arrayValue.values||[],va);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Wy(u)!==Wy(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!va(u[f],c[f])))return!1;return!0}(n,e);default:return st()}var i}function Gf(n,e){return void 0!==(n.values||[]).find(t=>va(t,e))}function ol(n,e){if(n===e)return 0;const t=dh(n),r=dh(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Ln(i.integerValue||i.doubleValue),f=Ln(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return uE(n.timestampValue,e.timestampValue);case 4:return uE(Tc(n),Tc(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Pi(i),f=Pi(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let y=0;y<c.length&&y<f.length;y++){const b=Ft(c[y],f[y]);if(0!==b)return b}return Ft(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Ft(Ln(i.latitude),Ln(u.latitude));return 0!==c?c:Ft(Ln(i.longitude),Ln(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let y=0;y<c.length&&y<f.length;++y){const b=ol(c[y],f[y]);if(b)return b}return Ft(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===_a.mapValue&&u===_a.mapValue)return 0;if(i===_a.mapValue)return 1;if(u===_a.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),y=u.fields||{},b=Object.keys(y);f.sort(),b.sort();for(let S=0;S<f.length&&S<b.length;++S){const M=Ft(f[S],b[S]);if(0!==M)return M;const F=ol(c[f[S]],y[b[S]]);if(0!==F)return F}return Ft(f.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function uE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=il(n),r=il(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function Sc(n){return lE(n)}function lE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=il(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pi(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=lE(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${lE(r.fields[f])}`;return u+"}"}(n.mapValue):st();var e}function Ac(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cE(n){return!!n&&"integerValue"in n}function hh(n){return!!n&&"arrayValue"in n}function Zy(n){return!!n&&"nullValue"in n}function dE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fh(n){return!!n&&"mapValue"in n}function Bg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ic(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function NA(n){return"nullValue"in n?ch:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ac(ya.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function OA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ac(ya.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_a:st()}function CI(n,e){const t=ol(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function II(n,e){const t=ol(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ni{constructor(e){this.value=e}static empty(){return new Ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bg(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Bg(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());fh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ic(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Ni(Bg(this.value))}}function DI(n){const e=[];return Ic(n.fields,(t,r)=>{const i=new hr([t]);if(fh(r)){const u=DI(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Dc(e)}class Vn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Vn(e,0,St.min(),St.min(),Ni.empty(),0)}static newFoundDocument(e,t,r){return new Vn(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new Vn(e,2,t,St.min(),Ni.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,St.min(),Ni.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ea(n){return n.fields.find(e=>2===e.kind)}function cu(n){return n.fields.filter(e=>2!==e.kind)}Yy.UNKNOWN_ID=-1;class jg{constructor(e,t){this.fieldPath=e,this.kind=t}}class ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ph(0,As.min())}}function Hg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new As(i,$e.empty(),e)}function hE(n){return new As(n.readTime,n.key,-1)}class As{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new As(St.min(),$e.empty(),-1)}static max(){return new As(St.max(),$e.empty(),-1)}}function fE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class _n{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new _n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new _n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qf(this.root,e,this.comparator,!0)}}class qf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:ti.RED,this.left=null!=i?i:ti.EMPTY,this.right=null!=u?u:ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ti(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1,ti.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new _n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mc(n){return n.hasNext()?n.getNext():void 0}class TI{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.P=null}}function gE(n,e=null,t=[],r=[],i=null,u=null,c=null){return new TI(n,e,t,r,i,u,c)}function So(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Sc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ug(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sc(r)).join(",")),e.P=t}return e.P}function xc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!AI(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!va(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vE(n.startAt,e.startAt)&&vE(n.endAt,e.endAt)}function du(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function al(n,e){return n.filters.filter(t=>t instanceof Br&&t.field.isEqual(e))}function Rc(n,e,t){let r=ch,i=!0;for(const u of al(n,e)){let c=ch,f=!0;switch(u.op){case"<":case"<=":c=NA(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=ch}CI({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];CI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function mE(n,e,t){let r=_a,i=!0;for(const u of al(n,e)){let c=_a,f=!0;switch(u.op){case">=":case">":c=OA(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=_a}II({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];II({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Br extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new yE(e,t,r):"array-contains"===t?new $g(e,r):"in"===t?new SI(e,r):"not-in"===t?new _E(e,r):"array-contains-any"===t?new kA(e,r):new Br(e,t,r)}static V(e,t,r){return"in"===t?new Qy(e,r):new Jy(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ol(t,this.value)):null!==t&&dh(this.value)===dh(t)&&this.v(ol(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class yE extends Br{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class Qy extends Br{constructor(e,t){super(e,"in",t),this.keys=Xy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jy extends Br{constructor(e,t){super(e,"not-in",t),this.keys=Xy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class $g extends Br{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hh(t)&&Gf(t.arrayValue,this.value)}}class SI extends Br{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gf(this.value.arrayValue,t)}}class _E extends Br{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gf(this.value.arrayValue,t)}}class kA extends Br{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gf(this.value.arrayValue,r))}}class hu{constructor(e,t){this.position=e,this.inclusive=t}}class Pc{constructor(e,t="asc"){this.field=e,this.dir=t}}function AI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function e_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?$e.comparator($e.fromName(c.referenceValue),t.key):ol(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function vE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!va(n.position[t],e.position[t]))return!1;return!0}class fu{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=y,this.D=null,this.C=null}}function ss(n,e,t,r,i,u,c,f){return new fu(n,e,t,r,i,u,c,f)}function mh(n){return new fu(n)}function EE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function wE(n){for(const e of n.filters)if(e.S())return e.field;return null}function Gg(n){return null!==n.collectionGroup}function zf(n){const e=qe(n);if(null===e.D){e.D=[];const t=wE(e),r=EE(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Pc(t)),e.D.push(new Pc(hr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Pc(hr.keyField(),u))}}}return e.D}function Ws(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=gE(e.path,e.collectionGroup,zf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of zf(e))t.push(new Pc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new hu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hu(e.startAt.position,e.startAt.inclusive):null;e.C=gE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function qg(n,e,t){return new fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yh(n,e){return xc(Ws(n),Ws(e))&&n.limitType===e.limitType}function bE(n){return`${So(Ws(n))}|lt:${n.limitType}`}function t_(n){return`Query(target=${function gh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Sc(r.value)}`;var r}).join(", ")}]`),Ug(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Sc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Sc(t)).join(",")),`Target(${e})`}(Ws(n))}; limitType=${n.limitType})`}function n_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=e_(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,zf(t),r)||t.endAt&&!function(i,u,c){const f=e_(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,zf(t),r)));var t,r}function r_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function CE(n){return(e,t)=>{let r=!1;for(const i of zf(n)){const u=IE(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function IE(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),y=c.data.field(i);return null!==f&&null!==y?ol(f,y):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function DE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sl(e)?"-0":e}}function TE(n){return{integerValue:""+n}}function i_(n,e){return $f(e)?TE(e):DE(n,e)}class Wf{constructor(){this._=void 0}}function xI(n,e,t){return n instanceof _h?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Nc?RI(n,e):n instanceof ul?SE(n,e):function(r,i){const u=zg(r,i),c=AE(u)+AE(r.k);return cE(u)&&cE(r.k)?TE(c):DE(r.M,c)}(n,e)}function wa(n,e,t){return n instanceof Nc?RI(n,e):n instanceof ul?SE(n,e):t}function zg(n,e){return n instanceof vh?cE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class _h extends Wf{}class Nc extends Wf{constructor(e){super(),this.elements=e}}function RI(n,e){const t=Wg(e);for(const r of n.elements)t.some(i=>va(i,r))||t.push(r);return{arrayValue:{values:t}}}class ul extends Wf{constructor(e){super(),this.elements=e}}function SE(n,e){let t=Wg(e);for(const r of n.elements)t=t.filter(i=>!va(i,r));return{arrayValue:{values:t}}}class vh extends Wf{constructor(e,t){super(),this.M=e,this.k=t}}function AE(n){return Ln(n.integerValue||n.doubleValue)}function Wg(n){return hh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Kf{constructor(e,t){this.field=e,this.transform=t}}class Kg{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Eh{}function s_(n,e,t){n instanceof Jg?function(r,i,u){const c=r.value.clone(),f=a_(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Oc?function(r,i,u){if(!Zg(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=a_(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(o_(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yg(n,e,t){var i;n instanceof Jg?function(r,i,u){if(!Zg(r.precondition,i))return;const c=r.value.clone(),f=u_(r.fieldTransforms,u,i);c.setAll(f),i.convertToFoundDocument(Qg(i),c).setHasLocalMutations()}(n,e,t):n instanceof Oc?function(r,i,u){if(!Zg(r.precondition,i))return;const c=u_(r.fieldTransforms,u,i),f=i.data;f.setAll(o_(r)),f.setAll(c),i.convertToFoundDocument(Qg(i),f).setHasLocalMutations()}(n,e,t):Zg(n.precondition,i=e)&&i.convertToNoDocument(St.min())}function NI(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=zg(r.transform,i||null);null!=u&&(null==t&&(t=Ni.empty()),t.set(r.field,u))}return t||null}function ME(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lh(t,r,(i,u)=>function PI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Nc&&r instanceof Nc||t instanceof ul&&r instanceof ul?lh(t.elements,r.elements,va):t instanceof vh&&r instanceof vh?va(t.k,r.k):t instanceof _h&&r instanceof _h);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Qg(n){return n.isFoundDocument()?n.version:St.min()}class Jg extends Eh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Oc extends Eh{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function o_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function a_(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,wa(c,f,t[i]))}return r}function u_(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,xI(u,c,e))}return r}class wh extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Xg extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class pu{constructor(e){this.count=e}}var zn,Zt;function xE(n){switch(n){default:return st();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function OI(n){if(void 0===n)return qn("GRPC error has no .code"),de.UNKNOWN;switch(n){case zn.OK:return de.OK;case zn.CANCELLED:return de.CANCELLED;case zn.UNKNOWN:return de.UNKNOWN;case zn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case zn.INTERNAL:return de.INTERNAL;case zn.UNAVAILABLE:return de.UNAVAILABLE;case zn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case zn.NOT_FOUND:return de.NOT_FOUND;case zn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case zn.ABORTED:return de.ABORTED;case zn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case zn.DATA_LOSS:return de.DATA_LOSS;default:return st()}}(Zt=zn||(zn={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ic(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return sE(this.inner)}size(){return this.innerSize}}const RE=new _n($e.comparator);function os(){return RE}const Zf=new _n($e.comparator);function l_(...n){let e=Zf;for(const t of n)e=e.insert(t.key,t);return e}function kc(){return new ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const PE=new _n($e.comparator),NE=new vn($e.comparator);function on(...n){let e=NE;for(const t of n)e=e.add(t);return e}const kI=new vn(Ft);function bh(){return kI}class Yf{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Qf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Yf(St.min(),r,bh(),os(),on())}}class Qf{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Qf(hn.EMPTY_BYTE_STRING,t,on(),on(),on())}}class Jf{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Fc{constructor(e,t){this.targetId=e,this.$=t}}class c_{constructor(e,t,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class OE{constructor(){this.B=0,this.L=kE(),this.U=hn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=on(),t=on(),r=on();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new Qf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=kE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class FI{constructor(e){this.nt=e,this.st=new Map,this.it=os(),this.rt=Lc(),this.ot=new vn(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(du(u))if(0===r){const c=new $e(u.path);this.ct(t,c,Vn.newNoDocument(c,St.min()))}else Rt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const f=this.wt(c);if(f){if(u.current&&du(f.target)){const y=new $e(f.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Vn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=on();this.rt.forEach((u,c)=>{let f=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new Yf(e,t,this.ot,this.it,r);return this.it=os(),this.rt=Lc(),this.ot=new vn(Ft),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new OE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new vn(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new OE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new _n($e.comparator)}function kE(){return new _n($e.comparator)}const LI={asc:"ASCENDING",desc:"DESCENDING"},VI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class UI{constructor(e,t){this.databaseId=e,this.N=t}}function Oi(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function em(n,e){return n.N?e.toBase64():e.toUint8Array()}function FE(n,e){return Oi(n,e.toTimestamp())}function Cr(n){return Rt(!!n),St.fromTimestamp(function(e){const t=il(e);return new tr(t.seconds,t.nanos)}(n))}function tm(n,e){return(t=n,new Ye(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function d_(n){const e=Ye.fromString(n);return Rt(rm(e)),e}function Xf(n,e){return tm(n.databaseId,e.path)}function Ca(n,e){const t=d_(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(BI(t))}function h_(n,e){return tm(n.databaseId,e)}function LE(n){const e=d_(n);return 4===e.length?Ye.emptyPath():BI(e)}function Ch(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BI(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function f_(n,e,t){return{name:Xf(n,e),fields:t.value.mapValue.fields}}function VE(n,e,t){const r=Ca(n,e.name),i=Cr(e.updateTime),u=new Ni({mapValue:{fields:e.fields}}),c=Vn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function nm(n,e){let t;if(e instanceof Jg)t={update:f_(n,e.key,e.value)};else if(e instanceof wh)t={delete:Xf(n,e.key)};else if(e instanceof Oc)t={update:f_(n,e.key,e.data),updateMask:BE(e.fieldMask)};else{if(!(e instanceof Xg))return st();t={verify:Xf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof _h)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Nc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ul)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof vh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:FE(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function ep(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Yn.updateTime(Cr(i.updateTime)):void 0!==i.exists?Yn.exists(i.exists):Yn.none():Yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(Rt("REQUEST_TIME"===c.setToServerValue),f=new _h):"appendMissingElements"in c?f=new Nc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new ul(c.removeAllFromArray.values||[]):"increment"in c?f=new vh(u,c.increment):st();const y=hr.fromServerFormat(c.fieldPath);return new Kf(y,f)}(n,i)):[];var i;if(e.update){const i=Ca(n,e.update.name),u=new Ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Dc((e.updateMask.fieldPaths||[]).map(b=>hr.fromServerFormat(b)));return new Oc(i,u,c,t,r)}return new Jg(i,u,t,r)}if(e.delete){const i=Ca(n,e.delete);return new wh(i,t)}if(e.verify){const i=Ca(n,e.verify);return new Xg(i,t)}return st()}function p_(n,e){return{documents:[h_(n,e.path)]}}function g_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=h_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=h_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(S=>function(M){if("=="===M.op){if(dE(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NAN"}};if(Zy(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(dE(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NOT_NAN"}};if(Zy(M.value))return{unaryFilter:{field:Vc(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(M.field),op:UE(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:Vc((S=b).field),direction:LA(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Ug(b)?b:{value:b});var b,f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function $I(n){let e=LE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=GI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Pc(Uc((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(S){let M;return M="object"==typeof S?S.value:S,Ug(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new hu((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new hu(S.values||[],!S.before)}(t.endAt)),ss(e,i,c,u,f,"F",y,b)}function GI(n){return n?void 0!==n.unaryFilter?[VA(n)]:void 0!==n.fieldFilter?[qI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>GI(e)).reduce((e,t)=>e.concat(t)):st():[]}function LA(n){return LI[n]}function UE(n){return VI[n]}function Vc(n){return{fieldPath:n.canonicalString()}}function Uc(n){return hr.fromServerFormat(n.fieldPath)}function qI(n){return Br.create(Uc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function VA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Uc(n.unaryFilter.field);return Br.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uc(n.unaryFilter.field);return Br.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uc(n.unaryFilter.field);return Br.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uc(n.unaryFilter.field);return Br.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function BE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rm(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jE(e)),e=m_(n.get(t),e);return jE(e)}function m_(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function jE(n){return n+"\x01\x01"}function Ia(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ye.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:st()}u=c+2}return new Ye(r)}const HE=["userId","batchId"];function im(n,e){return[n,ki(e)]}function $E(n,e,t){return[n,ki(e),t]}const zI={},sm=["prefixPath","collectionGroup","readTime","documentId"],Ih=["prefixPath","collectionGroup","documentId"],WI=["collectionGroup","readTime","prefixPath","documentId"],tp=["canonicalId","targetId"],KI=["targetId","path"],ZI=["path","targetId"],y_=["collectionId","parent"],Da=["indexId","uid"],np=["uid","sequenceNumber"],vi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bc=["indexId","uid","orderedDocumentKey"],om=["userId","collectionPath","documentId"],Ks=["userId","collectionPath","largestBatchId"],__=["userId","collectionGroup","largestBatchId"],jc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Dh=[...jc,"documentOverlays"],Hc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Th=[...Hc,"indexConfiguration","indexState","indexEntries"],$c="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class gu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ur,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Sh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=am(r.target.error);this.At.reject(new Sh(e,i))}}static open(e,t,r,i){try{return new gu(t,e.transaction(i,r))}catch(u){throw new Sh(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qE(t)}}class Ei{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ei.Vt((0,yt.z$)())&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),cl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,yt.hl)())return!1;if(Ei.St())return!0;const e=(0,yt.z$)(),t=Ei.Vt(e),r=0<t&&t<10,i=Ei.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Sh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new xe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new xe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Sh(e,f))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const y=gu.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(S=>(y.bt(),S)).catch(S=>(y.abort(S),ce.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&f<3;if(ke("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class GE{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return cl(this.Ft.delete())}}class Sh extends xe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ll(n){return"IndexedDbTransactionError"===n.name}class qE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),cl(this.store.add(e))}get(e){return cl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),cl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),cl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ce((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=u=>{const c=am(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new ce((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new GE(f),b=t(f.primaryKey,f.value,y);if(b instanceof ce){const S=b.catch(M=>(y.done(),ce.reject(M)));r.push(S)}y.isDone?i():null===y.Lt?f.continue():f.continue(y.Lt)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cl(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=am(r.target.error);t(i)}})}let v_=!1;function am(n){const e=Ei.Vt((0,yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return v_||(v_=!0,setTimeout(()=>{throw r},0)),r}}return n}class E_ extends Gc{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ir(n,e){const t=qe(n);return Ei.xt(t.Ht,e)}class w_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&s_(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Yg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Yg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&lh(this.mutations,e.mutations,(t,r)=>ME(t,r))&&lh(this.baseMutations,e.baseMutations,(t,r)=>ME(t,r))}}class um{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=PE;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new um(e,t,r,i)}}class b_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dl{constructor(e,t,r,i,u=St.min(),c=St.min(),f=hn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new dl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new dl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new dl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class C_{constructor(e){this.Jt=e}}function zE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Xf(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Oi(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qc(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:qc(e.version)}}var i,u;return r}function rp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hl(n){const e=new tr(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Ah(n,e){const t=(e.baseMutations||[]).map(u=>ep(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ep(n.Jt,u)),i=tr.fromMillis(e.localWriteTimeMs);return new w_(e.batchId,i,t,r)}function ip(n){const e=hl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hl(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=Ws(mh(LE(i.documents[0])))):r=Ws($I(n.query)),new dl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hn.fromBase64String(n.resumeToken))}function QI(n,e){const t=qc(e.snapshotVersion),r=qc(e.lastLimboFreeSnapshotVersion);let i;i=du(e.target)?p_(n.Jt,e.target):g_(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:So(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function I_(n){const e=$I({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qg(e,e.limit,"L"):e}function sp(n,e){return new b_(e.largestBatchId,ep(n.Jt,e.overlayMutation))}function lm(n,e){const t=e.path.lastSegment();return[n,ki(e.path.popLast()),t]}class JI{getBundleMetadata(e,t){return XI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:hl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return XI(e).put({bundleId:(r=t).id,createTime:qc(Cr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return eD(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:I_(i.bundledQuery),readTime:hl(i.readTime)};var i})}saveNamedQuery(e,t){return eD(e).put({name:(r=t).name,readTime:qc(Cr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XI(n){return Ir(n,"bundles")}function eD(n){return Ir(n,"namedQueries")}class WE{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new WE(e,t.uid||"")}getOverlay(e,t){return op(e).get(lm(this.userId,t)).next(r=>r?sp(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new b_(t,c);i.push(this.Xt(e,f))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ki(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(op(e).Qt("collectionPathOverlayIndex",f))}),ce.waitFor(u)}getOverlaysForCollection(e,t,r){const i=kc(),u=ki(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return op(e).qt("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const b=sp(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=kc();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return op(e).Wt({index:"collectionGroupOverlayIndex",range:f},(y,b,S)=>{const M=sp(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return op(e).put(function(r,i,u){const[c,f,y]=lm(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:nm(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function op(n){return Ir(n,"documentOverlays")}class fl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ln(e.integerValue));else if("doubleValue"in e){const r=Ln(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),sl(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Pi(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?bI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function UA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function KE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=UA(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}fl.fe=new fl;class Mh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=KE(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=KE(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class tD{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class ZE{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ap{constructor(){this.De=new Mh,this.Ce=new tD(this.De),this.xe=new ZE(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class pl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pl(this.indexId,this.documentKey,this.arrayValue,r)}}function Ta(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=YE(n.arrayValue,e.arrayValue),0!==t?t:(t=YE(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function YE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class QE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Ea(e);if(void 0!==t&&!this.Be(t))return!1;const r=cu(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class nD{constructor(){this.qe=new D_}addToCollectionParentIndex(e,t){return this.qe.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(As.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class D_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Ye.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Ye.comparator)).toArray()}}const cm=new Uint8Array(0);class rD{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new D_,this.Ge=new ba(r=>So(r),(r,i)=>xc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ki(i)};return JE(e).put(u)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iE(t),""],!1,!0);return JE(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ia(c.parent))}return r})}addFieldIndex(e,t){const r=dm(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=dm(e),i=up(e),u=xh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xh(e);let i=!0;const u=new Map;return ce.forEach(this.Qe(t),c=>this.je(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=on();const f=[];return ce.forEach(u,(y,b)=>{var S;ke("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${So(t)}`);const M=function(rt,ze){const At=Ea(ze);if(void 0===At)return null;for(const Pt of al(rt,At.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(b,y),F=function(rt,ze){const At=new Map;for(const Pt of cu(ze))for(const Jt of al(rt,Pt.fieldPath))switch(Jt.op){case"==":case"in":At.set(Pt.fieldPath.canonicalString(),Jt.value);break;case"not-in":case"!=":return At.set(Pt.fieldPath.canonicalString(),Jt.value),Array.from(At.values())}return null}(b,y),V=function(rt,ze){const At=[];let Pt=!0;for(const Jt of cu(ze)){const Sr=0===Jt.kind?Rc(rt,Jt.fieldPath,rt.startAt):mE(rt,Jt.fieldPath,rt.startAt);At.push(Sr.value),Pt&&(Pt=Sr.inclusive)}return new hu(At,Pt)}(b,y),B=function(rt,ze){const At=[];let Pt=!0;for(const Jt of cu(ze)){const Sr=0===Jt.kind?mE(rt,Jt.fieldPath,rt.endAt):Rc(rt,Jt.fieldPath,rt.endAt);At.push(Sr.value),Pt&&(Pt=Sr.inclusive)}return new hu(At,Pt)}(b,y),se=this.We(y,b,V),De=this.We(y,b,B),Ge=this.ze(y,b,F),it=this.He(y.indexId,M,se,V.inclusive,De,B.inclusive,Ge);return ce.forEach(it,rt=>r.Gt(rt,t.limit).next(ze=>{ze.forEach(At=>{const Pt=$e.fromSegments(At.documentKey);c.has(Pt)||(c=c.add(Pt),f.push(Pt))})}))}).next(()=>f)}return ce.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,f){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),b=y/(null!=t?t.length:1),S=[];for(let M=0;M<y;++M){const F=t?this.Je(t[M/b]):cm,V=this.Ye(e,F,r[M%b],i),B=this.Xe(e,F,u[M%b],c),se=f.map(De=>this.Ye(e,F,De,!0));S.push(...this.createRange(V,B,se))}return S}Ye(e,t,r,i){const u=new pl(e,$e.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new pl(e,$e.empty(),t,r);return i?u.ke():u}je(e,t){const r=new QE(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.$e(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return ce.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let f=new vn(hr.comparator),y=!1;for(const b of c.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:f=f.add(S.field))}for(const b of c.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new ap;for(const i of cu(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);fl.fe.Zt(u,c)}return r.Se()}Je(e){const t=new ap;return fl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new ap;return fl.fe.Zt(Ac(this.databaseId,t),r.Ne(function(i){const u=cu(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new ap);let u=0;for(const c of cu(e)){const f=r[u++];for(const y of i)if(this.en(t,c.fieldPath)&&hh(f))i=this.nn(i,c,f);else{const b=y.Ne(c.kind);fl.fe.Zt(f,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new ap;y.seed(f.Se()),fl.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Br&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dm(e),i=up(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ce.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(b,S){const M=S?new ph(S.sequenceNumber,new As(hl(S.readTime),new $e(Ia(S.documentKey)),S.largestBatchId)):ph.empty(),F=b.fields.map(([V,B])=>new jg(hr.fromServerFormat(V),B));return new Yy(b.indexId,b.collectionGroup,F,M)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=dm(e),u=up(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ce.forEach(f,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:qc((F=r).readTime),documentKey:ki(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ce.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ce.forEach(f,y=>this.on(e,i,y).next(b=>{const S=this.un(u,y);return b.isEqual(S)?ce.resolve():this.an(e,u,y,b,S)}))))})}cn(e,t,r,i){return xh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return xh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=xh(e);let u=new vn(Ta);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,f)=>{u=u.add(new pl(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}un(e,t){let r=new vn(Ta);const i=this.Ze(t,e);if(null==i)return r;const u=Ea(t);if(null!=u){const c=e.data.field(u.fieldPath);if(hh(c))for(const f of c.arrayValue.values||[])r=r.add(new pl(t.indexId,e.key,this.Je(f),i))}else r=r.add(new pl(t.indexId,e.key,cm,i));return r}an(e,t,r,i,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,b,S,M){const F=f.getIterator(),V=y.getIterator();let B=Mc(F),se=Mc(V);for(;B||se;){let De=!1,Ge=!1;if(B&&se){const it=b(B,se);it<0?Ge=!0:it>0&&(De=!0)}else null!=B?Ge=!0:De=!0;De?(S(se),se=Mc(V)):Ge?(M(B),B=Mc(F)):(B=Mc(F),se=Mc(V))}}(i,u,Ta,f=>{c.push(this.cn(e,t,r,f))},f=>{c.push(this.hn(e,t,r,f))}),ce.waitFor(c)}rn(e){let t=1;return up(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Ta(c,f)).filter((c,f,y)=>!f||0!==Ta(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=Ta(c,e),y=Ta(c,t);if(0===f)i[0]=e.ke();else if(f>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,cm,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,cm,[]]));return u}getMinOffset(e,t){let r;return ce.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||fE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=As.min()})).next(()=>r)}}function JE(n){return Ir(n,"collectionParents")}function xh(n){return Ir(n,"indexEntries")}function dm(n){return Ir(n,"indexConfiguration")}function up(n){return Ir(n,"indexState")}const T_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function iD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.Wt({range:c},(S,M,F)=>(f++,F.delete()));u.push(y.next(()=>{Rt(1===f)}));const b=[];for(const S of t.mutations){const M=$E(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return ce.waitFor(u).next(()=>b)}function Rh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(41943040,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);class S_{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new S_(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zs(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=zc(e),c=Zs(e);return c.add({}).next(f=>{Rt("number"==typeof f);const y=new w_(f,t,r,i),b=function(F,V,B){const se=B.baseMutations.map(Ge=>nm(F.Jt,Ge)),De=B.mutations.map(Ge=>nm(F.Jt,Ge));return{userId:V,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:se,mutations:De}}(this.M,this.userId,y),S=[];let M=new vn((F,V)=>Ft(F.canonicalString(),V.canonicalString()));for(const F of i){const V=$E(this.userId,F.key.path,f);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(V,zI))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[f]=y.keys()}),ce.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return Zs(e).get(t).next(r=>r?(Rt(r.userId===this.userId),Ah(this.M,r)):null)}fn(e,t){return this.ln[t]?ce.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Zs(e).Wt({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(Rt(f.batchId>=r),u=Ah(this.M,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zs(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zs(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Ah(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=im(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return zc(e).Wt({range:i},(c,f,y)=>{const[b,S,M]=c,F=Ia(S);if(b===this.userId&&t.path.isEqual(F))return Zs(e).get(M).next(V=>{if(!V)throw st();Rt(V.userId===this.userId),u.push(Ah(this.M,V))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Ft);const i=[];return t.forEach(u=>{const c=im(this.userId,u.path),f=IDBKeyRange.lowerBound(c),y=zc(e).Wt({range:f},(b,S,M)=>{const[F,V,B]=b,se=Ia(V);F===this.userId&&u.path.isEqual(se)?r=r.add(B):M.done()});i.push(y)}),ce.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=im(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new vn(Ft);return zc(e).Wt({range:c},(y,b,S)=>{const[M,F,V]=y,B=Ia(F);M===this.userId&&r.isPrefixOf(B)?B.length===i&&(f=f.add(V)):S.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Zs(e).get(u).next(c=>{if(null===c)throw st();Rt(c.userId===this.userId),r.push(Ah(this.M,c))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return iD(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zc(e).Wt({range:r},(u,c,f)=>{if(u[0]===this.userId){const y=Ia(u[1]);i.push(y)}else f.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return sD(e,this.userId,t)}wn(e){return hm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sD(n,e,t){const r=im(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return zc(n).Wt({range:u,jt:!0},(f,y,b)=>{const[S,M,F]=f;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function Zs(n){return Ir(n,"mutations")}function zc(n){return Ir(n,"documentMutations")}function hm(n){return Ir(n,"mutationQueues")}class mu{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new mu(0)}static yn(){return new mu(-1)}}class oD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new mu(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>St.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yu(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return yu(e).Wt((c,f)=>{const y=ip(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>ce.waitFor(u)).next(()=>i)}forEachTarget(e,t){return yu(e).Wt((r,i)=>{const u=ip(i);t(u)})}pn(e){return lp(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}In(e,t){return lp(e).put("targetGlobalKey",t)}Tn(e,t){return yu(e).put(QI(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=So(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return yu(e).Wt({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const b=ip(f);xc(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Sa(e);return t.forEach(c=>{const f=ki(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sa(e);return ce.forEach(t,u=>{const c=ki(u.path);return ce.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Sa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sa(e);let u=on();return i.Wt({range:r,jt:!0},(c,f,y)=>{const b=Ia(c[1]),S=new $e(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=ki(t.path),i=IDBKeyRange.bound([r],[iE(r)],!1,!0);let u=0;return Sa(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,f],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return yu(e).get(t).next(r=>r?ip(r):null)}}function yu(n){return Ir(n,"targets")}function lp(n){return Ir(n,"targetGlobal")}function Sa(n){return Ir(n,"targetDocuments")}function Ph(n){return A_.apply(this,arguments)}function A_(){return A_=(0,me.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==$c)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),A_.apply(this,arguments)}function fm([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class M_{constructor(e){this.An=e,this.buffer=new vn(fm),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XE{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){ll(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ph(i)}yield t.Sn(e)}))}}class ew{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Ss.A);const r=new M_(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(T_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T_):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,f,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Fg()<=ci.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class x_{constructor(e,t){this.db=e,this.garbageCollector=new ew(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return cp(e,r)}removeReference(e,t,r){return cp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cp(e,t)}On(e,t){return function(r,i){let u=!1;return hm(r).zt(c=>sD(r,c,i).next(f=>(f&&(u=!0),ce.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,f)=>{if(f<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,St.min()),Sa(e).delete([0,ki(c.path)])))});i.push(y)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cp(e,t)}Mn(e,t){const r=Sa(e);let i,u=Ss.A;return r.Wt({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:b})=>{0===c?(u!==Ss.A&&t(new $e(Ia(i)),u),u=b,i=y):u=Ss.A}).next(()=>{u!==Ss.A&&t(new $e(Ia(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cp(n,e){return Sa(n).put((r=n.currentSequenceNumber,{targetId:0,path:ki(e.path),sequenceNumber:r}));var r}class R_{constructor(){this.changes=new ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class P_{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gl(e).put(r)}removeEntry(e,t,r){return gl(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],rp(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Vn.newInvalidDocument(t);return gl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Vn.newInvalidDocument(t)};return gl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(t))},(i,u)=>{r={document:this.$n(t,u),size:Rh(u)}}).next(()=>r)}getEntries(e,t){let r=os();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=os(),i=new _n($e.comparator);return this.Ln(e,t,(u,c)=>{const f=this.$n(u,c);r=r.insert(u,f),i=i.insert(u,Rh(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return ce.resolve();let i=new vn(N_);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Nh(i.first()),Nh(i.last())),c=i.getIterator();let f=c.getNext();return gl(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const M=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&N_(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?S.Ut(Nh(f)):S.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),rp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gl(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=os();for(const y of c){const b=this.$n($e.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=os();const c=pm(t,r),f=pm(t,As.max());return gl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,b,S)=>{const M=this.$n($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new tw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return nw(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Fn(e,t){return nw(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function YI(n,e){let t;if(e.document)t=VE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=hl(e.noDocument.readTime);t=Vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=$e.fromSegments(e.unknownDocument.path),i=hl(e.unknownDocument.version);t=Vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new tr(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return Vn.newInvalidDocument(e)}}class tw extends R_{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new ba(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((u,c)=>Ft(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const y=zE(this.Kn.M,c);i=i.add(u.path.popLast()),r+=Rh(y)-f.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=zE(this.Kn.M,c.convertToNoDocument(St.min()));t.push(this.Kn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function nw(n){return Ir(n,"remoteDocumentGlobal")}function gl(n){return Ir(n,"remoteDocumentsV14")}function Nh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pm(n,e){const t=e.documentKey.path.toArray();return[n,rp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function N_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Ft(t[u],r[u]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class aD{constructor(e){this.M=e}kt(e,t,r,i){const u=new gu("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HE,{unique:!0}),f.createObjectStore("documentMutations"),rw(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),rw(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HE,{unique:!0});const S=y.store("mutations"),M=b.map(F=>S.put(F));return ce.waitFor(M)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:om});y.createIndex("collectionPathOverlayIndex",Ks,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",__,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:sm});y.createIndex("documentKeyIndex",Ih),y.createIndex("collectionGroupIndex",WI)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Da}).createIndex("sequenceNumberIndex",np,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:vi}).createIndex("documentKeyIndex",Bc,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Rh(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ce.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(f=>ce.forEach(f,y=>{Rt(y.userId===u.userId);const b=Ah(this.M,y);return iD(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,f)=>{const y=new Ye(c),b=[0,ki(y)];u.push(t.get(b).next(S=>S?ce.resolve():t.put({targetId:0,path:ki(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:y_});const r=t.store("collectionParents"),i=new D_,u=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:ki(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,f)=>{const y=new Ye(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,f,y],b)=>{const S=Ia(f);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=ip(i),c=QI(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const f=t.store("remoteDocumentsV14"),y=(b=c,b.document?new $e(Ye.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(S))}).next(()=>ce.waitFor(i))}}function rw(n){n.createObjectStore("targetDocuments",{keyPath:KI}).createIndex("documentTargetsIndex",ZI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tp,{unique:!0}),n.createObjectStore("targetGlobal")}const O_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dp{constructor(e,t,r,i,u,c,f,y,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=f,this.Xn=b,this.Zn=S,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!dp.vt())throw new xe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x_(this,i),this.hs=t+"main",this.M=new C_(y),this.ls=new Ei(this.hs,this.ts,new aD(this.M)),this.fs=new oD(this.referenceDelegate,this.M),this.ds=new P_(this.M),this._s=new JI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,O_);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ss(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(ll(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Wc(e).get("owner").next(t=>ce.resolve(this.Ps(t)))}Vs(e){return hp(e).delete(this.clientId)}vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ir(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),f=u.filter(y=>-1===c.indexOf(y));return ce.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ce.resolve(!0):Wc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,O_);return!1}}return!(!this.networkEnabled||!this.inForeground)||hp(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new E_(t,Ss.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>hp(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return S_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new rD(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return WE.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?Th:13===c?Hc:12===c?Dh:11===c?jc:void st();var c;let f;return this.ls.runTransaction(e,i,u,y=>(f=new E_(y,this.es?this.es.next():Ss.A),"readwrite-primary"===t?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(de.FAILED_PRECONDITION,$c);return r(f)}).next(b=>this.bs(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}$s(e){return Wc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(de.FAILED_PRECONDITION,O_)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wc(e).put("owner",t)}static vt(){return Ei.vt()}Rs(e){const t=Wc(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,yt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){qn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wc(n){return Ir(n,"owner")}function hp(n){return Ir(n,"clientMetadata")}function gm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class iw{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):Gg(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let i=l_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=l_();return this.indexManager.getCollectionParents(e,i).next(c=>ce.forEach(c,f=>{const y=(b=t,S=f.child(i),new fu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,y,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const f of c.mutations){const y=f.key;let b=i.get(y);null==b&&(b=Vn.newInvalidDocument(y),i=i.insert(y,b)),Yg(f,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{n_(t,c)||(i=i.remove(u))}),i))}}class mm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=on(),i=on();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new mm(e,t.fromCache,r,i)}}class k_{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return ce.resolve(null)}ei(e,t,r,i){return function MI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(St.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(Fg()<=ci.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),t_(t)),this.ri(e,c,t,Hg(i,-1)))})}si(e,t){let r=new vn(CE(e));return t.forEach((i,u)=>{n_(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return Fg()<=ci.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",t_(t)),this.Zs.Qs(e,t,As.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class sw{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new _n(Ft),this.ai=new ba(u=>So(u),xc),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new iw(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function F_(n,e,t,r){return new sw(n,e,t,r)}function L_(n,e){return ow.apply(this,arguments)}function ow(){return ow=(0,me.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let y=on();for(const b of i){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){f.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.fi.Ks(r,y).next(b=>({di:b,removedBatchIds:c,addedBatchIds:f}))})})}),ow.apply(this,arguments)}function uD(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,f,y,b){const S=y.batch,M=S.keys();let F=ce.resolve();return M.forEach(V=>{F=F.next(()=>b.getEntry(f,V)).next(B=>{const se=y.docVersions.get(V);Rt(null!==se),B.version.compareTo(se)<0&&(S.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),b.addEntry(B)))})}),F.next(()=>c.Bs.removeMutationBatch(f,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function aw(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function uw(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const f=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;f.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var V,B,se;e.targetMismatches.has(S)?F=F.withResumeToken(hn.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),B=F,se=b,(0===(V=M).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(u,F))});let y=os();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),f.push(lw(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(St.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(b)}return ce.waitFor(f).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,y)).next(()=>y)}).then(u=>(t.ui=i,u))}function lw(n,e,t){let r=on();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=os();return t.forEach((c,f)=>{const y=i.get(c);f.isNoDocument()&&f.version.isEqual(St.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",f.version)}),u})}function Dr(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Kc(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,ce.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new dl(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Oh(n,e,t){return V_.apply(this,arguments)}function V_(){return V_=(0,me.Z)(function*(n,e,t){const r=qe(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ll(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),V_.apply(this,arguments)}function fp(n,e,t){const r=qe(n);let i=St.min(),u=on();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,b){const S=qe(f),M=S.ai.get(b);return void 0!==M?ce.resolve(S.ui.get(M)):S.fs.getTargetData(y,b)}(r,c,Ws(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{u=y})}).next(()=>r.oi.Qs(c,e,t?i:St.min(),t?u:on())).next(f=>(B_(r,r_(e),f),{documents:f,_i:u})))}function cw(n,e){const t=qe(n),r=qe(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function U_(n,e){const t=qe(n),r=t.ci.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,Hg(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(B_(t,e,i),i))}function B_(n,e,t){let r=St.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function j_(){return j_=(0,me.Z)(function*(n,e,t,r){const i=qe(n);let u=on(),c=os();for(const b of t){const S=e.wi(b.metadata.name);b.document&&(u=u.add(S));const M=e.mi(b);M.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(S,M)}const f=i.hi.newChangeBuffer({trackRemovals:!0}),y=yield Kc(i,(b=r,Ws(mh(Ye.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>lw(b,f,c).next(S=>(f.apply(b),S)).next(S=>i.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.fs.addMatchingKeys(b,u,y.targetId)).next(()=>i.fi.Gs(b,S)).next(()=>S)))}),j_.apply(this,arguments)}function lD(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,me.Z)(function*(n,e,t=on()){const r=yield Kc(n,Ws(I_(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Cr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const f=r.withResumeToken(hn.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(f.targetId,f),i.fs.updateTargetData(u,f).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),ym.apply(this,arguments)}class cD{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ce.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Cr(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:I_(r.bundledQuery),readTime:Cr(r.readTime)}),ce.resolve();var r}}class dw{constructor(){this.overlays=new _n($e.comparator),this.Ii=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=kc(),u=t.length+1,c=new $e(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new _n((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=kc(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const f=kc(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>f.set(b,S)),!(f.size()>=i)););return ce.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new b_(t,r));let u=this.Ii.get(t);void 0===u&&(u=on(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class hw{constructor(){this.Ti=new vn(Tr.Ei),this.Ai=new vn(Tr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Tr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Tr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new Ye([])),r=new Tr(t,e),i=new Tr(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new Ye([])),r=new Tr(t,e),i=new Tr(t,e+1);let u=on();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Tr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Tr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||Ft(e.Ci,t.Ci)}static Ri(e,t){return Ft(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class H_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new vn(Tr.Ei)}checkEmpty(e){return ce.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new w_(u,t,r,i);this.Bs.push(c);for(const f of i)this.Ni=this.Ni.add(new Tr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return ce.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ce.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Tr(t,0),i=new Tr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const f=this.ki(c.Ci);u.push(f)}),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Ft);return t.forEach(i=>{const u=new Tr(i,0),c=new Tr(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],f=>{r=r.add(f.Ci)})}),ce.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const c=new Tr(new $e(u),0);let f=new vn(Ft);return this.Ni.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(y.Ci)),!0)},c),ce.resolve(this.Oi(f))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ce.forEach(t.mutations,i=>{const u=new Tr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Tr(t,0),i=this.Ni.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Aa{constructor(e){this.$i=e,this.docs=new _n($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let r=os();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Vn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=os();const u=new $e(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:y}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||fE(hE(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Bi(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dD(this)}getSize(e){return ce.resolve(this.size)}}class dD extends R_{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class hD{constructor(e){this.persistence=e,this.Li=new ba(t=>So(t),xc),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ui=0,this.qi=new hw,this.targetCount=0,this.Ki=mu.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),ce.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new mu(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Tn(t),ce.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ce.waitFor(u).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ce.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.qi.containsKey(t))}}class Ma{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ss(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new hD(this),this.indexManager=new nD,this.ds=new Aa(r=>this.referenceDelegate.Qi(r)),this.M=new C_(t),this._s=new cD(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new H_(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new Mo(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return ce.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class Mo extends Gc{constructor(e){super(),this.currentSequenceNumber=e}}class Ms{constructor(e){this.persistence=e,this.Hi=new hw,this.Ji=null}static Yi(e){return new Ms(e)}get Xi(){if(this.Ji)return this.Ji;throw st()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xi,r=>{const i=$e.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,St.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ce.or([()=>ce.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function $_(n,e){return`firestore_clients_${n}_${e}`}function G_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function q_(n,e){return`firestore_targets_${n}_${e}`}class _m{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new xe(i.error.code,i.error.message))),c?new _m(e,t,i.state,u):(qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new xe(r.error.code,r.error.message))),u?new pp(e,r.state,i):(qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=bh();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=$f(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new vm(e,u):(qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gp{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gp(t.clientId,t.onlineState):(qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zc{constructor(){this.activeTargetIds=bh()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z_{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new _n(Ft),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=$_(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Zc),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem($_(e.persistenceKey,i));if(u){const c=vm.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(q_(this.persistenceKey,e));if(r){const i=pp.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(q_(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Ss.A;if(null!=u)try{const f=JSON.parse(u);Rt("number"==typeof f),c=f}catch(f){qn("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Ss.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new _m(this.currentUser,e,t,r),u=G_(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=G_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=q_(this.persistenceKey,e),u=new pp(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return vm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return _m.tr(new ei(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return pp.tr(i,t)}pr(e){return gp.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],f=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Lr(c,f).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=bh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class W_{constructor(){this.Ur=new Zc,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Zc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fD{Kr(e){}shutdown(){}}class K_{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Em{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class pD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);ke("RestConnection","Sending: ",c,r);const f={};return this.lo(f,i,u),this.fo(e,c,f,r).then(y=>(ke("RestConnection","Received: ",y),y),y=>{throw rl("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${fw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const f=new wI;f.listenOnce(K0.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case $y.NO_ERROR:const b=f.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case $y.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case $y.HTTP_ERROR:const S=f.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',S,"response text:",f.getResponseText()),S>0){const M=f.getResponseJson().error;if(M&&M.status&&M.message){const F=function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(B)>=0?B:de.UNKNOWN}(M.status);c(new xe(F,M.message))}else c(new xe(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new xe(de.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Hy(),c=EI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Y0({})),this.lo(f.initMessageHeaders,t,r),(0,yt.uI)()||(0,yt.b$)()||(0,yt.d)()||(0,yt.w1)()||(0,yt.Mn)()||(0,yt.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");ke("Connection","Creating WebChannel: "+y,f);const b=u.createWebChannel(y,f);let S=!1,M=!1;const F=new Em({Jr:B=>{M?ke("Connection","Not sending because WebChannel is closed:",B):(S||(ke("Connection","Opening WebChannel transport."),b.open(),S=!0),ke("Connection","WebChannel sending:",B),b.send(B))},Yr:()=>b.close()}),V=(B,se,De)=>{B.listen(se,Ge=>{try{De(Ge)}catch(it){setTimeout(()=>{throw it},0)}})};return V(b,Uf.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),V(b,Uf.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),F.ro())}),V(b,Uf.EventType.ERROR,B=>{M||(M=!0,rl("Connection","WebChannel transport errored:",B),F.ro(new xe(de.UNAVAILABLE,"The operation could not be completed")))}),V(b,Uf.EventType.MESSAGE,B=>{var se;if(!M){const De=B.data[0];Rt(!!De);const Ge=De,it=Ge.error||(null===(se=Ge[0])||void 0===se?void 0:se.error);if(it){ke("Connection","WebChannel received error:",it);const rt=it.status;let ze=function(Pt){const Jt=zn[Pt];if(void 0!==Jt)return OI(Jt)}(rt),At=it.message;void 0===ze&&(ze=de.INTERNAL,At="Unknown error status: "+rt+" with message "+it.message),M=!0,F.ro(new xe(ze,At)),b.close()}else ke("Connection","WebChannel received:",De),F.oo(De)}}),V(c,Z0.STAT_EVENT,B=>{B.stat===nl.PROXY?ke("Connection","Detected buffering proxy"):B.stat===nl.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.io()},0),F}}function Z_(){return"undefined"!=typeof window?window:null}function mp(){return"undefined"!=typeof document?document:null}function Yc(n){return new UI(n,!0)}class yp{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Y_{constructor(e,t,r,i,u,c,f,y){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new yp(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(qn(t.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new xe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pw extends Y_{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function FA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:st(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Rt(void 0===b||"string"==typeof b),hn.fromBase64String(b||"")):(Rt(void 0===b||b instanceof Uint8Array),hn.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const b=void 0===y.code?de.UNKNOWN:OI(y.code);return new xe(b,y.message||"")}(c);t=new c_(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ca(n,r.document.name),u=Cr(r.document.updateTime),c=new Ni({mapValue:{fields:r.document.fields}}),f=Vn.newFoundDocument(i,u,c);t=new Jf(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ca(n,r.document),u=r.readTime?Cr(r.readTime):St.min(),c=Vn.newNoDocument(i,u);t=new Jf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ca(n,r.document);t=new Jf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new pu(r.count||0);t=new Fc(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return St.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?Cr(u.readTime):St.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Ch(this.M),t.addTarget=function(i,u){let c;const f=u.target;return c=du(f)?{documents:p_(i,f)}:{query:g_(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=em(i,u.resumeToken):u.snapshotVersion.compareTo(St.min())>0&&(c.readTime=Oi(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function Ao(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Ch(this.M),t.removeTarget=e,this.Lo(t)}}class gw extends Y_{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function HI(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let u=Cr(r.updateTime?r.updateTime:i);return u.isEqual(St.min())&&(u=Cr(i)),new Kg(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.tu(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ch(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nm(this.M,r))};this.Lo(t)}}class mw extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(de.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(de.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class yw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(qn(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class _w{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(f=>{r.enqueueAndForget((0,me.Z)(function*(){var y;ml(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,me.Z)(function*(b){const S=qe(b);S.wu.add(4),yield Lh(S),S.yu.set("Unknown"),S.wu.delete(4),yield Fh(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this.yu=new yw(r,i)}}function Fh(n){return wm.apply(this,arguments)}function wm(){return wm=(0,me.Z)(function*(n){if(ml(n))for(const e of n.mu)yield e(!0)}),wm.apply(this,arguments)}function Lh(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,me.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Q_.apply(this,arguments)}function bm(n,e){const t=qe(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),ev(t)?X_(t):Xc(t).Mo()&&J_(t,e))}function _p(n,e){const t=qe(n),r=Xc(t);t._u.delete(e),r.Mo()&&vw(t,e),0===t._u.size&&(r.Mo()?r.$o():ml(t)&&t.yu.set("Unknown"))}function J_(n,e){n.pu.Z(e.targetId),Xc(n).Ho(e)}function vw(n,e){n.pu.Z(e),Xc(n).Jo(e)}function X_(n){n.pu=new FI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Xc(n).start(),n.yu.au()}function ev(n){return ml(n)&&!Xc(n).ko()&&n._u.size>0}function ml(n){return 0===qe(n).wu.size}function Ew(n){n.pu=void 0}function gD(n){return tv.apply(this,arguments)}function tv(){return tv=(0,me.Z)(function*(n){n._u.forEach((e,t)=>{J_(n,e)})}),tv.apply(this,arguments)}function mD(n,e){return nv.apply(this,arguments)}function nv(){return nv=(0,me.Z)(function*(n,e){Ew(n),ev(n)?(n.yu.lu(e),X_(n)):n.yu.set("Unknown")}),nv.apply(this,arguments)}function yD(n,e,t){return rv.apply(this,arguments)}function rv(){return rv=(0,me.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof c_&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i._u.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i._u.delete(f),i.pu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cm(n,r)}else if(e instanceof Jf?n.pu.ut(e):e instanceof Fc?n.pu._t(e):n.pu.ht(e),!t.isEqual(St.min()))try{const r=yield aw(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const b=i._u.get(y);b&&i._u.set(y,b.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const y=i._u.get(f);if(!y)return;i._u.set(f,y.withResumeToken(hn.EMPTY_BYTE_STRING,y.snapshotVersion)),vw(i,f);const b=new dl(y.target,f,1,y.sequenceNumber);J_(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Cm(n,r)}var r}),rv.apply(this,arguments)}function Cm(n,e,t){return iv.apply(this,arguments)}function iv(){return iv=(0,me.Z)(function*(n,e,t){if(!ll(e))throw e;n.wu.add(1),yield Lh(n),n.yu.set("Offline"),t||(t=()=>aw(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Fh(n)}))}),iv.apply(this,arguments)}function sv(n,e){return e().catch(t=>Cm(n,t,e))}function Qc(n){return Im.apply(this,arguments)}function Im(){return Im=(0,me.Z)(function*(n){const e=qe(n),t=ed(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;ww(e);)try{const i=yield Dr(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,bw(e,i)}catch(i){yield Cm(e,i)}ov(e)&&av(e)}),Im.apply(this,arguments)}function ww(n){return ml(n)&&n.du.length<10}function bw(n,e){n.du.push(e);const t=ed(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function ov(n){return ml(n)&&!ed(n).ko()&&n.du.length>0}function av(n){ed(n).start()}function Cw(n){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,me.Z)(function*(n){ed(n).nu()}),Dm.apply(this,arguments)}function Iw(n){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,me.Z)(function*(n){const e=ed(n);for(const t of n.du)e.Zo(t.mutations)}),Tm.apply(this,arguments)}function Jc(n,e,t){return uv.apply(this,arguments)}function uv(){return uv=(0,me.Z)(function*(n,e,t){const r=n.du.shift(),i=um.from(r,e,t);yield sv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Qc(n)}),uv.apply(this,arguments)}function _D(n,e){return yl.apply(this,arguments)}function yl(){return yl=(0,me.Z)(function*(n,e){var t;e&&ed(n).Xo&&(yield(t=(0,me.Z)(function*(r,i){if(xE(u=i.code)&&u!==de.ABORTED){const c=r.du.shift();ed(r).Fo(),yield sv(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Qc(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),ov(n)&&av(n)}),yl.apply(this,arguments)}function vD(n,e){return vp.apply(this,arguments)}function vp(){return vp=(0,me.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=ml(t);t.wu.add(3),yield Lh(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Fh(t)}),vp.apply(this,arguments)}function Dw(n,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,me.Z)(function*(n,e){const t=qe(n);e?(t.wu.delete(2),yield Fh(t)):e||(t.wu.add(2),yield Lh(t),t.yu.set("Unknown"))}),Sm.apply(this,arguments)}function Xc(n){return n.Iu||(n.Iu=function(e,t,r){const i=qe(e);return i.iu(),new pw(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:gD.bind(null,n),eo:mD.bind(null,n),zo:yD.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Fo(),ev(n)?X_(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Ew(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function ed(n){return n.Tu||(n.Tu=function(e,t,r){const i=qe(e);return i.iu(),new gw(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Cw.bind(null,n),eo:_D.bind(null,n),eu:Iw.bind(null,n),tu:Jc.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),yield Qc(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class _t{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new _t(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vh(n,e){if(qn("AsyncQueue",`${e}: ${n}`),ll(n))return new xe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Uh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=l_(),this.sortedSet=new _n(this.comparator)}static emptySet(e){return new Uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Tw{constructor(){this.Eu=new _n($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):st():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class _u{constructor(e,t,r,i,u,c,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new _u(e,t,Uh.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ED{constructor(){this.Ru=void 0,this.listeners=[]}}class Am{constructor(){this.queries=new ba(e=>bE(e),yh),this.onlineState="Unknown",this.bu=new Set}}function Bh(n,e){return Un.apply(this,arguments)}function Un(){return Un=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new ED),i)try{u.Ru=yield t.onListen(r)}catch(c){const f=Vh(c,`Initialization of query '${t_(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&xm(t)}),Un.apply(this,arguments)}function Sw(n,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Mm.apply(this,arguments)}function wD(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Vu(i)&&(r=!0);c.Ru=i}}r&&xm(t)}function bD(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function xm(n){n.bu.forEach(e=>{e.next()})}class Rm{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _u(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=_u.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Aw{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class lv{constructor(e){this.M=e}wi(e){return Ca(this.M,e)}mi(e){return e.metadata.exists?VE(this.M,e.document,!1):Vn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Cr(e)}}class CD{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mw(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Ye.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new lv(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||on()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function kh(n,e,t,r){return j_.apply(this,arguments)}(e.localStore,new lv(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield lD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Mw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class xw{constructor(e){this.key=e}}class jh{constructor(e){this.key=e}}class Rw{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=on(),this.mutatedKeys=on(),this.Gu=CE(e),this.Qu=new Uh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Tw,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),V=n_(this.query,M)?M:null,B=!!F&&this.mutatedKeys.has(F.key),se=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let De=!1;F&&V?F.data.isEqual(V.data)?B!==se&&(r.track({type:3,doc:V}),De=!0):this.Hu(F,V)||(r.track({type:2,doc:V}),De=!0,(y&&this.Gu(V,y)>0||b&&this.Gu(V,b)<0)&&(f=!0)):!F&&V?(r.track({type:0,doc:V}),De=!0):F&&!V&&(r.track({type:1,doc:F}),De=!0,(y||b)&&(f=!0)),De&&(V?(c=c.add(V),u=se?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:c,zu:r,ii:f,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,S)=>function(M,F){const V=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return V(M)-V(F)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const c=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,y=f!==this.qu;return this.qu=f,0!==u.length||y?{snapshot:new _u(this.query,e.Qu,i,u,e.mutatedKeys,0===f,y,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tw,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=on(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new jh(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new xw(r))}),t}ta(e){this.Uu=e._i,this.Ku=on();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return _u.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class ID{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DD{constructor(e){this.key=e,this.na=!1}}class Pm{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new ba(f=>bE(f),yh),this.ra=new Map,this.oa=new Set,this.ua=new _n($e.comparator),this.aa=new Map,this.ca=new hw,this.ha={},this.la=new Map,this.fa=mu.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Pw(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,me.Z)(function*(n,e){const t=wv(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield Kc(t.localStore,Ws(e));t.isPrimaryClient&&bm(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Om(t,e,r,"current"===f)}return i}),Nm.apply(this,arguments)}function Om(n,e,t,r){return cv.apply(this,arguments)}function cv(){return cv=(0,me.Z)(function*(n,e,t,r){n._a=(S,M,F)=>{return(V=(0,me.Z)(function*(B,se,De,Ge){let it=se.view.Wu(De);it.ii&&(it=yield fp(B.localStore,se.query,!1).then(({documents:At})=>se.view.Wu(At,it)));const rt=Ge&&Ge.targetChanges.get(se.targetId),ze=se.view.applyChanges(it,B.isPrimaryClient,rt);return gv(B,se.targetId,ze.Xu),ze.snapshot}),function(B,se,De,Ge){return V.apply(this,arguments)})(n,S,M,F);var V};const i=yield fp(n.localStore,e,!0),u=new Rw(e,i._i),c=u.Wu(i.documents),f=Qf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,f);gv(n,t,y.Xu);const b=new ID(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot}),cv.apply(this,arguments)}function Ep(n,e){return td.apply(this,arguments)}function td(){return td=(0,me.Z)(function*(n,e){const t=qe(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!yh(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Oh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_p(t.remoteStore,r.targetId),vu(t,r.targetId)}).catch(Ph))):(vu(t,r.targetId),yield Oh(t.localStore,r.targetId,!0))}),td.apply(this,arguments)}function dv(){return dv=(0,me.Z)(function*(n,e,t){const r=bv(n);try{const i=yield function(u,c){const f=qe(u),y=tr.now(),b=c.reduce((M,F)=>M.add(F.key),on());let S;return f.persistence.runTransaction("Locally write mutations","readwrite",M=>f.fi.Ks(M,b).next(F=>{S=F;const V=[];for(const B of c){const se=NI(B,S.get(B.key));null!=se&&V.push(new Oc(B.key,se,DI(se.value.mapValue),Yn.exists(!0)))}return f.Bs.addMutationBatch(M,y,V,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let y=u.ha[u.currentUser.toKey()];y||(y=new _n(Ft)),y=y.insert(c,f),u.ha[u.currentUser.toKey()]=y}(r,i.batchId,t),yield Eu(r,i.changes),yield Qc(r.remoteStore)}catch(i){const u=Vh(i,"Failed to persist write");t.reject(u)}}),dv.apply(this,arguments)}function Nw(n,e){return km.apply(this,arguments)}function km(){return km=(0,me.Z)(function*(n,e){const t=qe(n);try{const r=yield uw(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Rt(c.na):i.removedDocuments.size>0&&(Rt(c.na),c.na=!1))}),yield Eu(t,r,e)}catch(r){yield Ph(r)}}),km.apply(this,arguments)}function hv(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const f=c.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=qe(u);f.onlineState=c;let y=!1;f.queries.forEach((b,S)=>{for(const M of S.listeners)M.Pu(c)&&(y=!0)}),y&&xm(f)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ow(n,e,t){return fv.apply(this,arguments)}function fv(){return fv=(0,me.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new _n($e.comparator);c=c.insert(u,Vn.newNoDocument(u,St.min()));const f=on().add(u),y=new Yf(St.min(),new Map,new vn(Ft),c,f);yield Nw(r,y),r.ua=r.ua.remove(u),r.aa.delete(e),nd(r)}else yield Oh(r.localStore,e,!1).then(()=>vu(r,e,t)).catch(Ph)}),fv.apply(this,arguments)}function kw(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,me.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield uD(t.localStore,e);Fm(t,r,null),Vw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Eu(t,i)}catch(i){yield Ph(i)}}),pv.apply(this,arguments)}function SD(n,e,t){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,me.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,c){const f=qe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return f.Bs.lookupMutationBatch(y,c).next(S=>(Rt(null!==S),b=S.keys(),f.Bs.removeMutationBatch(y,S))).next(()=>f.Bs.performConsistencyCheck(y)).next(()=>f.fi.Ks(y,b))})}(r.localStore,e);Fm(r,e,t),Vw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Eu(r,i)}catch(i){yield Ph(i)}}),Fw.apply(this,arguments)}function Lw(){return Lw=(0,me.Z)(function*(n,e){const t=qe(n);ml(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Vh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Lw.apply(this,arguments)}function Vw(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Fm(n,e,t){const r=qe(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function vu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Uw(n,r)})}function Uw(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(_p(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),nd(n))}function gv(n,e,t){for(const r of t)r instanceof xw?(n.ca.addReference(r.key,e),Bw(n,r)):r instanceof jh?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Uw(n,r.key)):st()}function Bw(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),nd(n))}function nd(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(Ye.fromString(e)),r=n.fa.next();n.aa.set(r,new DD(t)),n.ua=n.ua.insert(t,r),bm(n.remoteStore,new dl(Ws(mh(t.path)),r,2,Ss.A))}}function Eu(n,e,t){return mv.apply(this,arguments)}function mv(){return mv=(0,me.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],c=[];var f;r.ia.isEmpty()||(r.ia.forEach((f,y)=>{c.push(r._a(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=mm.Ys(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.sa.zo(i),yield(f=(0,me.Z)(function*(y,b){const S=qe(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ce.forEach(b,F=>ce.forEach(F.Hs,V=>S.persistence.referenceDelegate.addReference(M,F.targetId,V)).next(()=>ce.forEach(F.Js,V=>S.persistence.referenceDelegate.removeReference(M,F.targetId,V)))))}catch(M){if(!ll(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const V=S.ui.get(F),se=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);S.ui=S.ui.insert(F,se)}}}),function(y,b){return f.apply(this,arguments)})(r.localStore,u))}),mv.apply(this,arguments)}function AD(n,e){return yv.apply(this,arguments)}function yv(){return yv=(0,me.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield L_(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(f=>{f.reject(new xe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Eu(t,r.di)}var i}),yv.apply(this,arguments)}function MD(n,e){const t=qe(n),r=t.aa.get(e);if(r&&r.na)return on().add(r.key);{let i=on();const u=t.ra.get(e);if(!u)return i;for(const c of u){const f=t.ia.get(c);i=i.unionWith(f.view.ju)}return i}}function jw(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,me.Z)(function*(n,e){const t=qe(n),r=yield fp(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&gv(t,e.targetId,i.Xu),i}),_v.apply(this,arguments)}function xD(n,e){return _l.apply(this,arguments)}function _l(){return _l=(0,me.Z)(function*(n,e){const t=qe(n);return U_(t.localStore,e).then(r=>Eu(t,r))}),_l.apply(this,arguments)}function RD(n,e,t,r){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,me.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(c,f){const y=qe(c),b=qe(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,f).next(M=>M?y.fi.Ks(S,M):ce.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield Qc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Fm(i,e,r||null),Vw(i,e),f=e,qe(qe(i.localStore).Bs)._n(f)):st(),yield Eu(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Lm.apply(this,arguments)}function Vm(){return Vm=(0,me.Z)(function*(n,e){const t=qe(n);if(wv(t),bv(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Hw(t,r.toArray());t.da=!0,yield Dw(t.remoteStore,!0);for(const u of i)bm(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(vu(t,c),Oh(t.localStore,c,!0))),_p(t.remoteStore,c)}),yield i,yield Hw(t,r),function(u){const c=qe(u);c.aa.forEach((f,y)=>{_p(c.remoteStore,y)}),c.ca.Si(),c.aa=new Map,c.ua=new _n($e.comparator)}(t),t.da=!1,yield Dw(t.remoteStore,!1)}}),Vm.apply(this,arguments)}function Hw(n,e,t){return Um.apply(this,arguments)}function Um(){return Um=(0,me.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const c of e){let f;const y=r.ra.get(c);if(y&&0!==y.length){f=yield Kc(r.localStore,Ws(y[0]));for(const b of y){const S=r.ia.get(b),M=yield jw(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield cw(r.localStore,c);f=yield Kc(r.localStore,b),yield Om(r,$w(b),c,!1)}i.push(f)}return r.sa.zo(u),i}),Um.apply(this,arguments)}function $w(n){return ss(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function vv(n){const e=qe(n);return qe(qe(e.localStore).persistence).Fs()}function ND(n,e,t,r){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,me.Z)(function*(n,e,t,r){const i=qe(n);if(i.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield U_(i.localStore,r_(u[0])),f=Yf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Eu(i,c,f);break}case"rejected":yield Oh(i.localStore,e,!0),vu(i,e,r);break;default:st()}}),Bm.apply(this,arguments)}function Gw(n,e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,me.Z)(function*(n,e,t){const r=wv(n);if(r.da){for(const i of e){if(r.ra.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield cw(r.localStore,i),c=yield Kc(r.localStore,u);yield Om(r,$w(u),c.targetId,!1),bm(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield Oh(r.localStore,i,!1).then(()=>{_p(r.remoteStore,i),vu(r,i)}).catch(Ph))}}),Ev.apply(this,arguments)}function wv(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ow.bind(null,e),e.sa.zo=wD.bind(null,e.eventManager),e.sa.wa=bD.bind(null,e.eventManager),e}function bv(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SD.bind(null,e),e}class qw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=Yc(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return F_(this.persistence,new k_,e.initialUser,this.M)}ya(e){return new Ma(Ms.Yi,this.M)}ga(e){return new W_}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Iv extends qw{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield bv(r.Ta.syncEngine),yield Qc(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return F_(this.persistence,new k_,e.initialUser,this.M)}pa(e){return new XE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=gm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new dp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Z_(),mp(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new W_}}class OD extends Iv{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof z_&&(r.sharedClientState.syncEngine={$r:RD.bind(null,i),Br:ND.bind(null,i),Lr:Gw.bind(null,i),Fs:vv.bind(null,i),Fr:xD.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,me.Z)(function*(c){yield function PD(n,e){return Vm.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=Z_();if(!z_.vt(t))throw new xe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new z_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Dv{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>hv(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=AD.bind(null,r.syncEngine),yield Dw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Am}createDatastore(e){const t=Yc(e.databaseInfo.databaseId),r=new pD(e.databaseInfo);return new mw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>hv(this.syncEngine,f,0),c=K_.vt()?new K_:new fD,new _w(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,y,b){const S=new Pm(r,i,u,c,f,y);return b&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=qe(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Lh(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zw(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class kD{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,me.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new Aw(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,me.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class FD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const f=qe(u),y=Ch(f.M)+"/documents",b={documents:c.map(V=>Xf(f.M,V))},S=yield f._o("BatchGetDocuments",y,b),M=new Map;S.forEach(V=>{const B=function jI(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=Ca(t,r.found.name),u=Cr(r.found.updateTime),c=new Ni({mapValue:{fields:r.found.fields}});return Vn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=Ca(t,r.missing),u=Cr(r.readTime);return Vn.newNoDocument(i,u)}(n,e):st()}(f.M,V);M.set(B.key.toString(),B)});const F=[];return c.forEach(V=>{const B=M.get(V.toString());Rt(!!B),F.push(B)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=$e.fromPath(i);e.mutations.push(new Xg(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=qe(i),f=Ch(c.M)+"/documents",y={writes:u.map(b=>nm(c.M,b))};yield c.co("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Yn.updateTime(t):Yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new xe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class LD{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new yp(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,me.Z)(function*(){const t=new FD(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Ug(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!xE(t)}return!1}}class VD{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ei.UNAUTHENTICATED,this.clientId=rE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(f){ke("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Tv(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield L_(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Hm.apply(this,arguments)}function Ww(n,e){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield $m(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>vD(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>vD(e.remoteStore,u)),n.onlineComponents=e}),Sv.apply(this,arguments)}function $m(n){return Av.apply(this,arguments)}function Av(){return Av=(0,me.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield Tv(n,new qw)),n.offlineComponents}),Av.apply(this,arguments)}function Gm(n){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,me.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield Ww(n,new Dv)),n.onlineComponents}),Mv.apply(this,arguments)}function qm(n){return $m(n).then(e=>e.persistence)}function wp(n){return $m(n).then(e=>e.localStore)}function xv(n){return Gm(n).then(e=>e.remoteStore)}function bp(n){return Gm(n).then(e=>e.syncEngine)}function Hh(n){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,me.Z)(function*(n){const e=yield Gm(n),t=e.eventManager;return t.onListen=Pw.bind(null,e.syncEngine),t.onUnlisten=Ep.bind(null,e.syncEngine),t}),Rv.apply(this,arguments)}function Zw(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,f,y){const b=new jm({next:M=>{u.enqueueAndForget(()=>Sw(i,S));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&f&&"server"===f.source?y.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new Rm(mh(c.path),b,{includeMetadataChanges:!0,ku:!0});return Bh(i,S)}(yield Hh(n),n.asyncQueue,e,t,r)})),r.promise}function Qw(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,f,y){const b=new jm({next:M=>{u.enqueueAndForget(()=>Sw(i,S)),M.fromCache&&"server"===f.source?y.reject(new xe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new Rm(c,b,{includeMetadataChanges:!0,ku:!0});return Bh(i,S)}(yield Hh(n),n.asyncQueue,e,t,r)})),r.promise}const Xw=new Map;function vl(n,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $h(n,e,t,r){if(!0===e&&!0===r)throw new xe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eb(n){if(!$e.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jD(n){if($e.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cp(n);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tb(n,e){if(e<=0)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class nb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$h("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ip{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nb({}),this._settingsFrozen=!1,e instanceof ya?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(i.options.projectId)}(e))}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new J0;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new eE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xw.get(e);t&&(ke("ComponentProvider","Removing Datastore"),Xw.delete(e),t.terminate())}(this),Promise.resolve()}}class Tn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class jr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class xs extends jr{constructor(e,t,r){super(e,t,mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new $e(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function Gh(n,e,...t){if(n=(0,yt.m9)(n),vl("collection","path",e),n instanceof Ip){const r=Ye.fromString(e,...t);return jD(r),new xs(n,null,r)}{if(!(n instanceof Tn||n instanceof xs))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return jD(r),new xs(n.firestore,null,r)}}function Dp(n,e,...t){if(n=(0,yt.m9)(n),1===arguments.length&&(e=rE.R()),vl("doc","path",e),n instanceof Ip){const r=Ye.fromString(e,...t);return eb(r),new Tn(n,null,new $e(r))}{if(!(n instanceof Tn||n instanceof xs))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return eb(r),new Tn(n.firestore,n instanceof xs?n.converter:null,new $e(r))}}function Nv(n,e){return n=(0,yt.m9)(n),e=(0,yt.m9)(e),(n instanceof Tn||n instanceof xs)&&(e instanceof Tn||e instanceof xs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ib(n,e){return n=(0,yt.m9)(n),e=(0,yt.m9)(e),n instanceof jr&&e instanceof jr&&n.firestore===e.firestore&&yh(n._query,e._query)&&n.converter===e.converter}class $D{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new yp(this,"async_queue_retry"),this.Qa=()=>{const t=mp();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=mp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=mp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ur;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,me.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!ll(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,qn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=_t.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&st()}verifyOperationInProgress(){}Ja(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Tp(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class GD{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends Ip{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new $D,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||rd(this),this._firestoreClient.terminate()}}function nr(n){return n._firestoreClient||rd(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rd(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new PA(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new VD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ob(n,e,t){const r=new Ur;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield Tv(n,t),yield Ww(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===de.FAILED_PRECONDITION||u.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function cb(n){if(n._initialized||n._terminated)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(hn.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xa(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class id{constructor(e){this._methodName=e}}class Wm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const WD=/^__.*__$/;class KD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jg(e,this.data,t,this.fieldTransforms)}}class qh{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ov(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Ap{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Zm(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ov(this.ec)&&WD.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class db{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Yc(e)}lc(e,t,r,i=!1){return new Ap({ec:e,methodName:t,hc:r,path:hr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function El(n){const e=n._freezeSettings(),t=Yc(n._databaseId);return new db(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mp(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);Rp("Data must be an object, but it was:",c,r);const f=xo(r,c);let y,b;if(u.merge)y=new Dc(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=od(e,M,t);if(!c.contains(F))throw new xe(de.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);Pp(S,F)||S.push(F)}y=new Dc(S),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new KD(new Ni(f),y,b)}class xp extends id{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xp}}function hb(n,e,t){return new Ap({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class kv extends id{_toFieldTransform(e){return new Kf(e.path,new _h)}isEqual(e){return e instanceof kv}}class ZD extends id{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=hb(this,e,!0),r=this.fc.map(u=>bu(u,t)),i=new Nc(r);return new Kf(e.path,i)}isEqual(e){return this===e}}class YD extends id{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=hb(this,e,!0),r=this.fc.map(u=>bu(u,t)),i=new ul(r);return new Kf(e.path,i)}isEqual(e){return this===e}}class QD extends id{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new vh(e.M,i_(e.M,this.dc));return new Kf(e.path,t)}isEqual(e){return this===e}}function Fv(n,e,t,r){const i=n.lc(1,e,t);Rp("Data must be an object, but it was:",i,r);const u=[],c=Ni.empty();Ic(r,(y,b)=>{const S=Km(e,y,t);b=(0,yt.m9)(b);const M=i.oc(S);if(b instanceof xp)u.push(S);else{const F=bu(b,M);null!=F&&(u.push(S),c.set(S,F))}});const f=new Dc(u);return new qh(c,f,i.fieldTransforms)}function sd(n,e,t,r,i,u){const c=n.lc(1,e,t),f=[od(e,r,t)],y=[i];if(u.length%2!=0)throw new xe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)f.push(od(e,u[F])),y.push(u[F+1]);const b=[],S=Ni.empty();for(let F=f.length-1;F>=0;--F)if(!Pp(b,f[F])){const V=f[F];let B=y[F];B=(0,yt.m9)(B);const se=c.oc(V);if(B instanceof xp)b.push(V);else{const De=bu(B,se);null!=De&&(b.push(V),S.set(V,De))}}const M=new Dc(b);return new qh(S,M,c.fieldTransforms)}function fb(n,e,t,r=!1){return bu(t,n.lc(r?4:3,e))}function bu(n,e){if(pb(n=(0,yt.m9)(n)))return Rp("Unsupported field value:",e,n),xo(n,e);if(n instanceof id)return function(t,r){if(!Ov(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=bu(c,r.uc(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,yt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return i_(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tr.fromDate(t);return{timestampValue:Oi(r.M,i)}}if(t instanceof tr){const i=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Oi(r.M,i)}}if(t instanceof Wm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xa)return{bytesValue:em(r.M,t._byteString)};if(t instanceof Tn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${Cp(t)}`)}(n,e)}function xo(n,e){const t={};return sE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ic(n,(r,i)=>{const u=bu(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function pb(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof Wm||n instanceof xa||n instanceof Tn||n instanceof id)}function Rp(n,e,t){if(!pb(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Cp(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function od(n,e,t){if((e=(0,yt.m9)(e))instanceof wu)return e._internalPath;if("string"==typeof e)return Km(n,e);throw Zm("Field path arguments must be of type string or ",n,!1,void 0,t)}const JD=new RegExp("[~\\*/\\[\\]]");function Km(n,e,t){if(e.search(JD)>=0)throw Zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wu(...e.split("."))._internalPath}catch(r){throw Zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zm(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new xe(de.INVALID_ARGUMENT,f+n+y)}function Pp(n,e){return n.some(t=>t.isEqual(e))}class wl{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ym("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class XD extends wl{data(){return super.data()}}function Ym(n,e){return"string"==typeof e?Km(n,e):e instanceof wu?e._internalPath:e._delegate._internalPath}class bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ra extends wl{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ym("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ad extends Ra{data(e={}){return super.data(e)}}class Cu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ad(this._firestore,this._userDataWriter,r.key,r,new bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new ad(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new ad(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:eT(c.type),doc:f,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function eT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function gb(n,e){return n instanceof Ra&&e instanceof Ra?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cu&&e instanceof Cu&&n._firestore===e._firestore&&ib(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function tT(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ud{}function Pa(n,...e){for(const t of e)n=t._apply(n);return n}class mb extends ud{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=El(e.firestore),r=function(i,u,c,f,y,b,S){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Hv(S,b);const V=[];for(const B of S)V.push(jv(f,i,B));M={arrayValue:{values:V}}}else M=jv(f,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Hv(S,b),M=fb(c,"where",S,"in"===b||"not-in"===b);const F=Br.create(y,b,M);return function(V,B){if(B.S()){const De=wE(V);if(null!==De&&!De.isEqual(B.field))throw new xe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${B.field.toString()}'`);const Ge=EE(V);null!==Ge&&Cb(0,B.field,Ge)}const se=function(De,Ge){for(const it of De.filters)if(Ge.indexOf(it.op)>=0)return it.op;return null}(V,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==se)throw new xe(de.INVALID_ARGUMENT,se===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${se.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new jr(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new fu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Vv extends ud{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Pc(i,u);return function(f,y){if(null===EE(f)){const b=wE(f);null!==b&&Cb(0,b,y.field)}}(r,c),c}(e._query,this._c,this.gc);return new jr(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new fu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class yb extends ud{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new jr(e.firestore,e.converter,qg(e._query,this.yc,this.Ic))}}class Uv extends ud{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=bb(e,this.type,this.Tc,this.Ec);return new jr(e.firestore,e.converter,(i=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class vb extends ud{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=bb(e,this.type,this.Tc,this.Ec);return new jr(e.firestore,e.converter,(i=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function bb(n,e,t,r){if(t[0]=(0,yt.m9)(t[0]),t[0]instanceof wl)return function(i,u,c,f,y){if(!f)throw new xe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of zf(i))if(S.field.isKeyField())b.push(Ac(u,f.key));else{const M=f.data.field(S.field);if(Hf(M))throw new xe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new xe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new hu(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=El(n.firestore);return function(u,c,f,y,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new xe(de.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let V=0;V<b.length;V++){const B=b[V];if(M[V].field.isKeyField()){if("string"!=typeof B)throw new xe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof B}`);if(!Gg(u)&&-1!==B.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${B}' contains a slash.`);const se=u.path.child(Ye.fromString(B));if(!$e.isDocumentKey(se))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const De=new $e(se);F.push(Ac(c,De))}else{const se=fb(f,y,B);F.push(se)}}return new hu(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function jv(n,e,t){if("string"==typeof(t=(0,yt.m9)(t))){if(""===t)throw new xe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gg(e)&&-1!==t.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ye.fromString(t));if(!$e.isDocumentKey(r))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ac(n,new $e(r))}if(t instanceof Tn)return Ac(n,t._key);throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cp(t)}.`)}function Hv(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Cb(n,e,t){if(!t.isEqual(e))throw new xe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Ib={maxAttempts:5};class $v{convertValue(e,t="none"){switch(dh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Ic(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Wm(Ln(e.latitude),Ln(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ky(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=il(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ye.fromString(e);Rt(rm(r));const i=new ya(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return i.isEqual(t)||qn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Hr(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class zh extends $v{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}class Db{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=El(e)}set(e,t,r){this._verifyNotCommitted();const i=Cl(e,this._firestore),u=Hr(i.converter,t,r),c=Mp(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Cl(e,this._firestore);let c;return c="string"==typeof(t=(0,yt.m9)(t))||t instanceof wu?sd(this._dataReader,"WriteBatch.update",u._key,t,r,i):Fv(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cl(e,this._firestore);return this._mutations=this._mutations.concat(new wh(t._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cl(n,e){if((n=(0,yt.m9)(n)).firestore!==e)throw new xe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ro extends $v{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function Sb(n,e,t){n=Kt(n,Tn);const r=Kt(n.firestore,Bn),i=Hr(n.converter,e,t);return Op(r,[Mp(El(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yn.none())])}function Qm(n,e,t,...r){n=Kt(n,Tn);const i=Kt(n.firestore,Bn),u=El(i);let c;return c="string"==typeof(e=(0,yt.m9)(e))||e instanceof wu?sd(u,"updateDoc",n._key,e,t,r):Fv(u,"updateDoc",n._key,e),Op(i,[c.toMutation(n._key,Yn.exists(!0))])}function Np(n,...e){var t,r,i;n=(0,yt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Tp(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(Tp(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,S;if(n instanceof Tn)b=Kt(n.firestore,Bn),S=mh(n._key.path),y={next:M=>{e[c]&&e[c](Jm(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Kt(n,jr);b=Kt(M.firestore,Bn),S=M._query;const F=new Ro(b);y={next:V=>{e[c]&&e[c](new Cu(b,F,M,V))},error:e[c+1],complete:e[c+2]},tT(n._query)}return function(M,F,V,B){const se=new jm(B),De=new Rm(F,se,V);return M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Bh(yield Hh(M),De)})),()=>{se.Aa(),M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Sw(yield Hh(M),De)}))}}(nr(b),S,f,y)}function Op(n,e){return function(t,r){const i=new Ur;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function TD(n,e,t){return dv.apply(this,arguments)}(yield bp(t),r,i)})),i.promise}(nr(n),e)}function Jm(n,e,t){const r=t.docs.get(e._key),i=new Ro(n);return new Ra(n,i,e._key,r,new bl(t.hasPendingWrites,t.fromCache),e.converter)}class uT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=El(e)}get(e){const t=Cl(e,this._firestore),r=new zh(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new wl(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new wl(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Cl(e,this._firestore),u=Hr(i.converter,t,r),c=Mp(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Cl(e,this._firestore);let c;return c="string"==typeof(t=(0,yt.m9)(t))||t instanceof wu?sd(this._dataReader,"Transaction.update",u._key,t,r,i):Fv(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Cl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cl(e,this._firestore),r=new Ro(this._firestore);return super.get(e).then(i=>new Ra(this._firestore,r,t._key,i._document,new bl(!1,!1),t.converter))}}function Kv(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Zv(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function Yv(){if(!function Vg(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Cc=wr.SDK_VERSION,(0,wr._registerComponent)(new Mi.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Bn(i,new X0(t.getProvider("auth-internal")),new nE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,wr.registerVersion)(Bf,"3.4.9",n),(0,wr.registerVersion)(Bf,"3.4.9","esm2017")}();class kp{constructor(e){this._delegate=e}static fromBase64String(e){return Yv(),new kp(xa.fromBase64String(e))}static fromUint8Array(e){return Zv(),new kp(xa.fromUint8Array(e))}toBase64(){return Yv(),this._delegate.toBase64()}toUint8Array(){return Zv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qv(n){return function kb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class cT{enableIndexedDbPersistence(e,t){return function GA(n,e){cb(n=Kt(n,Bn));const t=nr(n),r=n._freezeSettings(),i=new Dv;return ob(t,i,new Iv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sb(n){cb(n=Kt(n,Bn));const e=nr(n),t=n._freezeSettings(),r=new Dv;return ob(e,r,new OD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qA(n){if(n._initialized&&!n._terminated)throw new xe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ei.vt())return Promise.resolve();const i=r+"main";yield Ei.delete(i)}),function(r){return t.apply(this,arguments)})(gm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Jv{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&rl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function rb(n,e,t,r={}){var i;const u=(n=Kt(n,Ip))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&rl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=ei.MOCK_USER;else{c=(0,yt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ei(y)}n._authCredentials=new zy(new Q0(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function zA(n){return function Pv(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield qm(n),t=yield xv(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.wu.delete(0),Fh(i)}(t)}))}(nr(n=Kt(n,Bn)))}(this._delegate)}disableNetwork(){return function ub(n){return function UD(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield qm(n),t=yield xv(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=qe(i);u.wu.add(0),yield Lh(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(nr(n=Kt(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,$h("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ab(n){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function BA(n,e){return Lw.apply(this,arguments)}(yield bp(e),t)})),t.promise}(nr(n=Kt(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function qv(n,e){return function Jw(n,e){const t=new jm(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Hh(n),i=t,qe(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Hh(n),i=t,void qe(r).bu.delete(i);var r,i}))}}(nr(n=Kt(n,Bn)),Tp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lp(this,Gh(this._delegate,e))}catch(t){throw bi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Po(this,Dp(this._delegate,e))}catch(t){throw bi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function HD(n,e){if(n=Kt(n,Ip),vl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jr(n,null,(t=e,new fu(Ye.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function xb(n,e,t){n=Kt(n,Bn);const r=Object.assign(Object.assign({},Ib),t);return function(i){if(i.maxAttempts<1)throw new xe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function jA(n,e,t){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const i=yield(u=n,Gm(u).then(c=>c.datastore));var u;new LD(n.asyncQueue,i,t,e,r).run()})),r.promise}(nr(n),i=>e(new uT(n,i)),r)}(this._delegate,t=>e(new Xv(this,t)))}batch(){return nr(this._delegate),new Lb(new Db(this._delegate,e=>Op(this._delegate,e)))}loadBundle(e){return function qD(n,e){const t=nr(n=Kt(n,Bn)),r=new GD;return function BD(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return zw(y,b);if(y instanceof ArrayBuffer)return zw(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new kD(y,c);var y}(t,Yc(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function Cv(n,e,t){const r=qe(n);var i;(i=(0,me.Z)(function*(u,c,f){try{const y=yield c.getMetadata();if(yield function(F,V){const B=qe(F),se=Cr(V.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",De=>B._s.getBundleMetadata(De,V.id)).then(De=>!!De&&De.createTime.compareTo(se)>=0)}(u.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(Mw(y));const b=new CD(y,u.localStore,c.M);let S=yield c.ma();for(;S;){const F=yield b.Fu(S);F&&f._updateProgress(F),S=yield c.ma()}const M=yield b.complete();return yield Eu(u,M.Lu,void 0),yield function(F,V){const B=qe(F);return B.persistence.runTransaction("Save bundle","readwrite",se=>B._s.saveBundleMetadata(se,V))}(u.localStore,y),f._completeWith(M.progress),Promise.resolve(M.Bu)}catch(y){return rl("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield bp(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zD(n,e){return function zm(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield wp(n),e)}))}(nr(n=Kt(n,Bn)),e).then(t=>t?new jr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class Fp extends $v{constructor(e){super(),this.firestore=e}convertBytes(e){return new kp(new xa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Po.forKey(t,this.firestore,null)}}class Xv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}get(e){const t=Na(e);return this._delegate.get(t).then(r=>new ey(this._firestore,new Ra(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Na(e);return r?(Kv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Na(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Na(e);return this._delegate.delete(t),this}}class Lb{constructor(e){this._delegate=e}set(e,t,r){const i=Na(e);return r?(Kv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Na(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Na(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ld{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ad(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ty(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ld.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new ld(e,new Fp(e),t),i.set(t,u)),u}}ld.INSTANCES=new WeakMap;class Po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Po(t,new Tn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new Po(t,new Tn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Lp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lp(this.firestore,Gh(this._delegate,e))}catch(t){throw bi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,yt.m9)(e))instanceof Tn&&Nv(this._delegate,e)}set(e,t){t=Kv("DocumentReference.set",t);try{return t?Sb(this._delegate,e,t):Sb(this._delegate,e)}catch(r){throw bi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Qm(this._delegate,e):Qm(this._delegate,e,t,...r)}catch(i){throw bi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Ab(n){return Op(Kt(n.firestore,Bn),[new wh(n._key,Yn.none())])}(this._delegate)}onSnapshot(...e){const t=dT(e),r=hT(e,i=>new ey(this.firestore,new Ra(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Np(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sT(n){n=Kt(n,Tn);const e=Kt(n.firestore,Bn),t=nr(e),r=new Ro(e);return function Kw(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const f=yield function(y,b){const S=qe(y);return S.persistence.runTransaction("read document","readonly",M=>S.fi.Ls(M,b))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new xe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=Vh(f,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield wp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ra(e,r,n._key,i,new bl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Gv(n){n=Kt(n,Tn);const e=Kt(n.firestore,Bn);return Zw(nr(e),n._key,{source:"server"}).then(t=>Jm(e,n,t))}(this._delegate):function KA(n){n=Kt(n,Tn);const e=Kt(n.firestore,Bn);return Zw(nr(e),n._key).then(t=>Jm(e,n,t))}(this._delegate),t.then(r=>new ey(this.firestore,new Ra(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Po(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}function bi(n,e,t){return n.message=n.message.replace(e,t),n}function dT(n){for(const e of n)if("object"==typeof e&&!Qv(e))return e;return{}}function hT(n,e){var t,r;let i;return i=Qv(n[0])?n[0]:Qv(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ey{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Po(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gb(this._delegate,e._delegate)}}class ty extends ey{data(e){const t=this._delegate.data(e);return function qy(n,e){n||st()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}where(e,t,r){try{return new as(this.firestore,Pa(this._delegate,function Lv(n,e,t){const r=e,i=Ym("where",n);return new mb(i,r,t)}(e,t,r)))}catch(i){throw bi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,Pa(this._delegate,function nT(n,e="asc"){const t=e,r=Ym("orderBy",n);return new Vv(r,t)}(e,t)))}catch(r){throw bi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,Pa(this._delegate,function rT(n){return tb("limit",n),new yb("limit",n,"F")}(e)))}catch(t){throw bi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,Pa(this._delegate,function iT(n){return tb("limitToLast",n),new yb("limitToLast",n,"L")}(e)))}catch(t){throw bi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,Pa(this._delegate,function Bv(...n){return new Uv("startAt",n,!0)}(...e)))}catch(t){throw bi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,Pa(this._delegate,function _b(...n){return new Uv("startAfter",n,!1)}(...e)))}catch(t){throw bi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,Pa(this._delegate,function Eb(...n){return new vb("endBefore",n,!1)}(...e)))}catch(t){throw bi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,Pa(this._delegate,function wb(...n){return new vb("endAt",n,!0)}(...e)))}catch(t){throw bi(t,"endAt()","Query.endAt()")}}isEqual(e){return ib(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Tb(n){n=Kt(n,jr);const e=Kt(n.firestore,Bn),t=nr(e),r=new Ro(e);return function Yw(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const f=yield fp(i,u,!0),y=new Rw(u,f._i),b=y.Wu(f.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(f){const y=Vh(f,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield wp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Cu(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function aT(n){n=Kt(n,jr);const e=Kt(n.firestore,Bn),t=nr(e),r=new Ro(e);return Qw(t,n._query,{source:"server"}).then(i=>new Cu(e,r,n,i))}(this._delegate):function oT(n){n=Kt(n,jr);const e=Kt(n.firestore,Bn),t=nr(e),r=new Ro(e);return tT(n._query),Qw(t,n._query).then(i=>new Cu(e,r,n,i))}(this._delegate),t.then(r=>new Vb(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dT(e),r=hT(e,i=>new Vb(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Np(this._delegate,t,r)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}class YA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ty(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ty(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new YA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ty(this._firestore,r))})}isEqual(e){return gb(this._delegate,e._delegate)}}class Lp extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Po(this.firestore,e):null}doc(e){try{return new Po(this.firestore,void 0===e?Dp(this._delegate):Dp(this._delegate,e))}catch(t){throw bi(t,"doc()","CollectionReference.doc()")}}add(e){return function Mb(n,e){const t=Kt(n.firestore,Bn),r=Dp(n),i=Hr(n.converter,e);return Op(t,[Mp(El(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Po(this.firestore,t))}isEqual(e){return Nv(this._delegate,e._delegate)}withConverter(e){return new Lp(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}function Na(n){return Kt(n,Tn)}class Ub{constructor(...e){this._delegate=new wu(...e)}static documentId(){return new Ub(hr.keyField().canonicalString())}isEqual(e){return(e=(0,yt.m9)(e))instanceof wu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Il{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Rb(){return new kv("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Il(e)}static delete(){const e=function Xm(){return new xp("deleteField")}();return e._methodName="FieldValue.delete",new Il(e)}static arrayUnion(...e){const t=function lT(...n){return new ZD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Il(t)}static arrayRemove(...e){const t=function zv(...n){return new YD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Il(t)}static increment(e){const t=function Wv(n){return new QD("increment",n)}(e);return t._methodName="FieldValue.increment",new Il(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e0={Firestore:Jv,GeoPoint:Wm,Timestamp:tr,Blob:kp,Transaction:Xv,WriteBatch:Lb,DocumentReference:Po,DocumentSnapshot:ey,Query:as,QueryDocumentSnapshot:ty,QuerySnapshot:Vb,CollectionReference:Lp,FieldPath:Ub,FieldValue:Il,setLogLevel:function Fb(n){!function Gy(n){lu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function jb(n){(function Bb(n,e){n.INTERNAL.registerComponent(new Mi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},e0)))})(n,(e,t)=>new Jv(e,t,new cT)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(lr.Z);var cd=N(7579),t0=N(6451),Vp=N(5363),Up=N(8421);function $r(n,e){return(0,ur.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,$n.x)(r,y=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,Up.Xf)(n(y,S)).subscribe(i=(0,$n.x)(r,M=>r.next(e?e(y,M,S,b++):M),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var QA=N(6063);class Hb extends cd.x{constructor(e=1/0,t=1/0,r=QA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var fT=N(3099);function ny(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,fT.B)({connector:()=>new Hb(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const n0=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var $b=N(5698);function gT(n){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,$n.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gb(n=mT){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,$n.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function mT(){return new n0}function dd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((i,u)=>n(i,u,r)):tu.y,(0,$b.q)(1),t?gT(e):Gb(()=>new n0))}var qb=N(576);function zb(n,e){return(0,qb.m)(e)?$r(()=>n,e):$r(()=>n)}var Bp=N(9468);N(5867);const Jb=new Map,Xb={activated:!1,tokenObservers:[]},CT={initialized:!1,enabled:!1};function Gr(n){return Jb.get(n)||Xb}function Ys(n,e){Jb.set(n,e)}function ry(){return CT}class s0{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new yt.BH,yield function o0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new yt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Fi=new yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function a0(n){if(!Gr(n).activated)throw Fi.create("use-before-activation",{appName:n.name})}function oC(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(M){throw Fi.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw Fi.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw Fi.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Fi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:f.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),iy.apply(this,arguments)}function AT(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const sy="firebase-app-check-store";let c0=null;function aC(){return c0||(c0=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Fi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(sy,{keyPath:"compositeKey"})}}catch(t){e(Fi.create("storage-open",{originalErrorMessage:t.message}))}}),c0)}function ay(){return ay=(0,me.Z)(function*(n,e){const r=(yield aC()).transaction(sy,"readwrite"),u=r.objectStore(sy).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;f(Fi.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),ay.apply(this,arguments)}const hd=new ci.Yd("@firebase/app-check");function PT(n,e){return(0,yt.hl)()?function xT(n,e){return function Dl(n,e){return ay.apply(this,arguments)}(function lC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NT(){return ry().enabled}function h0(){return f0.apply(this,arguments)}function f0(){return f0=(0,me.Z)(function*(){const n=ry();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),f0.apply(this,arguments)}const kT={error:"UNKNOWN_ERROR"};function FT(n){return yt.US.encodeString(JSON.stringify(n),!1)}function $p(n){return ly.apply(this,arguments)}function ly(){return ly=(0,me.Z)(function*(n,e=!1){const t=n.app;a0(t);const r=Gr(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&g0(y)&&(i=y)}if(!e&&i&&g0(i))return{token:i.token};let f,c=!1;if(NT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=oC(AT(t,yield h0()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield PT(t,y),Ys(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?hd.warn(y.message):hd.error(y),u=y}return i?(f={token:i.token},Ys(t,Object.assign(Object.assign({},r),{token:i})),yield PT(t,i)):f=fC(u),c&&dy(t,f),f}),ly.apply(this,arguments)}function p0(n,e){const t=Gr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ys(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function dC(n){const{app:e}=n,t=Gr(e);let r=t.tokenRefresher;r||(r=function hC(n){const{app:e}=n;return new s0((0,me.Z)(function*(){let r;if(r=Gr(e).token?yield $p(n,!0):yield $p(n),r.error)throw r.error}),()=>!0,()=>{const t=Gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ys(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function dy(n,e){const t=Gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function g0(n){return n.expireTimeMillis-Date.now()>0}function fC(n){return{token:FT(kT),error:n}}class m0{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Gr(this.app);for(const t of e)p0(this.app,t.next);return Promise.resolve()}}const x="app-check-internal";!function k(){(0,wr._registerComponent)(new Mi.wA("app-check",n=>function LT(n,e){return new m0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(x).initialize()})),(0,wr._registerComponent)(new Mi.wA(x,n=>function VT(n){return{getToken:e=>$p(n,e),addTokenListener:e=>function cy(n,e,t,r){const{app:i}=n,u=Gr(i),c={next:t,error:r,type:e};if(Ys(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&g0(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),dC(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>dC(n))}(n,"INTERNAL",e),removeTokenListener:e=>p0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wr.registerVersion)("@firebase/app-check","0.5.8")}();class _e{constructor(){return(0,Ht.vb)("app-check")}}"undefined"!=typeof window&&window;var hy=N(127);const fy=new p.OlP("angularfire2.auth.use-emulator"),cM=new p.OlP("angularfire2.auth.settings"),dM=new p.OlP("angularfire2.auth.tenant-id"),hM=new p.OlP("angularfire2.auth.langugage-code"),fM=new p.OlP("angularfire2.auth.use-device-language"),pM=new p.OlP("angularfire.auth.persistence"),gM=(n,e,t,r,i,u,c,f)=>(0,On.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return f&&y.setPersistence(f),y},[t,r,i,u,c,f]);let mM=(()=>{class n{constructor(t,r,i,u,c,f,y,b,S,M,F,V){const B=new cd.x,se=pt(void 0).pipe((0,Vp.Q)(c.outsideAngular),$r(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,Mt.U)(()=>(0,On.on)(t,u,r)),(0,Mt.U)(De=>gM(De,u,f,b,S,M,y,F)),ny({bufferSize:1,refCount:!1}));if(zo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{se.pipe(dd()).subscribe();const Ge=se.pipe($r(ze=>ze.getRedirectResult().then(At=>At,()=>null)),Ht.iC,ny({bufferSize:1,refCount:!1})),it=se.pipe($r(ze=>new Qi.y(At=>({unsubscribe:u.runOutsideAngular(()=>ze.onAuthStateChanged(Pt=>At.next(Pt),Pt=>At.error(Pt),()=>At.complete()))})))),rt=se.pipe($r(ze=>new Qi.y(At=>({unsubscribe:u.runOutsideAngular(()=>ze.onIdTokenChanged(Pt=>At.next(Pt),Pt=>At.error(Pt),()=>At.complete()))}))));this.authState=Ge.pipe(zb(it),(0,Bp.R)(c.outsideAngular),(0,Vp.Q)(c.insideAngular)),this.user=Ge.pipe(zb(rt),(0,Bp.R)(c.outsideAngular),(0,Vp.Q)(c.insideAngular)),this.idToken=this.user.pipe($r(ze=>ze?(0,kt.D)(ze.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe($r(ze=>ze?(0,kt.D)(ze.getIdTokenResult()):pt(null))),this.credential=(0,t0.T)(Ge,B,this.authState.pipe(Er(ze=>!ze))).pipe((0,Mt.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,Bp.R)(c.outsideAngular),(0,Vp.Q)(c.insideAngular))}return(0,On.pX)(this,se,u,{spy:{apply:(De,Ge,it)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&it.then(rt=>B.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(On.Dh),p.LFG(On.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ht.HU),p.LFG(fy,8),p.LFG(cM,8),p.LFG(dM,8),p.LFG(hM,8),p.LFG(fM,8),p.LFG(pM,8),p.LFG(_e,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function yM(n,e){return function FN(n,e=pf.z){return new Qi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function zT(n,e){return yM(n,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function EC(n,e){return zT(n,e).pipe(sn(void 0),_s(),(0,Mt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function _M(n,e,t){return EC(n,t).pipe(ra((r,i)=>function VN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function UN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return WT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return WT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return WT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Bd(n,e=tu.y){return n=null!=n?n:lo,(0,ur.e)((t,r)=>{let i,u=!0;t.subscribe((0,$n.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function WT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function vM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class EM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=EC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(sn(void 0),_s(),Er(([r,i])=>i.length>0||!r),(0,Mt.U)(([r,i])=>i),Ht.iC)}auditTrail(e){return this.stateChanges(e).pipe(ra((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vM(e);return _M(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(e={}){return zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ht.iC)}get(e){return(0,kt.D)(this.query.get(e)).pipe(Ht.iC)}add(e){return this.ref.add(e)}doc(e){return new wM(this.ref.doc(e),this.afs)}}class wM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=IM(r,t);return new EM(i,u,this.afs)}snapshotChanges(){return function LN(n,e){return yM(n,e).pipe(sn(void 0),_s(),(0,Mt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,kt.D)(this.ref.get(e)).pipe(Ht.iC)}}class BN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?EC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Er(t=>t.length>0),Ht.iC):EC(this.query,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}auditTrail(e){return this.stateChanges(e).pipe(ra((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vM(e);return _M(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(e={}){return zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ht.iC)}get(e){return(0,kt.D)(this.query.get(e)).pipe(Ht.iC)}}const bM=new p.OlP("angularfire2.enableFirestorePersistence"),CM=new p.OlP("angularfire2.firestore.persistenceSettings"),jN=new p.OlP("angularfire2.firestore.settings"),HN=new p.OlP("angularfire2.firestore.use-emulator");function IM(n,e=(t=>t)){return{query:e(n),ref:n}}let KT=(()=>{class n{constructor(t,r,i,u,c,f,y,b,S,M,F,V,B,se,De,Ge,it){this.schedulers=y;const rt=(0,On.on)(t,f,r),ze=S;M&&gM(rt,f,F,B,se,De,V,Ge),[this.firestore,this.persistenceEnabled$]=(0,On.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const At=f.runOutsideAngular(()=>rt.firestore());if(u&&At.settings(u),ze&&At.useEmulator(...ze),i&&!zo(c)){const Pt=()=>{try{return(0,kt.D)(At.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jt){return"undefined"!=typeof console&&console.warn(Jt),pt(!1)}};return[At,f.runOutsideAngular(Pt)]}return[At,pt(!1)]},[u,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=IM(i,r),f=this.schedulers.ngZone.run(()=>u);return new EM(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new BN(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new wM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(On.Dh),p.LFG(On.xv,8),p.LFG(bM,8),p.LFG(jN,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ht.HU),p.LFG(CM,8),p.LFG(HN,8),p.LFG(mM,8),p.LFG(fy,8),p.LFG(cM,8),p.LFG(dM,8),p.LFG(hM,8),p.LFG(fM,8),p.LFG(pM,8),p.LFG(_e,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$N=(()=>{class n{constructor(){hy.Z.registerVersion("angularfire",Ht.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:bM,useValue:!0},{provide:CM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[KT]}),n})();const{isArray:GN}=Array,{getPrototypeOf:qN,prototype:zN,keys:WN}=Object;function DM(n){if(1===n.length){const e=n[0];if(GN(e))return{args:e,keys:null};if(function KN(n){return n&&"object"==typeof n&&qN(n)===zN}(e)){const t=WN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:ZN}=Array;function TM(n){return(0,Mt.U)(e=>function YN(n,e){return ZN(e)?n(...e):n(e)}(n,e))}function SM(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let AM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Gp=(()=>{class n extends AM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Tl=new p.OlP("NgValueAccessor"),XN={provide:Tl,useExisting:(0,p.Gpc)(()=>E0),multi:!0},tO=new p.OlP("CompositionEventMode");let E0=(()=>{class n extends AM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function eO(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(tO,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([XN]),p.qOj]}),n})();const ls=new p.OlP("NgValidators"),Yh=new p.OlP("NgAsyncValidators");function UM(n){return null!=n}function BM(n){const e=(0,p.QGY)(n)?(0,kt.D)(n):n;return(0,p.CqO)(e),e}function jM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function HM(n,e){return e.map(t=>t(n))}function $M(n){return n.map(e=>function rO(n){return!n.validate}(e)?e:t=>e.validate(t))}function ZT(n){return null!=n?function GM(n){if(!n)return null;const e=n.filter(UM);return 0==e.length?null:function(t){return jM(HM(t,e))}}($M(n)):null}function YT(n){return null!=n?function qM(n){if(!n)return null;const e=n.filter(UM);return 0==e.length?null:function(t){return function QN(...n){const e=(0,Ji.jO)(n),{args:t,keys:r}=DM(n),i=new Qi.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let y=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,Up.Xf)(t[S]).subscribe((0,$n.x)(u,F=>{M||(M=!0,b--),f[S]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?SM(r,f):f),u.complete())}))}});return e?i.pipe(TM(e)):i}(HM(t,e).map(BM)).pipe((0,Mt.U)(jM))}}($M(n)):null}function zM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function QT(n){return n?Array.isArray(n)?n:[n]:[]}function bC(n,e){return Array.isArray(n)?n.includes(e):n===e}function ZM(n,e){const t=QT(e);return QT(n).forEach(i=>{bC(t,i)||t.push(i)}),t}function YM(n,e){return QT(e).filter(t=>!bC(n,t))}class QM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ZT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=YT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qh extends QM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rs extends QM{get formDirective(){return null}get path(){return null}}let JT=(()=>{class n extends class JM{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Qh,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})();function w0(n,e){(function tS(n,e){const t=function WM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(zM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function KM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(zM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();TC(e._rawValidators,i),TC(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function hO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ex(n,e)})}(n,e),function pO(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ex(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dO(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function TC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ex(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function iS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const b0="VALID",AC="INVALID",py="PENDING",C0="DISABLED";function oS(n){return(MC(n)?n.validators:n)||null}function ix(n){return Array.isArray(n)?ZT(n):n||null}function aS(n,e){return(MC(e)?e.asyncValidators:n)||null}function sx(n){return Array.isArray(n)?YT(n):n||null}function MC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const uS=n=>n instanceof cS;function ax(n){return(n=>n instanceof cx)(n)?n.value:n.getRawValue()}function ux(n,e){const t=uS(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function lx(n,e){uS(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new p.vHH(1002,"")})}class lS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ix(this._rawValidators),this._composedAsyncValidatorFn=sx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===b0}get invalid(){return this.status===AC}get pending(){return this.status==py}get disabled(){return this.status===C0}get enabled(){return this.status!==C0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ix(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=sx(e)}addValidators(e){this.setValidators(ZM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YM(e,this._rawAsyncValidators))}hasValidator(e){return bC(this._rawValidators,e)}hasAsyncValidator(e){return bC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=py,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=C0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=b0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===b0||this.status===py)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?C0:b0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=py,this._hasOwnPendingAsyncValidator=!0;const t=BM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function _O(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=uS(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof EO)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?C0:this.errors?AC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(py)?py:this._anyControlsHaveStatus(AC)?AC:b0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){MC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cx extends lS{constructor(e=null,t,r){super(oS(t),aS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),MC(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class cS extends lS{constructor(e,t,r){super(oS(t),aS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lx(this,e),Object.keys(e).forEach(r=>{ux(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=ax(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class EO extends lS{constructor(e,t,r){super(oS(t),aS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lx(this,e),e.forEach((r,i)=>{ux(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>ax(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const CO={provide:Qh,useExisting:(0,p.Gpc)(()=>xC)},fx=(()=>Promise.resolve(null))();let xC=(()=>{class n extends Qh{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new cx,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function rS(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===E0?t=u:function yO(n){return Object.getPrototypeOf(n.constructor)===Gp}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function nS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){w0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){fx.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;fx.then(()=>{var u;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function IC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Rs,9),p.Y36(ls,10),p.Y36(Yh,10),p.Y36(Tl,10),p.Y36(p.sBO,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([CO]),p.qOj,p.TTD]}),n})(),gx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const OO={provide:Tl,useExisting:(0,p.Gpc)(()=>RC),multi:!0};function bx(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let RC=(()=>{class n extends Gp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=bx(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function kO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([OO]),p.qOj]}),n})(),gS=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(bx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(RC,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const FO={provide:Tl,useExisting:(0,p.Gpc)(()=>mS),multi:!0};function Cx(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let mS=(()=>{class n extends Gp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let f=0;f<c.length;f++){const b=this._getOptionValue(c[f].value);i.push(b)}}else{const c=r.options;for(let f=0;f<c.length;f++){const y=c[f];if(y.selected){const b=this._getOptionValue(y.value);i.push(b)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function LO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([FO]),p.qOj]}),n})(),yS=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Cx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Cx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(mS,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),WO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[gx]]}),n})(),KO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[WO]}),n})();function ZO(n,e){1&n&&(p.TgZ(0,"div",22)(1,"div",17),p._uU(2,"Getting certificate..."),p.qZA()())}function YO(n,e){if(1&n&&(p.TgZ(0,"div",23),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.Q6J("ngClass",t.success?"text-success":"text-danger"),p.xp6(1),p.Oqu(t.alert)}}function QO(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"button",27),p.NdJ("click",function(){return p.CHM(t),p.oxw().popupClose()}),p._uU(4,"X"),p.qZA(),p.TgZ(5,"div",28)(6,"div",29),p._UZ(7,"img",30),p.qZA()(),p.TgZ(8,"button",31),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return i.downloadUrl(i.items.certificateUrl,"cert")}),p._uU(9,"Download"),p.qZA()()()()}if(2&n){const t=p.oxw();p.xp6(7),p.s9C("src",t.items.certificateUrl,p.LSH)}}let Nx=(()=>{class n{constructor(t){this.firestore=t,this.eventId=1,this.success=!1,this.loading=!1,this.popup=!1,this.itemsCollection=t.collection("certificate")}ngOnInit(){this.generateCAPTCHA()}getCertificate(){return this.aadharNumber?12!=this.aadharNumber.toString().length?(this.alert="*Please enter valid aadhar number",void this.clearError()):this.generatedCaptcha!=this.captcha?(this.alert="Invalid Captcha....",void this.clearError()):(this.loading=!0,void this.firestore.collection("certificate",t=>t.where("aadhaarNumber","==",this.aadharNumber)).valueChanges().subscribe(t=>{this.loading=!1,this.success=!0,this.items=t[0],this.captcha="",this.popup=!0,this.generateCAPTCHA()})):(this.alert="*Please enter aadhar number",void this.clearError())}generateCAPTCHA(){this.generatedCaptcha=Math.random().toString(36).substring(7)}downloadUrl(t,r){const i=document.createElement("a");i.href=t,i.download=r,document.body.appendChild(i),i.style="display: none",i.click(),i.remove()}clearError(){setTimeout(()=>{this.alert="",this.success=!1},2e3)}view(){this.popup=!0}popupClose(){this.popup=!1}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(KT))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-download-certificate"]],decls:42,vars:6,consts:[["class","loading",4,"ngIf"],[1,"container","bg-border","mt-20"],[1,"bold"],[1,"shadow"],[1,"upload-title","mt-20"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"row","mt-20"],[1,"col-12","col-lg-6","margin-auto","title"],[1,"col-12","col-lg-6"],["type","text",1,"box-border",3,"ngModel","ngModelChange"],[1,"pointer"],[1,"box-border"],[1,"row","mt-20","mb-20"],[1,"col-12","col-lg-6","margin-auto","mb-center"],["type","button","id","show_captcha_button",1,"button","captcha"],[1,"col-12","col-lg-6","margin-auto"],["type","text","placeholder","Enter captcha",1,"box-border",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-12","text-center"],[3,"ngClass",4,"ngIf"],["type","button",1,"btn","btn-blue",3,"click"],["class","modal d-block","tabindex","-1","role","dialog","aria-labelledby","logout","aria-hidden","true",4,"ngIf"],[1,"loading"],[3,"ngClass"],["tabindex","-1","role","dialog","aria-labelledby","logout","aria-hidden","true",1,"modal","d-block"],["role","document",1,"modal-dialog"],[1,"modal-content"],["type","button","data-dismiss","modal",1,"popup-close-btn",3,"click"],[1,"modal-body"],[1,"popup_image"],["id","imagepreview",3,"src"],["type","button",1,"btn","width-100","btn-blue","center-align","mt-10","mb-10",3,"click"]],template:function(t,r){1&t&&(p.YNc(0,ZO,3,0,"div",0),p.TgZ(1,"section",1)(2,"div",2),p._uU(3,"*Note"),p.qZA(),p._uU(4," Enter your aadhar card number and select the event name of the certificate to be downloaded "),p.TgZ(5,"div",3)(6,"div",4),p._uU(7,"Certificate center"),p.qZA(),p.TgZ(8,"div",5)(9,"div",6)(10,"div",7),p._uU(11," Aadhar card number "),p.qZA(),p.TgZ(12,"div",8)(13,"input",9),p.NdJ("ngModelChange",function(u){return r.aadharNumber=u}),p.qZA()()(),p.TgZ(14,"div",6)(15,"div",7),p._uU(16," Event Name "),p.qZA(),p.TgZ(17,"div",8)(18,"span",10)(19,"select",11)(20,"option"),p._uU(21,"Master royal cup 2022"),p.qZA(),p.TgZ(22,"option"),p._uU(23,"Grand Prix international 2022"),p.qZA(),p.TgZ(24,"option"),p._uU(25,"State level silambam Tournament"),p.qZA(),p.TgZ(26,"option"),p._uU(27,"TN open championship 2021"),p.qZA(),p.TgZ(28,"option"),p._uU(29,"Silimbam Interdistrict 2021"),p.qZA()()()()(),p.TgZ(30,"div",12)(31,"div",13)(32,"button",14),p._uU(33),p.qZA()(),p.TgZ(34,"div",15)(35,"input",16),p.NdJ("ngModelChange",function(u){return r.captcha=u}),p.qZA()()(),p.TgZ(36,"div",17)(37,"div",18),p.YNc(38,YO,2,2,"div",19),p.TgZ(39,"button",20),p.NdJ("click",function(){return r.getCertificate()}),p._uU(40,"View"),p.qZA()()()()()(),p.YNc(41,QO,10,1,"div",21)),2&t&&(p.Q6J("ngIf",r.loading),p.xp6(13),p.Q6J("ngModel",r.aadharNumber),p.xp6(20),p.Oqu(r.generatedCaptcha),p.xp6(2),p.Q6J("ngModel",r.captcha),p.xp6(3),p.Q6J("ngIf",r.alert),p.xp6(3),p.Q6J("ngIf",r.popup))},directives:[Jn,E0,JT,xC,gS,yS,ji],styles:['.button[_ngcontent-%COMP%]{background:#efefef;border:none;width:200px;padding:20px;border-radius:45px;color:#6495ed;font-size:1rem;letter-spacing:.1rem;text-align:center;outline:none;cursor:pointer;transition:.4s ease-in-out;font-style:italic;box-shadow:-6px -6px 14px #ffffffb3,-6px -6px 10px #ffffff80,6px 6px 8px #ffffff14,6px 6px 10px #00000026}.button[_ngcontent-%COMP%]:hover{box-shadow:var(--main-box-shadow-hover)}.captcha_textfield[_ngcontent-%COMP%]{border-radius:10px;border:none;background:var(--main-bg-color);box-shadow:var(--main-textfield-focus-shadow);margin:10px 10px 10px 0;padding:10px;color:var(--main-text-color);font-size:1rem;transition:.4s ease-in-out}.captcha_textfield[_ngcontent-%COMP%]:focus{box-shadow:var(--main-textfield-enabled-shadow);outline:none}.verify_button[_ngcontent-%COMP%]{background:var(--main-bg-color);border:none;width:auto;padding:10px;border-radius:45px;color:var(--main-text-color);font-size:1rem;letter-spacing:.1rem;text-align:center;outline:none;cursor:pointer;transition:.4s ease-in-out;box-shadow:var(--main-box-shadow);margin-left:15px}.verify_button[_ngcontent-%COMP%]:hover{box-shadow:var(--main-box-shadow-hover)}.btn-blue[_ngcontent-%COMP%]{border-radius:10px!important;padding:10px!important;width:120px;margin-bottom:20px;background:#0786d9;color:#fff}.red[_ngcontent-%COMP%]{color:red}.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0;width:50px;height:50px}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:90px;height:90px;margin-top:-.5em;border:5px solid #c6a9e4;border-radius:100%;border-bottom-color:transparent;animation:spinner 1s linear 0s infinite}']}),n})(),JO=(()=>{class n{constructor(){this.title="angular-tour-of-heroes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-static"],[1,"container","sub-logo"],[1,"fw-300","white","justify-content-between","align-items-center","mb-display"],[1,"flex"],["href","#home","title","Logo",1,"logo","scroll"],["src","assets/img/logo.jpeg","alt","logo","width","100px",1,"logo-dark","default"],[1,"text-center","ml-10"],[1,"vks"],["src","assets/img/profile-img.png",1,"logo-dark","ml-10"],[1,"font-14","text-center"],["id","ntg",1,"row","fw-500","white","justify-content-between","align-items-center","lg-display"],[1,"col-2","text-center"],[1,"col-8","font-30","text-center"],[1,"ml-20"],[1,"font-16"],["src","assets/img/profile-img.png",1,"logo-dark"]],template:function(t,r){1&t&&(p.TgZ(0,"header")(1,"nav",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"a",4),p._UZ(6,"img",5),p.qZA(),p.TgZ(7,"div",6)(8,"span",7),p._uU(9,"V.K.S"),p.qZA()(),p._UZ(10,"img",8),p.qZA(),p.TgZ(11,"div",9)(12,"div"),p._uU(13," SILAMBAM & YOGA MARTIALARTS TRUST"),p.qZA(),p._uU(14," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION "),p.qZA()(),p.TgZ(15,"div",10)(16,"div",11)(17,"a",4),p._UZ(18,"img",5),p.qZA()(),p.TgZ(19,"div",12)(20,"div",13),p._uU(21," V.K.S.SILAMBAM & YOGA MARTIALARTS TRUST "),p.TgZ(22,"div",14),p._uU(23," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION"),p.qZA()()(),p.TgZ(24,"div",11),p._UZ(25,"img",15),p.qZA()()()()(),p._UZ(26,"app-download-certificate"))},directives:[Nx],styles:[".vks[_ngcontent-%COMP%]{font-size:3rem;font-weight:300}.sub-logo[_ngcontent-%COMP%]{position:relative;top:-18px}.ml-10[_ngcontent-%COMP%]{margin-left:10px}"]}),n})();class Iu extends cd.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var XO=N(9672);function Ox(n,e,t){n?(0,XO.f)(t,n,e):e()}function PC(n,e){const t=(0,qb.m)(n)?n:()=>n,r=i=>i.error(t());return new Qi.y(e?i=>e.schedule(r,0,i):r)}function kx(n){return new Qi.y(e=>{(0,Up.Xf)(n()).subscribe(e)})}var gy=N(515),Fx=N(727);function Lx(){return(0,ur.e)((n,e)=>{let t=null;n._refCount++;const r=(0,$n.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class nk extends Qi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ur.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,$n.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fx.w0.EMPTY)}return e}refCount(){return Lx()(this)}}function Jh(n){return(0,ur.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,$n.x)(t,void 0,void 0,c=>{u=(0,Up.Xf)(n(c,Jh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var cs=N(5577);function my(n,e){return(0,qb.m)(e)?(0,cs.z)(n,e,1):(0,cs.z)(n,1)}function vS(n){return n<=0?()=>gy.E:(0,ur.e)((e,t)=>{let r=[];e.subscribe((0,$n.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var No=N(8505);class fd{constructor(e,t){this.id=e,this.url=t}}class ES extends fd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class D0 extends fd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vx extends fd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sk extends fd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ok extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ak extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uk extends fd{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lk extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ck extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ux{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bx{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dk{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hk{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fk{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pk{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const zt="primary";class gk{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function yy(n){return new gk(n)}const Hx="ngNavigationCancelingError";function wS(n){const e=Error("NavigationCancelingError: "+n);return e[Hx]=!0,e}function yk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Sl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!$x(n[i],e[i]))return!1;return!0}function $x(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Gx(n){return Array.prototype.concat.apply([],n)}function qx(n){return n.length>0?n[n.length-1]:null}function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Al(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,kt.D)(Promise.resolve(n)):pt(n)}const Ek={exact:function Kx(n,e,t){if(!Wp(n.segments,e.segments)||!NC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Kx(n.children[r],e.children[r],t))return!1;return!0},subset:Zx},zx={exact:function wk(n,e){return Sl(n,e)},subset:function bk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$x(n[t],e[t]))},ignored:()=>!0};function Wx(n,e,t){return Ek[t.paths](n.root,e.root,t.matrixParams)&&zx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Zx(n,e,t){return Yx(n,e,e.segments,t)}function Yx(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Wp(i,t)||e.hasChildren()||!NC(i,t,r))}if(n.segments.length===t.length){if(!Wp(n.segments,t)||!NC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Zx(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Wp(n.segments,i)&&NC(n.segments,i,r)&&n.children[zt])&&Yx(n.children[zt],e,u,r)}}function NC(n,e,t){return e.every((r,i)=>zx[t](n[i].parameters,r.parameters))}class zp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yy(this.queryParams)),this._queryParamMap}toString(){return Dk.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return OC(this)}}class T0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=yy(this.parameters)),this._parameterMap}toString(){return tR(this)}}function Wp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Qx{}class Jx{parse(e){const t=new Ok(e);return new zp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${S0(e.root,!0)}`,r=function Ak(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${kC(t)}=${kC(i)}`).join("&"):`${kC(t)}=${kC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Tk(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Dk=new Jx;function OC(n){return n.segments.map(e=>tR(e)).join("/")}function S0(n,e){if(!n.hasChildren())return OC(n);if(e){const t=n.children[zt]?S0(n.children[zt],!1):"",r=[];return Li(n.children,(i,u)=>{u!==zt&&r.push(`${u}:${S0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ik(n,e){let t=[];return Li(n.children,(r,i)=>{i===zt&&(t=t.concat(e(r,i)))}),Li(n.children,(r,i)=>{i!==zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===zt?[S0(n.children[zt],!1)]:[`${i}:${S0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${OC(n)}/${t[0]}`:`${OC(n)}/(${t.join("//")})`}}function Xx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kC(n){return Xx(n).replace(/%3B/gi,";")}function bS(n){return Xx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function FC(n){return decodeURIComponent(n)}function eR(n){return FC(n.replace(/\+/g,"%20"))}function tR(n){return`${bS(n.path)}${function Sk(n){return Object.keys(n).map(e=>`;${bS(e)}=${bS(n[e])}`).join("")}(n.parameters)}`}const Mk=/^[^\/()?;=#]+/;function LC(n){const e=n.match(Mk);return e?e[0]:""}const xk=/^[^=?&#]+/,Pk=/^[^&#]+/;class Ok{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Yt(e,t)),r}parseSegment(){const e=LC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new T0(FC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=LC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=LC(this.remaining);i&&(r=i,this.capture(r))}e[FC(t)]=FC(r)}parseQueryParam(e){const t=function Rk(n){const e=n.match(xk);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Nk(n){const e=n.match(Pk);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=eR(t),u=eR(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=LC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[zt]:new Yt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class nR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=CS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=CS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=IS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return IS(e,this._root).map(t=>t.value)}}function CS(n,e){if(n===e.value)return e;for(const t of e.children){const r=CS(n,t);if(r)return r}return null}function IS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=IS(n,t);if(r.length)return r.unshift(e),r}return[]}class pd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _y(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rR extends nR{constructor(e,t){super(e),this.snapshot=t,DS(this,e)}toString(){return this.snapshot.toString()}}function iR(n,e){const t=function kk(n,e){const c=new VC([],{},{},"",{},zt,e,null,n.root,-1,{});return new oR("",new pd(c,[]))}(n,e),r=new Iu([new T0("",{})]),i=new Iu({}),u=new Iu({}),c=new Iu({}),f=new Iu(""),y=new vy(r,i,c,f,u,zt,e,t.root);return y.snapshot=t.root,new rR(new pd(y,[]),t)}class vy{constructor(e,t,r,i,u,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>yy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>yy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sR(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Fk(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class VC{constructor(e,t,r,i,u,c,f,y,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oR extends nR{constructor(e,t){super(t),this.url=e,DS(this,t)}toString(){return aR(this._root)}}function DS(n,e){e.value._routerState=n,e.children.forEach(t=>DS(n,t))}function aR(n){const e=n.children.length>0?` { ${n.children.map(aR).join(", ")} } `:"";return`${n.value}${e}`}function TS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Sl(e.params,t.params)||n.params.next(t.params),function _k(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Sl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function SS(n,e){const t=Sl(n.params,e.params)&&function Ck(n,e){return Wp(n,e)&&n.every((t,r)=>Sl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||SS(n.parent,e.parent))}function A0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Vk(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return A0(n,r,i);return A0(n,r)})}(n,e,t);return new pd(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>A0(n,f)),c}}const r=function Uk(n){return new vy(new Iu(n.url),new Iu(n.params),new Iu(n.queryParams),new Iu(n.fragment),new Iu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>A0(n,u));return new pd(r,i)}}function UC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function M0(n){return"object"==typeof n&&null!=n&&n.outlets}function AS(n,e,t,r,i){let u={};if(r&&Li(r,(f,y)=>{u[y]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new zp(t,u,i);const c=uR(n,e,t);return new zp(c,u,i)}function uR(n,e,t){const r={};return Li(n.children,(i,u)=>{r[u]=i===e?t:uR(i,e,t)}),new Yt(n.segments,r)}class lR{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&UC(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(M0);if(i&&i!==qx(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class MS{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cR(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return BC(n,e,t);const r=function qk(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(M0(f))break;const y=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!hR(y,b,c))return u;r+=2}else{if(!hR(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Yt(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new Yt(n.segments.slice(r.pathIndex),n.children),BC(u,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?xS(n,e,t):r.match?BC(n,0,i):xS(n,e,t)}function BC(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function Gk(n){return M0(n[0])?n[0].outlets:{[zt]:n}}(t),i={};return Li(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=cR(n.children[c],e,u))}),Li(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Yt(n.segments,i)}}function xS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(M0(u)){const y=zk(u.outlets);return new Yt(r,y)}if(0===i&&UC(t[0])){r.push(new T0(n.segments[e].path,dR(t[0]))),i++;continue}const c=M0(u)?u.outlets[zt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&UC(f)?(r.push(new T0(c,dR(f))),i+=2):(r.push(new T0(c,{})),i++)}return new Yt(r,{})}function zk(n){const e={};return Li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=xS(new Yt([],{}),0,t))}),e}function dR(n){const e={};return Li(n,(t,r)=>e[r]=`${t}`),e}function hR(n,e,t){return n==t.path&&Sl(e,t.parameters)}class Kk{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),TS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=_y(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Li(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=_y(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=_y(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=_y(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new pk(u.value.snapshot))}),e.children.length&&this.forwardEvent(new hk(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(TS(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),TS(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function Zk(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class RS{constructor(e,t){this.routes=e,this.module=t}}function Xh(n){return"function"==typeof n}function Kp(n){return n instanceof zp}const x0=Symbol("INITIAL_VALUE");function R0(){return $r(n=>function ek(...n){const e=(0,Ji.yG)(n),t=(0,Ji.jO)(n),{args:r,keys:i}=DM(n);if(0===r.length)return(0,kt.D)([],e);const u=new Qi.y(function tk(n,e,t=tu.y){return r=>{Ox(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)Ox(e,()=>{const b=(0,kt.D)(n[y],e);let S=!1;b.subscribe((0,$n.x)(r,M=>{u[y]=M,S||(S=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>SM(i,c):tu.y));return t?u.pipe(TM(t)):u}(n.map(e=>e.pipe((0,$b.q)(1),sn(x0)))).pipe(ra((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==x0?i:(u===x0&&(r=!0),r||!1!==u&&c!==t.length-1&&!Kp(u)?i:u),e)},x0),Er(e=>e!==x0),(0,Mt.U)(e=>Kp(e)?e:!0===e),(0,$b.q)(1)))}class t1{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new P0,this.attachRef=null}}class P0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new t1,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let fR=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=u||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,y=new n1(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(P0),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class n1{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vy?this.route:e===P0?this.childContexts:this.parent.get(e,t)}}let pR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[fR],encapsulation:2}),n})();function gR(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];r1(r,i1(e,r))}}function r1(n,e){n.children&&gR(n.children,e)}function i1(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function PS(n){const e=n.children&&n.children.map(PS),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=pR),t}function ka(n){return n.outlet||zt}function mR(n,e){const t=n.filter(r=>ka(r)===e);return t.push(...n.filter(r=>ka(r)!==e)),t}const yR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jC(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},yR):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||yk)(t,n,e);if(!u)return Object.assign({},yR);const c={};Li(u.posParams,(y,b)=>{c[b]=y.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function HC(n,e,t,r,i="corrected"){if(t.length>0&&function a1(n,e,t){return t.some(r=>$C(n,e,r)&&ka(r)!==zt)}(n,t,r)){const c=new Yt(e,function o1(n,e,t,r){const i={};i[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ka(u)!==zt){const c=new Yt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ka(u)]=c}return i}(n,e,r,new Yt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function u1(n,e,t){return t.some(r=>$C(n,e,r))}(n,t,r)){const c=new Yt(n.segments,function s1(n,e,t,r,i,u){const c={};for(const f of r)if($C(n,t,f)&&!i[ka(f)]){const y=new Yt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[ka(f)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Yt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function $C(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function _R(n,e,t,r){return!!(ka(n)===r||r!==zt&&$C(e,t,n))&&("**"===n.path||jC(e,n,t).matched)}function vR(n,e,t){return 0===e.length&&!n.children[t]}class GC{constructor(e){this.segmentGroup=e||null}}class ER{constructor(e){this.urlTree=e}}function N0(n){return PC(new GC(n))}function wR(n){return PC(new ER(n))}function l1(n){return PC(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class h1{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=HC(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,zt).pipe((0,Mt.U)(u=>this.createUrlTree(NS(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jh(u=>{if(u instanceof ER)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof GC?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,zt).pipe((0,Mt.U)(i=>this.createUrlTree(NS(i),e.queryParams,e.fragment))).pipe(Jh(i=>{throw i instanceof GC?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Yt([],{[zt]:e}):e;return new zp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Mt.U)(u=>new Yt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,kt.D)(i).pipe(my(u=>{const c=r.children[u],f=mR(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Mt.U)(y=>({segment:y,outlet:u})))}),ra((u,c)=>(u[c.outlet]=c.segment,u),{}),function rk(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((i,u)=>n(i,u,r)):tu.y,vS(1),t?gT(e):Gb(()=>new n0))}())}expandSegment(e,t,r,i,u,c){return(0,kt.D)(r).pipe(my(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(Jh(b=>{if(b instanceof GC)return pt(null);throw b}))),dd(f=>!!f),Jh((f,y)=>{if(f instanceof n0||"EmptyError"===f.name)return vR(t,i,u)?pt(new Yt([],{})):N0(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return _R(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):N0(t):N0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wR(u):this.lineralizeSegments(r,u).pipe((0,cs.z)(c=>{const f=new Yt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:y,remainingSegments:b,positionalParamSegments:S}=jC(t,i,u);if(!f)return N0(t);const M=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?wR(M):this.lineralizeSegments(i,M).pipe((0,cs.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?pt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Mt.U)(M=>(r._loadedConfig=M,new Yt(i,{})))):pt(new Yt(i,{}));const{matched:c,consumedSegments:f,remainingSegments:y}=jC(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,cs.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:V,slicedSegments:B}=HC(t,f,y,F),se=new Yt(V.segments,V.children);if(0===B.length&&se.hasChildren())return this.expandChildren(M,F,se).pipe((0,Mt.U)(rt=>new Yt(f,rt)));if(0===F.length&&0===B.length)return pt(new Yt(f,{}));const De=ka(r)===u;return this.expandSegment(M,se,F,B,De?zt:u,!0).pipe((0,Mt.U)(it=>new Yt(f.concat(it.segments),it.children)))})):N0(t)}getChildConfig(e,t,r){return t.children?pt(new RS(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,cs.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Mt.U)(u=>(t._loadedConfig=u,u))):function c1(n){return PC(wS(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):pt(new RS([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return pt(!0);const u=i.map(c=>{const f=e.get(c);let y;if(function Qk(n){return n&&Xh(n.canLoad)}(f))y=f.canLoad(t,r);else{if(!Xh(f))throw new Error("Invalid CanLoad guard");y=f(t,r)}return Al(y)});return pt(u).pipe(R0(),(0,No.b)(c=>{if(!Kp(c))return;const f=wS(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Mt.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return pt(r);if(i.numberOfChildren>1||!i.children[zt])return l1(e.redirectTo);i=i.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new zp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Li(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Li(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new Yt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function NS(n){const e={};for(const r of Object.keys(n.children)){const u=NS(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function f1(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}class bR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qC{constructor(e,t){this.component=e,this.route=t}}function g1(n,e,t){const r=n._root;return O0(r,e?e._root:null,t,[r.value])}function zC(n,e,t){const r=function y1(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function O0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=_y(e);return n.children.forEach(c=>{(function _1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function v1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wp(n.url,e.url)||!Sl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!SS(n,e)||!Sl(n.queryParams,e.queryParams);default:return!SS(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new bR(r)):(u.data=c.data,u._resolvedData=c._resolvedData),O0(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new qC(f.outlet.component,c))}else c&&k0(e,f,i),i.canActivateChecks.push(new bR(r)),O0(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Li(u,(c,f)=>k0(c,t.getContext(f),i)),i}function k0(n,e,t){const r=_y(n),i=n.value;Li(r,(u,c)=>{k0(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new qC(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class A1{}function CR(n){return new Qi.y(e=>e.error(n))}class x1{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=HC(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,zt);if(null===t)return null;const r=new VC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new pd(r,t),u=new oR(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=sR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=mR(e,u),y=this.processSegmentGroup(f,c,u);if(null===y)return null;r.push(...y)}const i=IR(r);return function R1(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return vR(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!_R(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const V=r.length>0?qx(r).parameters:{};u=new VC(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,SR(e),ka(e),e.component,e,DR(t),TR(t)+r.length,AR(e))}else{const V=jC(t,e,r);if(!V.matched)return null;c=V.consumedSegments,f=V.remainingSegments,u=new VC(c,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,SR(e),ka(e),e.component,e,DR(t),TR(t)+c.length,AR(e))}const y=function P1(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=HC(t,c,f,y.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const V=this.processChildren(y,b);return null===V?null:[new pd(u,V)]}if(0===y.length&&0===S.length)return[new pd(u,[])];const M=ka(e)===i,F=this.processSegment(y,b,S,M?zt:i);return null===F?null:[new pd(u,F)]}}function N1(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function IR(n){const e=[],t=new Set;for(const r of n){if(!N1(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=IR(r.children);e.push(new pd(r.value,i))}return e.filter(r=>!t.has(r))}function DR(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function TR(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function SR(n){return n.data||{}}function AR(n){return n.resolve||{}}function MR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function OS(n){return $r(e=>{const t=n(e);return t?(0,kt.D)(t).pipe((0,Mt.U)(()=>e)):pt(e)})}class j1 extends class B1{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const kS=new p.OlP("ROUTES");class xR{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Mt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new RS(Gx(c.injector.get(kS,void 0,p.XFs.Self|p.XFs.Optional)).map(PS),c)}),Jh(u=>{throw t._loader$=void 0,u}));return t._loader$=new nk(i,()=>new cd.x).pipe(Lx()),t._loader$}loadModuleFactory(e){return Al(e()).pipe((0,cs.z)(t=>t instanceof p.YKP?pt(t):(0,kt.D)(this.compiler.compileModuleAsync(t))))}}class $1{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function G1(n){throw n}function q1(n,e,t){return e.parse("/")}function RR(n,e){return pt(null)}const z1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},W1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oo=(()=>{class n{constructor(t,r,i,u,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cd.x,this.errorHandler=G1,this.malformedUriErrorHandler=q1,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RR,afterPreactivation:RR},this.urlHandlingStrategy=new $1,this.routeReuseStrategy=new j1,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(p.h0i),this.console=c.get(p.c2e);const M=c.get(p.R0b);this.isNgZoneEnabled=M instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function vk(){return new zp(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new xR(c,f,F=>this.triggerEvent(new Ux(F)),F=>this.triggerEvent(new Bx(F))),this.routerState=iR(this.currentUrlTree,this.rootComponentType),this.transitions=new Iu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Er(i=>0!==i.id),(0,Mt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$r(i=>{let u=!1,c=!1;return pt(i).pipe((0,No.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$r(f=>{const y=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return PR(f.source)&&(this.browserUrlTree=f.extractedUrl),pt(f).pipe($r(M=>{const F=this.transitions.getValue();return r.next(new ES(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?gy.E:Promise.resolve(M)}),function p1(n,e,t,r){return $r(i=>function d1(n,e,t,r,i){return new h1(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Mt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,No.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function O1(n,e,t,r,i){return(0,cs.z)(u=>function M1(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new x1(n,e,t,r,i,u).recognize();return null===c?CR(new A1):pt(c)}catch(c){return CR(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Mt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,No.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(V,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new ok(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:V,source:B,restoredState:se,extras:De}=f,Ge=new ES(F,this.serializeUrl(V),B,se);r.next(Ge);const it=iR(V,this.rootComponentType).snapshot;return pt(Object.assign(Object.assign({},f),{targetSnapshot:it,urlAfterRedirects:V,extras:Object.assign(Object.assign({},De),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),gy.E}),OS(f=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:V}}=f;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!V})}),(0,No.b)(f=>{const y=new ak(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,Mt.U)(f=>Object.assign(Object.assign({},f),{guards:g1(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function E1(n,e){return(0,cs.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?pt(Object.assign(Object.assign({},t),{guardsResult:!0})):function w1(n,e,t,r){return(0,kt.D)(n).pipe((0,cs.z)(i=>function S1(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?pt(u.map(f=>{const y=zC(f,e,i);let b;if(function e1(n){return n&&Xh(n.canDeactivate)}(y))b=Al(y.canDeactivate(n,e,t,r));else{if(!Xh(y))throw new Error("Invalid CanDeactivate guard");b=Al(y(n,e,t,r))}return b.pipe(dd())})).pipe(R0()):pt(!0)}(i.component,i.route,t,e,r)),dd(i=>!0!==i,!0))}(c,r,i,n).pipe((0,cs.z)(f=>f&&function Yk(n){return"boolean"==typeof n}(f)?function b1(n,e,t,r){return(0,kt.D)(e).pipe(my(i=>li(function I1(n,e){return null!==n&&e&&e(new dk(n)),pt(!0)}(i.route.parent,r),function C1(n,e){return null!==n&&e&&e(new fk(n)),pt(!0)}(i.route,r),function T1(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function m1(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>kx(()=>pt(c.guards.map(y=>{const b=zC(y,c.node,t);let S;if(function Xk(n){return n&&Xh(n.canActivateChild)}(b))S=Al(b.canActivateChild(r,n));else{if(!Xh(b))throw new Error("Invalid CanActivateChild guard");S=Al(b(r,n))}return S.pipe(dd())})).pipe(R0())));return pt(u).pipe(R0())}(n,i.path,t),function D1(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const i=r.map(u=>kx(()=>{const c=zC(u,e,t);let f;if(function Jk(n){return n&&Xh(n.canActivate)}(c))f=Al(c.canActivate(e,n));else{if(!Xh(c))throw new Error("Invalid CanActivate guard");f=Al(c(e,n))}return f.pipe(dd())}));return pt(i).pipe(R0())}(n,i.route,t))),dd(i=>!0!==i,!0))}(r,u,n,e):pt(f)),(0,Mt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,No.b)(f=>{if(Kp(f.guardsResult)){const b=wS(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const y=new uk(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Er(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),OS(f=>{if(f.guards.canActivateChecks.length)return pt(f).pipe((0,No.b)(y=>{const b=new lk(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),$r(y=>{let b=!1;return pt(y).pipe(function k1(n,e){return(0,cs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pt(t);let u=0;return(0,kt.D)(i).pipe(my(c=>function F1(n,e,t,r){return function L1(n,e,t,r){const i=MR(n);if(0===i.length)return pt({});const u={};return(0,kt.D)(i).pipe((0,cs.z)(c=>function V1(n,e,t,r){const i=zC(n,e,r);return Al(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,No.b)(f=>{u[c]=f}))),vS(1),(0,cs.z)(()=>MR(u).length===i.length?pt(u):gy.E))}(n._resolve,n,e,r).pipe((0,Mt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),sR(n,t).resolve),null)))}(c.route,r,n,e)),(0,No.b)(()=>u++),vS(1),(0,cs.z)(c=>u===i.length?pt(t):gy.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,No.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,No.b)(y=>{const b=new ck(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),OS(f=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:V}}=f;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!V})}),(0,Mt.U)(f=>{const y=function Lk(n,e,t){const r=A0(n,e._root,t?t._root:void 0);return new rR(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:y})}),(0,No.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Mt.U)(r=>(new Kk(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,No.b)({next(){u=!0},complete(){u=!0}}),function ik(n){return(0,ur.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Jh(f=>{if(c=!0,function mk(n){return n&&n[Hx]}(f)){const y=Kp(f.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Vx(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PR(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new sk(i.id,this.serializeUrl(i.extractedUrl),f);r.next(y);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return gy.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gR(t),this.config=t.map(PS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,b=i||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let M=null;switch(f){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function Bk(n,e,t,r,i){if(0===t.length)return AS(e.root,e.root,e.root,r,i);const u=function jk(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lR(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Li(u.outlets,(y,b)=>{f[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new lR(t,e,r)}(t);if(u.toRoot())return AS(e.root,e.root,new Yt([],{}),r,i);const c=function Hk(n,e,t){if(n.isAbsolute)return new MS(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new MS(u,u===e.root,0)}const r=UC(n.commands[0])?0:1;return function $k(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new MS(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?BC(c.segmentGroup,c.index,u.commands):cR(c.segmentGroup,c.index,u.commands);return AS(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Kp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function K1(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},z1):!1===r?Object.assign({},W1):r,Kp(t))return Wx(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Wx(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new D0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,y;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((B,se)=>{b=B,S=se});const F=++this.navigationId;let V;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),V=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):V=0,this.setTransition({id:F,targetPageId:V,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(B=>Promise.reject(B))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Vx(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function PR(n){return"imperative"!==n}class NR{}class OR{preload(e,t){return pt(null)}}let kR=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new xR(i,r,y=>t.triggerEvent(new Ux(y)),y=>t.triggerEvent(new Bx(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Er(t=>t instanceof D0),my(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,kt.D)(i).pipe((0,na.J)(),(0,Mt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?pt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,cs.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Oo),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(NR))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),VS=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ES?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof D0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new jx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Zp=new p.OlP("ROUTER_CONFIGURATION"),FR=new p.OlP("ROUTER_FORROOT_GUARD"),J1=[Ee,{provide:Qx,useClass:Jx},{provide:Oo,useFactory:function rF(n,e,t,r,i,u,c={},f,y){const b=new Oo(null,n,e,t,r,i,Gx(u));return f&&(b.urlHandlingStrategy=f),y&&(b.routeReuseStrategy=y),function iF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[Qx,P0,Ee,p.zs3,p.Sil,kS,Zp,[class H1{},new p.FiY],[class U1{},new p.FiY]]},P0,{provide:vy,useFactory:function sF(n){return n.routerState.root},deps:[Oo]},kR,OR,class Q1{preload(e,t){return t().pipe(Jh(()=>pt(null)))}},{provide:Zp,useValue:{enableTracing:!1}}];function X1(){return new p.PXZ("Router",Oo)}let LR=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[J1,VR(t),{provide:FR,useFactory:nF,deps:[[Oo,new p.FiY,new p.tp0]]},{provide:Zp,useValue:r||{}},{provide:pe,useFactory:tF,deps:[oe,[new p.tBr(Ke),new p.FiY],Zp]},{provide:VS,useFactory:eF,deps:[Oo,Ll,Zp]},{provide:NR,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:OR},{provide:p.PXZ,multi:!0,useFactory:X1},[US,{provide:p.ip1,multi:!0,useFactory:oF,deps:[US]},{provide:UR,useFactory:aF,deps:[US]},{provide:p.tb,multi:!0,useExisting:UR}]]}}static forChild(t){return{ngModule:n,providers:[VR(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(FR,8),p.LFG(Oo,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function eF(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new VS(n,e,t)}function tF(n,e,t={}){return t.useHash?new Te(n,e):new Je(n,e)}function nF(n){return"guarded"}function VR(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:kS,multi:!0,useValue:n}]}let US=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new cd.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(Oo),c=this.injector.get(Zp);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Zp),i=this.injector.get(kR),u=this.injector.get(VS),c=this.injector.get(Oo),f=this.injector.get(p.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function oF(n){return n.appInitializer.bind(n)}function aF(n){return n.bootstrapListener.bind(n)}const UR=new p.OlP("Router Initializer"),BR="firebasestorage.googleapis.com",jR="storageBucket";class fr extends yt.ZR{constructor(e,t){super(BS(e),`Firebase Storage: ${t} (${BS(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fr.prototype)}_codeEquals(e){return BS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function BS(n){return"storage/"+n}function jS(){return new fr("unknown","An unknown error occurred, please check the error payload for server response.")}function HR(){return new fr("canceled","User canceled the upload/download.")}function $R(){return new fr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function wy(n){return new fr("invalid-argument",n)}function GR(){return new fr("app-deleted","The Firebase app was deleted.")}function qR(n){return new fr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function F0(n,e){return new fr("invalid-format","String does not match format '"+n+"': "+e)}function L0(n){throw new fr("internal-error","Internal error: "+n)}class ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ds.makeFromUrl(e,t)}catch(i){return new ds(e,"")}if(""===r.path)return r;throw function vF(n){return new fr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(ze){ze.path_=decodeURIComponent(ze.path)}const M=t.replace(/[.]/g,"\\."),rt=[{regex:f,indices:{bucket:1,path:3},postModify:function u(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===BR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let ze=0;ze<rt.length;ze++){const At=rt[ze],Pt=At.regex.exec(e);if(Pt){let Sr=Pt[At.indices.path];Sr||(Sr=""),r=new ds(Pt[At.indices.bucket],Sr),At.postModify(r);break}}if(null==r)throw function _F(n){return new fr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class CF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function WC(n){return"string"==typeof n||n instanceof String}function zR(n){return HS()&&n instanceof Blob}function HS(){return"undefined"!=typeof Blob}function $S(n,e,t,r){if(r<e)throw wy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wy(`Invalid value for '${n}'. Expected ${t} or less.`)}function gd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function WR(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ef=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(ef||(ef={})),ef))();class MF{constructor(e,t,r,i,u,c,f,y,b,S,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=S,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,V)=>{this.resolve_=F,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function TF(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==f){const y=jS();y.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,y):y)}else c(i.canceled?this.appDelete_?GR():HR():function yF(){return new fr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new KC(!1,null,!0)):this.backoffId_=function IF(n,e,t){let r=1,i=null,u=null,c=!1,f=0;function y(){return 2===f}let b=!1;function S(...De){b||(b=!0,e.apply(null,De))}function M(De){i=setTimeout(()=>{i=null,n(V,y())},De)}function F(){u&&clearTimeout(u)}function V(De,...Ge){if(b)return void F();if(De)return F(),void S.call(null,De,...Ge);if(y()||c)return F(),void S.call(null,De,...Ge);let rt;r<64&&(r*=2),1===f?(f=2,rt=0):rt=1e3*(r+Math.random()),M(rt)}let B=!1;function se(De){B||(B=!0,F(),!b&&(null!==i?(De||(f=2),clearTimeout(i),M(0)):De||(f=1)))}return M(0),u=setTimeout(()=>{c=!0,se(!0)},t),se}((r,i)=>{if(i)return void r(!1,new KC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const f=u.getErrorCode()===ef.NO_ERROR,y=u.getStatus();if(!f||this.isRetryStatusCode_(y)){const S=u.getErrorCode()===ef.ABORT;return void r(!1,new KC(!1,null,S))}const b=-1!==this.successCodes_.indexOf(y);r(!0,new KC(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function DF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||u}}class KC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function FF(...n){const e=function kF(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(HS())return new Blob(n);throw new fr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ko={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class GS{constructor(e,t){this.data=e,this.contentType=t||null}}function qS(n,e){switch(n){case ko.RAW:return new GS(KR(e));case ko.BASE64:case ko.BASE64URL:return new GS(ZR(n,e));case ko.DATA_URL:return new GS(function BF(n){const e=new YR(n);return e.base64?ZR(ko.BASE64,e.rest):function UF(n){let e;try{e=decodeURIComponent(n)}catch(t){throw F0(ko.DATA_URL,"Malformed data URL.")}return KR(e)}(e.rest)}(e),function jF(n){return new YR(n).contentType}(e))}throw jS()}function KR(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ZR(n,e){switch(n){case ko.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw F0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ko.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw F0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function VF(n){return atob(n)}(e)}catch(i){throw F0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class YR{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw F0(ko.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function HF(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ml{constructor(e,t){let r=0,i="";zR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(zR(this.data_)){const i=function LF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ml(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ml(r,!0)}}static getBlob(...e){if(HS()){const t=e.map(r=>r instanceof Ml?r.data_:r);return new Ml(FF.apply(null,t))}{const t=e.map(c=>WC(c)?qS(ko.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[u++]=c[f]}),new Ml(i,!0)}}uploadData(){return this.data_}}function zS(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function AF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function QR(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function qF(n,e){return e}class Ps{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||qF}}let ZC=null;function V0(){if(ZC)return ZC;const n=[];n.push(new Ps("bucket")),n.push(new Ps("generation")),n.push(new Ps("metageneration")),n.push(new Ps("name","fullPath",!0));const t=new Ps("name");t.xform=function e(u,c){return function zF(n){return!WC(n)||n.length<2?n:QR(n)}(c)},n.push(t);const i=new Ps("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ps("timeCreated")),n.push(new Ps("updated")),n.push(new Ps("md5Hash",null,!0)),n.push(new Ps("cacheControl",null,!0)),n.push(new Ps("contentDisposition",null,!0)),n.push(new Ps("contentEncoding",null,!0)),n.push(new Ps("contentLanguage",null,!0)),n.push(new Ps("contentType",null,!0)),n.push(new Ps("metadata","customMetadata",!0)),ZC=n,ZC}function JR(n,e,t){const r=zS(e);return null===r?null:function KF(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function WF(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ds(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function WS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const XR="prefixes";class xl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rl(n){if(!n)throw jS()}function YC(n,e){return function t(r,i){const u=JR(n,i,e);return Rl(null!==u),u}}function by(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function gF(){return new fr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function pF(){return new fr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function fF(n){return new fr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function mF(n){return new fr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function U0(n){const e=by(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function hF(n){return new fr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function tP(n,e,t){const i=gd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new xl(i,"GET",YC(n,t),c);return f.errorHandler=U0(e),f}function eL(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const f=gd(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,S=new xl(f,"GET",function JF(n,e){return function t(r,i){const u=function QF(n,e,t){const r=zS(t);return null===r?null:function YF(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[XR])for(const i of t[XR]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new ds(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new ds(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Rl(null!==u),u}}(n,e.bucket),b);return S.urlParams=u,S.errorHandler=by(e),S}function rP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class QC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function KS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Rl(!1)}return Rl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const uL={STATE_CHANGED:"state_changed"},Ns={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ZS(n){switch(n){case"running":case"pausing":case"canceling":return Ns.RUNNING;case"paused":return Ns.PAUSED;case"success":return Ns.SUCCESS;case"canceled":return Ns.CANCELED;default:return Ns.ERROR}}class lL{constructor(e,t,r){if(function SF(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Cy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class dL extends class cL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ef.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ef.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ef.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw L0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw L0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw L0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw L0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw L0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Du(){return new dL}class aP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=V0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function sL(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=rP(e,r,i),f={name:c.fullPath},y=gd(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=WS(c,t),B=new xl(y,"POST",function V(se){let De;KS(se);try{De=se.getResponseHeader("X-Goog-Upload-URL")}catch(Ge){Rl(!1)}return Rl(WC(De)),De},n.maxUploadRetryTime);return B.urlParams=f,B.headers=S,B.body=M,B.errorHandler=by(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Du,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function oL(n,e,t,r){const y=new xl(t,"POST",function u(b){const S=KS(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Rl(!1)}M||Rl(!1);const F=Number(M);return Rl(!isNaN(F)),new QC(F,r.size(),"final"===S)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=by(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Du,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new QC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function aL(n,e,t,r,i,u,c,f){const y=new QC(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw function wF(){return new fr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=y.total-y.current;let S=b;i>0&&(S=Math.min(S,i));const M=y.current,B={"X-Goog-Upload-Command":S===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},se=r.slice(M,M+S);if(null===se)throw $R();const rt=new xl(t,"POST",function De(ze,At){const Pt=KS(ze,["active","final"]),Jt=y.current+S,Sr=r.size();let Vo;return Vo="final"===Pt?YC(e,u)(ze,At):null,new QC(Jt,Sr,"final"===Pt,Vo)},e.maxUploadRetryTime);return rt.headers=B,rt.body=se.uploadData(),rt.progressCallback=f||null,rt.errorHandler=by(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const f=this._ref.storage._makeRequest(c,Du,i,u);this._request=f,f.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=tP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Du,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function iP(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function f(){let rt="";for(let ze=0;ze<2;ze++)rt+=Math.random().toString().slice(2);return rt}();c["Content-Type"]="multipart/related; boundary="+y;const b=rP(e,r,i),S=WS(b,t),V=Ml.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===V)throw $R();const B={name:b.fullPath},se=gd(u,n.host,n._protocol),Ge=n.maxUploadRetryTime,it=new xl(se,"POST",YC(n,t),Ge);return it.urlParams=B,it.headers=c,it.body=V.uploadData(),it.errorHandler=by(e),it}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Du,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=HR(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ZS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new lL(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ZS(this._state)){case Ns.SUCCESS:Cy(this._resolve.bind(null,this.snapshot))();break;case Ns.CANCELED:case Ns.ERROR:Cy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ZS(this._state)){case Ns.RUNNING:case Ns.PAUSED:e.next&&Cy(e.next.bind(e,this.snapshot))();break;case Ns.SUCCESS:e.complete&&Cy(e.complete.bind(e))();break;default:e.error&&Cy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Yp{constructor(e,t){this._service=e,this._location=t instanceof ds?t:ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yp(e,t)}get root(){const e=new ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QR(this._location.path)}get storage(){return this._service}get parent(){const e=function $F(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ds(this._location.bucket,e);return new Yp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw qR(e)}}function lP(n,e,t){return YS.apply(this,arguments)}function YS(){return YS=(0,me.Z)(function*(n,e,t){const i=yield cP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield lP(n,e,i.nextPageToken))}),YS.apply(this,arguments)}function cP(n,e){null!=e&&"number"==typeof e.maxResults&&$S("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Du)}function CL(n){n._throwIfRoot("getDownloadURL");const e=function tL(n,e,t){const i=gd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new xl(i,"GET",function XF(n,e){return function t(r,i){const u=JR(n,i,e);return Rl(null!==u),function ZF(n,e,t,r){const i=zS(e);if(null===i||!WC(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return gd("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+WR({alt:"media",token:b})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=U0(e),f}(n.storage,n._location,V0());return n.storage.makeRequestWithTokens(e,Du).then(t=>{if(null===t)throw function bF(){return new fr("no-download-url","The given file does not have any download URLs.")}();return t})}function dP(n,e){const t=function GF(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ds(n._location.bucket,t);return new Yp(n.storage,r)}function hP(n,e){if(n instanceof QS){const t=n;if(null==t._bucket)throw function EF(){return new fr("no-default-bucket","No default bucket found. Did you set the '"+jR+"' property when initializing the app?")}();const r=new Yp(t,t._bucket);return null!=e?hP(r,e):r}return void 0!==e?dP(n,e):n}function SL(n,e){if(e&&function DL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof QS)return function TL(n,e){return new Yp(n,e)}(n,e);throw wy("To use ref(service, url), the first argument must be a Storage instance.")}return hP(n,e)}function fP(n,e){const t=null==e?void 0:e[jR];return null==t?null:ds.makeFromBucketSpec(t,n)}class QS{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=BR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ds.makeFromBucketSpec(i,this._host):fP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ds.makeFromBucketSpec(this._url,e):fP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$S("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$S("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new CF(GR());{const u=function OF(n,e,t,r,i,u){const c=WR(n.urlParams),f=n.url+c,y=Object.assign({},n.headers);return function PF(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function xF(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function RF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function NF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new MF(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const pP="@firebase/storage";function yP(n,e){return SL(n=(0,yt.m9)(n),e)}function VL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new QS(t,r,i,e,wr.SDK_VERSION)}!function UL(){(0,wr._registerComponent)(new Mi.wA("storage",VL,"PUBLIC").setMultipleInstances(!0)),(0,wr.registerVersion)(pP,"0.9.6",""),(0,wr.registerVersion)(pP,"0.9.6","esm2017")}();class JC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class _P{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new JC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new JC(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new JC(c,this,this._ref)):{next:t.next?c=>t.next(new JC(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class vP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new md(e,this._service))}get items(){return this._delegate.items.map(e=>new md(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class md{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function FL(n,e){return dP(n,e)}(this._delegate,e);return new md(t,this.storage)}get root(){return new md(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new md(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new _P(function ML(n,e,t){return function _L(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new aP(n,new Ml(e),t)}(n=(0,yt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ko.RAW,r){this._throwIfRoot("putString");const i=qS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new _P(new aP(this._delegate,new Ml(i.data,!0),u),this)}listAll(){return function NL(n){return function EL(n){const e={prefixes:[],items:[]};return lP(n,e).then(()=>e)}(n=(0,yt.m9)(n))}(this._delegate).then(e=>new vP(e,this.storage))}list(e){return function PL(n,e){return cP(n=(0,yt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new vP(t,this.storage))}getMetadata(){return function xL(n){return function wL(n){n._throwIfRoot("getMetadata");const e=tP(n.storage,n._location,V0());return n.storage.makeRequestWithTokens(e,Du)}(n=(0,yt.m9)(n))}(this._delegate)}updateMetadata(e){return function RL(n,e){return function bL(n,e){n._throwIfRoot("updateMetadata");const t=function nL(n,e,t,r){const u=gd(e.fullServerUrl(),n.host,n._protocol),f=WS(t,r),b=n.maxOperationRetryTime,S=new xl(u,"PATCH",YC(n,r),b);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=f,S.errorHandler=U0(e),S}(n.storage,n._location,e,V0());return n.storage.makeRequestWithTokens(t,Du)}(n=(0,yt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function OL(n){return CL(n=(0,yt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function kL(n){return function IL(n){n._throwIfRoot("deleteObject");const e=function rL(n,e){const r=gd(e.fullServerUrl(),n.host,n._protocol),f=new xl(r,"DELETE",function c(y,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=U0(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Du)}(n=(0,yt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw qR(e)}}class EP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(wP(e))throw wy("ref() expected a child path but got a URL, use refFromURL instead.");return new md(yP(this._delegate,e),this)}refFromURL(e){if(!wP(e))throw wy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ds.makeFromUrl(e,this._delegate.host)}catch(t){throw wy("refFromUrl() expected a valid full URL but got an invalid one.")}return new md(yP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function LL(n,e,t,r={}){!function AL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,yt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function wP(n){return/^[A-Za-z]+:\/\//.test(n)}function $L(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new EP(t,r)}function bP(n){const e=function qL(n){return new Qi.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function lF(n,e=pf.z){return(0,ur.e)((t,r)=>{let i=null,u=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function y(){const b=c+n,S=e.now();if(S<b)return i=this.schedule(void 0,b-S),void r.add(i);f()}t.subscribe((0,$n.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function XC(n){return{getDownloadURL:()=>pt(void 0).pipe(Ht.fc,$r(()=>n.getDownloadURL()),Ht.iC),getMetadata:()=>pt(void 0).pipe(Ht.fc,$r(()=>n.getMetadata()),Ht.iC),delete:()=>(0,kt.D)(n.delete()),child:e=>XC(n.child(e)),updateMetadata:e=>(0,kt.D)(n.updateMetadata(e)),put:(e,t)=>bP(n.put(e,t)),putString:(e,t,r)=>bP(n.putString(e,t,r)),list:e=>(0,kt.D)(n.list(e)),listAll:()=>(0,kt.D)(n.listAll())}}!function GL(n){const e={TaskState:Ns,TaskEvent:uL,StringFormat:ko,Storage:EP,Reference:md};n.INTERNAL.registerComponent(new Mi.wA("storage-compat",$L,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(lr.Z);const zL=new p.OlP("angularfire2.storageBucket"),WL=new p.OlP("angularfire2.storage.maxUploadRetryTime"),KL=new p.OlP("angularfire2.storage.maxOperationRetryTime"),ZL=new p.OlP("angularfire2.storage.use-emulator");let CP=(()=>{class n{constructor(t,r,i,u,c,f,y,b,S,M){const F=(0,On.on)(t,c,r);this.storage=(0,On.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const V=c.runOutsideAngular(()=>F.storage(i||void 0)),B=S;return B&&V.useEmulator(...B),y&&V.setMaxUploadRetryTime(y),b&&V.setMaxOperationRetryTime(b),V},[y,b])}ref(t){return XC(this.storage.ref(t))}refFromURL(t){return XC(this.storage.refFromURL(t))}upload(t,r,i){return XC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(On.Dh),p.LFG(On.xv,8),p.LFG(zL,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ht.HU),p.LFG(WL,8),p.LFG(KL,8),p.LFG(ZL,8),p.LFG(_e,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),QL=(()=>{class n{constructor(){hy.Z.registerVersion("angularfire",Ht.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[CP],imports:[YL]}),n})();function JL(n,e){1&n&&(p.TgZ(0,"div",30)(1,"div",31),p._uU(2,"Uploading certificate..."),p.qZA()())}function XL(n,e){if(1&n&&p._UZ(0,"img",32),2&n){const t=p.oxw();p.s9C("src",t.url,p.LSH)}}function eV(n,e){1&n&&(p.TgZ(0,"div")(1,"h5"),p._uU(2,"Drag files here to upload"),p.qZA(),p.TgZ(3,"p",33),p._uU(4,"or "),p.TgZ(5,"b",34),p._uU(6,"browse"),p.qZA(),p._uU(7," to choose files."),p.qZA()())}function tV(n,e){if(1&n&&(p.TgZ(0,"span",35),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.Q6J("ngClass",t.success?"text-success":"text-danger"),p.xp6(1),p.Oqu(t.alert)}}let nV=(()=>{class n{constructor(t,r){this.afStorage=r,this.eventId=1,this.success=!1,this.loading=!1,this.itemsCollection=t.collection("certificate")}ngOnInit(){}onSelectFile(t){var r=this;return(0,me.Z)(function*(){if(r.event=t,t.target.files&&t.target.files[0]){var i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=u=>{r.url=u.target.result}}})()}uploadImage(){var t=this;return(0,me.Z)(function*(){if(!t.aadharNumber)return t.alert="*Please enter aadhar number",void t.clearError();if(12!=t.aadharNumber.toString().length)return t.alert="*Please enter valid aadhar number",void t.clearError();if(!t.event)return t.alert="*Please select certificate to upload",void t.clearError();if(t.loading=!0,t.event.target.files&&t.event.target.files[0]){const i=t.event.target.files[0],u=new FileReader;u.onload=c=>t.imageSrc=u.result,u.readAsDataURL(i)}const r=Math.random().toString(36).substring(2);t.ref=t.afStorage.ref(r),t.task=t.ref.put(t.event.target.files[0]).then(i=>{}),yield t.task,t.ref.getDownloadURL().subscribe(i=>{t.image=i,t.addDataToDB()})})()}addDataToDB(){this.itemsCollection.add({aadhaarNumber:this.aadharNumber,certificateUrl:this.image,eventId:this.eventId}).then(r=>{r&&(this.loading=!1,this.aadharNumber=null,this.eventId=1,this.image=null,this.url=null,this.alert="Certificate Uploaded successfully",this.success=!0,this.clearError())},r=>{console.log("Fail to add data",r),this.alert="*Unable to upload certificate. Please try again later."})}clearError(){setTimeout(()=>{this.alert="",this.success=!1},2e3)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(KT),p.Y36(CP))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-upload-certificate"]],decls:49,vars:6,consts:[["class","loading",4,"ngIf"],[1,"container","bg-border","mt-20"],[1,"bold","text-danger"],[1,"text-danger"],[1,"shadow"],[1,"upload-title","mt-20"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"row","mt-20"],[1,"col-12","col-lg-6","margin-auto","title"],[1,"col-12","col-lg-6"],["type","text",1,"box-border",3,"ngModel","ngModelChange"],[1,"pointer"],[1,"box-border",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","'4"],["value","5"],[1,"upload-file"],[1,"plus-border"],["type","file","id","fileElem","multiple","","accept","image/*",3,"change"],[1,"plus-icon"],[1,"uploadContainer"],[1,"uploadDropzone"],["class","url-img",3,"src",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"row"],[1,"col-12","text-center"],["type","button",1,"btn","btn-blue",3,"click"],[1,"loading"],[1,"loading-text"],[1,"url-img",3,"src"],[1,"text-muted"],[2,"color","#0586d7"],[3,"ngClass"]],template:function(t,r){1&t&&(p.YNc(0,JL,3,0,"div",0),p.TgZ(1,"section",1)(2,"div",2),p._uU(3,"*Note"),p.qZA(),p.TgZ(4,"div",3),p._uU(5,"1. Upload Clear photo or certificate make sure that all letters are visible"),p.qZA(),p.TgZ(6,"div",3),p._uU(7,"2. File type must be in (ipg/jpeg/png)."),p.qZA(),p.TgZ(8,"div",3),p._uU(9,"3. File size must be below amh"),p.qZA(),p.TgZ(10,"div",4)(11,"div",5),p._uU(12,"Upload certificate"),p.qZA(),p.TgZ(13,"div",6)(14,"div",7)(15,"div",8),p._uU(16," *Aadhar card number "),p.qZA(),p.TgZ(17,"div",9)(18,"input",10),p.NdJ("ngModelChange",function(u){return r.aadharNumber=u}),p.qZA()()(),p.TgZ(19,"div",7)(20,"div",8),p._uU(21," *Event Name "),p.qZA(),p.TgZ(22,"div",9)(23,"span",11)(24,"select",12),p.NdJ("ngModelChange",function(u){return r.eventId=u}),p.TgZ(25,"option",13),p._uU(26,"Master royal cup 2022"),p.qZA(),p.TgZ(27,"option",14),p._uU(28,"Grand Prix international 2022"),p.qZA(),p.TgZ(29,"option",15),p._uU(30,"State level silambam Tournament"),p.qZA(),p.TgZ(31,"option",16),p._uU(32,"TN open championship 2021"),p.qZA(),p.TgZ(33,"option",17),p._uU(34,"Silimbam Interdistrict 2021"),p.qZA()()()()(),p.TgZ(35,"div",18)(36,"div",19)(37,"input",20),p.NdJ("change",function(u){return r.onSelectFile(u)}),p.qZA(),p.TgZ(38,"div",21),p._uU(39,"+"),p.qZA()(),p.TgZ(40,"div",22)(41,"div",23),p.YNc(42,XL,1,1,"img",24),p.YNc(43,eV,8,0,"div",25),p.qZA()()(),p.YNc(44,tV,2,2,"span",26),p.TgZ(45,"div",27)(46,"div",28)(47,"button",29),p.NdJ("click",function(){return r.uploadImage()}),p._uU(48,"Submit"),p.qZA()()()()()()),2&t&&(p.Q6J("ngIf",r.loading),p.xp6(18),p.Q6J("ngModel",r.aadharNumber),p.xp6(6),p.Q6J("ngModel",r.eventId),p.xp6(18),p.Q6J("ngIf",r.url),p.xp6(1),p.Q6J("ngIf",!r.url),p.xp6(1),p.Q6J("ngIf",r.alert))},directives:[Jn,E0,JT,xC,RC,gS,yS,ji],styles:['@charset "UTF-8";.drop-it-hot[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;margin-top:20px;height:186px;margin-left:auto;margin-right:auto;position:relative;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 15px #0000001a;overflow:hidden}.drop-it-hot[_ngcontent-%COMP%]:after{content:"";position:absolute;width:calc(100% - 20px);height:calc(100% - 20px);border:none;border-radius:5px;z-index:0}.drop-it-hot[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;position:absolute;color:var(--accent);background-color:#0586d7;border:3px solid #eae4e4;width:100px;height:100px;top:12px}.circle[_ngcontent-%COMP%]{transition:transform .15s ease-in;z-index:10}.circle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff}.circle[_ngcontent-%COMP%]:before{content:"";background-color:var(--accent);width:130px;height:130px;border-radius:50%;position:absolute;opacity:0;transition:transform .25s ease-in,opacity .2s ease-in;z-index:0}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100px;height:100px;border-radius:50%}.circle[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:.9}.circle[_ngcontent-%COMP%]:hover:before{transform:scale(8);opacity:1}.circle[_ngcontent-%COMP%]:hover:after{border:3px solid white}.circle[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.highlight[_ngcontent-%COMP%]:before{transform:scale(8);opacity:1}.highlight[_ngcontent-%COMP%]:after{border:3px solid white}.highlight[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.choose-files[_ngcontent-%COMP%]{align-self:flex-end;z-index:10}.button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:40px;position:relative;overflow:hidden;top:26px;cursor:pointer}.button-wrapper[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{background-color:#0986d9}.label[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--dark-gray);font-size:18px}.button-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;position:absolute;left:0;top:0;opacity:0}.btn[_ngcontent-%COMP%]{border:none;padding:10px 20px;border-radius:50px;background-color:#0986d9;color:#fff;font-size:16px;cursor:pointer;transition:background-color .2s ease-in}#gallery[_ngcontent-%COMP%]{position:absolute;height:100%;top:0;left:0;z-index:100}#gallery[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:contrast(var(--contrast)) brightness(var(--brightness)) sepia(var(--sepia)) hue-rotate(var(--hue-rotate))}.editor[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:700px;padding:20px;box-sizing:border-box;background-color:#fff;margin-top:-10px;z-index:100;opacity:0;transform:translateY(50px)}.is-visible[_ngcontent-%COMP%]{transition:transform .5s ease-in-out,opacity .5s ease-in-out;opacity:1;transform:translateY(0)}.range-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:20%}.range[_ngcontent-%COMP%]{-webkit-appearance:none;height:2px;border-radius:5px;background:var(--gray);outline:none;padding:0;margin:10px 0}[_ngcontent-%COMP%]::-moz-range-track{background:var(--gray);border:0}input[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-outer{border:0}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-ms-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;left:0;bottom:0;right:0;display:block;height:130px;color:#fff!important;font-size:20px!important;width:100%;margin:auto!important;text-align:center}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required){font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;margin:auto}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:90px;height:90px;border:5px solid #82dff1;border-bottom-color:transparent;animation:spinner 1s linear 0s infinite;margin:auto;border-radius:100%}.loading-text[_ngcontent-%COMP%]{position:relative;bottom:0px;line-height:20px;top:130px;background-color:#222223bf;padding:7px;border-radius:5px;font-weight:700;width:-moz-fit-content;width:fit-content;margin:auto}.uploadDropzone[_ngcontent-%COMP%]{border:thin dashed #aaa;padding:40px;text-align:center;border-radius:5px}.uploadDropzone[_ngcontent-%COMP%]   .cloud[_ngcontent-%COMP%]{font-size:48px;line-height:1;opacity:.5}.uploadMessage[_ngcontent-%COMP%]{margin-top:.5rem}.uploadProgress[_ngcontent-%COMP%]{margin-top:.5rem;background-color:#fff;border:thin solid #aaa;border-radius:3px}.uploadProgress[_ngcontent-%COMP%]:empty{background:none;margin:0;border:0}.uploadProgress[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:relative;background-color:#fff;white-space:nowrap;border-bottom:thin solid #d2d2d2;line-height:35px;padding:0 0 0 10px}.uploadProgress[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]:last-child{border-bottom:0}.uploadProgress[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.uploadProgress[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:block;float:left;white-space:nowrap;max-width:300px;overflow:hidden;text-overflow:ellipsis}.uploadProgress[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{display:block;float:left;white-space:nowrap;color:#aaa;padding-left:5px}.uploadProgress[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]:before{content:"("}.uploadProgress[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]:after{content:")"}.uploadProgress[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:block;float:right;width:180px;margin-top:15px;margin-right:10px}.uploadProgress[_ngcontent-%COMP%]   .deleteAttachment[_ngcontent-%COMP%]{display:block;float:right;padding:0;background-color:transparent!important;border:0!important;background-image:none;line-height:inherit}.deleteAttachment[_ngcontent-%COMP%]:after{content:"\\d7";display:block;line-height:inherit;width:35px;text-align:center;color:#0000004d;font-family:sans-serif;font-size:18px;font-weight:700}.uploadProgress[_ngcontent-%COMP%]   .wrapper.success[_ngcontent-%COMP%]{color:green}.uploadProgress[_ngcontent-%COMP%]   .wrapper.error[_ngcontent-%COMP%]{color:red}.uploadProgress[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%], .uploadProgress[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:none}.plus-border[_ngcontent-%COMP%]{font-size:5rem;color:#fff;margin-top:-33px;background:#0586d7;border-radius:50%;height:70px;margin-right:-10px;width:70px;padding:15px;float:right;cursor:pointer}.plus-icon[_ngcontent-%COMP%]{font-size:42px;padding:0 7px;margin-top:-14px;color:#fff}.plus-border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:4px;position:absolute;height:57px;margin-top:-6px;width:56px;margin-left:-8px;opacity:0}.upload-file[_ngcontent-%COMP%]{width:600px;margin:50px auto}.url-img[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:10px}']}),n})();const IP_firebase={apiKey:"AIzaSyDMfqjZ6Fo4O8dv7Z79pMN64REi7talV5A",authDomain:"vks-trust.firebaseapp.com",projectId:"vks-trust",storageBucket:"vks-trust.appspot.com",messagingSenderId:"15646034500",appId:"1:15646034500:web:00998a1ca3f439a8554a11",measurementId:"G-6CD7LB5R1G"},rV=[{path:"",component:nV},{path:"download-certificate",component:Nx}];let iV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[LR.forRoot(rV),On.hO.initializeApp(IP_firebase),$N,QL],LR]}),n})();class DP{}const yd="*";function TP(n,e=null){return{type:2,steps:n,options:e}}function SP(n){return{type:6,styles:n,offset:null}}function AP(n){Promise.resolve(null).then(n)}class B0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){AP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class MP{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?AP(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Qt=!1;function xP(n){return new p.vHH(3e3,Qt)}function UV(){return"undefined"!=typeof window&&void 0!==window.document}function XS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function tf(n){switch(n.length){case 0:return new B0;case 1:return n[0];default:return new MP(n)}}function RP(n,e,t,r,i={},u={}){const c=[],f=[];let y=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==y,V=F&&b||{};Object.keys(S).forEach(B=>{let se=B,De=S[B];if("offset"!==B)switch(se=e.normalizePropertyName(se,c),De){case"!":De=i[B];break;case yd:De=u[B];break;default:De=e.normalizeStyleValue(B,se,De,c)}V[se]=De}),F||f.push(V),b=V,y=M}),c.length)throw function AV(n){return new p.vHH(3502,Qt)}();return f}function eA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&tA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&tA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&tA(t,"destroy",n)))}}function tA(n,e,t){const r=t.totalTime,u=nA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function nA(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Fo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function PP(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let rA=(n,e)=>!1,NP=(n,e,t)=>[],OP=null;function iA(n){const e=n.parentNode||n.host;return e===OP?null:e}(XS()||"undefined"!=typeof Element)&&(UV()?(OP=(()=>document.documentElement)(),rA=(n,e)=>{for(;e;){if(e===n)return!0;e=iA(e)}return!1}):rA=(n,e)=>n.contains(e),NP=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Qp=null,kP=!1;function FP(n){Qp||(Qp=function jV(){return"undefined"!=typeof document?document.body:null}()||{},kP=!!Qp.style&&"WebkitAppearance"in Qp.style);let e=!0;return Qp.style&&!function BV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Qp.style,!e&&kP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Qp.style)),e}const LP=rA,VP=NP;let UP=(()=>{class n{validateStyleProperty(t){return FP(t)}matchesElement(t,r){return!1}containsElement(t,r){return LP(t,r)}getParentElement(t){return iA(t)}query(t,r,i){return VP(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],y){return new B0(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),sA=(()=>{class n{}return n.NOOP=new UP,n})();const oA="ng-enter",tI="ng-leave",nI="ng-trigger",rI=".ng-trigger",jP="ng-animating",aA=".ng-animating";function Jp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:uA(parseFloat(e[1]),e[2])}function uA(n,e){return"s"===e?1e3*n:n}function iI(n,e,t){return n.hasOwnProperty("duration")?n:function GV(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(xP()),{duration:0,delay:0,easing:""};i=uA(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=uA(parseFloat(y),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function oV(){return new p.vHH(3100,Qt)}()),f=!0),u<0&&(e.push(function aV(){return new p.vHH(3101,Qt)}()),f=!0),f&&e.splice(y,0,xP())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Iy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function nf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Iy(n,t);return t}function $P(n,e,t){return t?e+":"+t+";":""}function GP(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=$P(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=$P(0,WV(t),n.style[t]));n.setAttribute("style",e)}function Pl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=cA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),XS()&&GP(n))}function Xp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=cA(t);n.style[r]=""}),XS()&&GP(n))}function j0(n){return Array.isArray(n)?1==n.length?n[0]:TP(n):n}const lA=new RegExp("{{\\s*(.+?)\\s*}}","g");function qP(n){let e=[];if("string"==typeof n){let t;for(;t=lA.exec(n);)e.push(t[1]);lA.lastIndex=0}return e}function sI(n,e,t){const r=n.toString(),i=r.replace(lA,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function lV(n){return new p.vHH(3003,Qt)}()),f=""),f.toString()});return i==r?n:i}function oI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const zV=/-+([a-z0-9])/g;function cA(n){return n.replace(zV,(...e)=>e[1].toUpperCase())}function WV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Lo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function cV(n){return new p.vHH(3004,Qt)}()}}function zP(n,e){return window.getComputedStyle(n)[e]}function XV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function eU(n,e,t){if(":"==n[0]){const y=function tU(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function IV(n){return new p.vHH(3016,Qt)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function CV(n){return new p.vHH(3015,Qt)}()),e;const i=r[1],u=r[2],c=r[3];e.push(WP(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(WP(c,i))}(r,t,e)):t.push(n),t}const cI=new Set(["true","1"]),dI=new Set(["false","0"]);function WP(n,e){const t=cI.has(n)||dI.has(n),r=cI.has(e)||dI.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?cI.has(n):dI.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?cI.has(e):dI.has(e)),c&&f}}const nU=new RegExp("s*:selfs*,?","g");function dA(n,e,t,r){return new rU(n).build(e,t,r)}class rU{constructor(e){this._driver=e}build(e,t,r){const i=new oU(t);this._resetContextStyleTimingState(i);const u=Lo(this,j0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function hV(){return new p.vHH(3006,Qt)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,b=y.name;b.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,u.push(this.visitState(y,t))}),y.name=b}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function fV(){return new p.vHH(3007,Qt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(hI(f)){const y=f;Object.keys(y).forEach(b=>{qP(y[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(oI(u.values()),t.errors.push(function pV(n,e){return new p.vHH(3008,Qt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Lo(this,j0(e.animation),t);return{type:1,matchers:XV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:eg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Lo(this,r,t)),options:eg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Lo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:eg(e.options)}}visitAnimate(e,t){const r=function uU(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return hA(iI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=hA(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||iI(r,e),hA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:SP({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=SP(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==yd?r.push(c):t.errors.push(function gV(n){return new p.vHH(3002,Qt)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(hI(c)){const f=c,y=f.easing;if(y&&(u=y,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const y=t.collectedStyles[t.currentQuerySelector],b=y[f];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function mV(n,e,t,r,i){return new p.vHH(3010,Qt)}()),S=!1),u=b.startTime),S&&(y[f]={startTime:u,endTime:i}),t.options&&function qV(n,e,t){const r=e.params||{},i=qP(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function uV(n){return new p.vHH(3001,Qt)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function yV(){return new p.vHH(3011,Qt)}()),r;let u=0;const c=[];let f=!1,y=!1,b=0;const S=e.steps.map(Ge=>{const it=this._makeStyleAst(Ge,t);let rt=null!=it.offset?it.offset:function aU(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(hI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(hI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(it.styles),ze=0;return null!=rt&&(u++,ze=it.offset=rt),y=y||ze<0||ze>1,f=f||ze<b,b=ze,c.push(ze),it});y&&t.errors.push(function _V(){return new p.vHH(3012,Qt)}()),f&&t.errors.push(function vV(){return new p.vHH(3200,Qt)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function EV(){return new p.vHH(3202,Qt)}()):0==u&&(F=1/(M-1));const V=M-1,B=t.currentTime,se=t.currentAnimateTimings,De=se.duration;return S.forEach((Ge,it)=>{const rt=F>0?it==V?1:F*it:c[it],ze=rt*De;t.currentTime=B+se.delay+ze,se.duration=ze,this._validateStyleAst(Ge,t),Ge.offset=rt,r.styles.push(Ge)}),r}visitReference(e,t){return{type:8,animation:Lo(this,j0(e.animation),t),options:eg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:eg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:eg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function iU(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(nU,"")),n=n.replace(/@\*/g,rI).replace(/@\w+/g,t=>rI+"-"+t.substr(1)).replace(/:animating/g,aA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Fo(t.collectedStyles,t.currentQuerySelector,{});const f=Lo(this,j0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:eg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function wV(){return new p.vHH(3013,Qt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:iI(e.timings,t.errors,!0);return{type:12,animation:Lo(this,j0(e.animation),t),timings:r,options:null}}}class oU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hI(n){return!Array.isArray(n)&&"object"==typeof n}function eg(n){return n?(n=Iy(n)).params&&(n.params=function sU(n){return n?Iy(n):null}(n.params)):n={},n}function hA(n,e,t){return{duration:n,delay:e,easing:t}}function fA(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class fI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const dU=new RegExp(":enter","g"),fU=new RegExp(":leave","g");function pA(n,e,t,r,i,u={},c={},f,y,b=[]){return(new pU).buildKeyframes(n,e,t,r,i,u,c,f,y,b)}class pU{buildKeyframes(e,t,r,i,u,c,f,y,b,S=[]){b=b||new fI;const M=new gA(e,t,b,i,u,S,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),Lo(this,r,M);const F=M.timelines.filter(V=>V.containsAnimation());if(Object.keys(f).length){let V;for(let B=F.length-1;B>=0;B--){const se=F[B];if(se.element===t){V=se;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([f],null,M.errors,y)}return F.length?F.map(V=>V.buildKeyframes()):[fA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Jp(r.duration):null,f=null!=r.delay?Jp(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,f);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Lo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pI);const c=Jp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Lo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Jp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Lo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return iI(t.params?sI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Jp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pI);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),Lo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const M=S.currentTime;Lo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const pI={};class gA{constructor(e,t,r,i,u,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new gI(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Jp(r.duration)),null!=r.delay&&(i.delay=Jp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=sI(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new gA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=pI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new gU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(dU,"."+this._enterClassName)).replace(fU,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!u&&0==f.length&&c.push(function bV(n){return new p.vHH(3014,Qt)}()),f}}class gI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||yd,this._currentKeyframe[t]=yd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function mU(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=yd})):nf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const y=sI(c[f],u,r);this._pendingStyles[f]=y,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:yd),this._updateStyle(f,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const b=nf(f,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==yd&&t.add(S)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?oI(e.values()):[],c=t.size?oI(t.values()):[];if(r){const f=i[0],y=Iy(f);f.offset=0,y.offset=1,i=[f,y]}return fA(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class gU extends gI{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,y=nf(e[0],!1);y.offset=0,u.push(y);const b=nf(e[0],!1);b.offset=YP(f),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=nf(e[M],!1);F.offset=YP((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return fA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function YP(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class mA{}class yU extends mA{normalizePropertyName(e,t){return cA(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(_U[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function dV(n,e){return new p.vHH(3005,Qt)}())}return c+u}}const _U=(()=>function vU(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function QP(n,e,t,r,i,u,c,f,y,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const yA={};class JP{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function EU(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,y,b,S){const M=[],F=this.ast.options&&this.ast.options.params||yA,B=this.buildStyles(r,f&&f.params||yA,M),se=y&&y.params||yA,De=this.buildStyles(i,se,M),Ge=new Set,it=new Map,rt=new Map,ze="void"===i,At={params:Object.assign(Object.assign({},F),se)},Pt=S?[]:pA(e,t,this.ast.animation,u,c,B,De,At,b,M);let Jt=0;if(Pt.forEach(Vo=>{Jt=Math.max(Vo.duration+Vo.delay,Jt)}),M.length)return QP(t,this._triggerName,r,i,ze,B,De,[],[],it,rt,Jt,M);Pt.forEach(Vo=>{const vd=Vo.element,TN=Fo(it,vd,{});Vo.preStyleProps.forEach(tg=>TN[tg]=!0);const G0=Fo(rt,vd,{});Vo.postStyleProps.forEach(tg=>G0[tg]=!0),vd!==t&&Ge.add(vd)});const Sr=oI(Ge.values());return QP(t,this._triggerName,r,i,ze,B,De,Pt,Sr,it,rt,Jt)}}class wU{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Iy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let y=c[f];y.length>1&&(y=sI(y,i,t));const b=this.normalizer.normalizePropertyName(f,t);y=this.normalizer.normalizeStyleValue(f,b,y,t),r[b]=y})}}),r}}class CU{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new wU(i.style,i.options&&i.options.params||{},r)}),XP(this.states,"true","1"),XP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new JP(e,i,this.states))}),this.fallbackTransition=function IU(n,e,t){return new JP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function XP(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const DU=new fI;class TU{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=dA(this._driver,t,r,[]);if(r.length)throw function MV(n){return new p.vHH(3503,Qt)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=RP(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=pA(this._driver,t,u,oA,tI,{},{},r,DU,i),c.forEach(S=>{const M=Fo(f,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function xV(){return new p.vHH(3300,Qt)}()),c=[]),i.length)throw function RV(n){return new p.vHH(3504,Qt)}();f.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,yd)})});const b=tf(c.map(S=>{const M=f.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function PV(n){return new p.vHH(3301,Qt)}();return t}listen(e,t,r,i){const u=nA(t,"","","");return eA(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const eN="ng-animate-queued",_A="ng-animate-disabled",RU=[],tN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},PU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fa="__ng_removed";class vA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function FU(n){return null!=n?n:null}(r?e.value:e),r){const u=Iy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const H0="void",EA=new vA(H0);class NU{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,La(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function NV(n,e){return new p.vHH(3302,Qt)}();if(null==r||0==r.length)throw function OV(n){return new p.vHH(3303,Qt)}();if(!function LU(n){return"start"==n||"done"==n}(r))throw function kV(n,e){return new p.vHH(3400,Qt)}();const u=Fo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Fo(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(La(e,nI),La(e,nI+"-"+t),f[t]=EA),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function FV(n){return new p.vHH(3401,Qt)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new wA(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(La(e,nI),La(e,nI+"-"+t),this._engine.statesByElement.set(e,f={}));let y=f[t];const b=new vA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),f[t]=b,y||(y=EA),b.value!==H0&&y.value===b.value){if(!function BU(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const se=[],De=u.matchStyles(y.value,y.params,se),Ge=u.matchStyles(b.value,b.params,se);se.length?this._engine.reportError(se):this._engine.afterFlush(()=>{Xp(e,De),Pl(e,Ge)})}return}const F=Fo(this._engine.playersByElement,e,[]);F.forEach(se=>{se.namespaceId==this.id&&se.triggerName==t&&se.queued&&se.destroy()});let V=u.matchTransition(y.value,b.value,e,b.params),B=!1;if(!V){if(!i)return;V=u.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:y,toState:b,player:c,isFallbackTransition:B}),B||(La(e,eN),c.onStart(()=>{Dy(e,eN)})),c.onDone(()=>{let se=this.players.indexOf(c);se>=0&&this.players.splice(se,1);const De=this._engine.playersByElement.get(e);if(De){let Ge=De.indexOf(c);Ge>=0&&De.splice(Ge,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,rI,!0);r.forEach(i=>{if(i[Fa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,H0,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&tf(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||EA,S=new vA(H0),M=new wA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Fa];(!u||u===tN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){La(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=nA(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,eA(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class OU{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new NU(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(mI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!mI(t))return;const u=t[Fa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),La(e,_A)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Dy(e,_A))}removeNode(e,t,r,i){if(mI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Fa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return mI(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,rI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,aA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return tf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Fa];if(r&&r.setForRemoval){if(e[Fa]=tN,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(_A))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)La(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?tf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function LV(n){return new p.vHH(3402,Qt)}()}_flushAnimations(e,t){const r=new fI,i=[],u=new Map,c=[],f=new Map,y=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(lt=>{S.add(lt);const Dt=this.driver.query(lt,".ng-animate-queued",!0);for(let Ot=0;Ot<Dt.length;Ot++)S.add(Dt[Ot])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),V=iN(F,this.collectedEnterElements),B=new Map;let se=0;V.forEach((lt,Dt)=>{const Ot=oA+se++;B.set(Dt,Ot),lt.forEach(an=>La(an,Ot))});const De=[],Ge=new Set,it=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const Dt=this.collectedLeaveElements[lt],Ot=Dt[Fa];Ot&&Ot.setForRemoval&&(De.push(Dt),Ge.add(Dt),Ot.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(an=>Ge.add(an)):it.add(Dt))}const rt=new Map,ze=iN(F,Array.from(Ge));ze.forEach((lt,Dt)=>{const Ot=tI+se++;rt.set(Dt,Ot),lt.forEach(an=>La(an,Ot))}),e.push(()=>{V.forEach((lt,Dt)=>{const Ot=B.get(Dt);lt.forEach(an=>Dy(an,Ot))}),ze.forEach((lt,Dt)=>{const Ot=rt.get(Dt);lt.forEach(an=>Dy(an,Ot))}),De.forEach(lt=>{this.processLeaveNode(lt)})});const At=[],Pt=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(t).forEach(Ot=>{const an=Ot.player,Ci=Ot.element;if(At.push(an),this.collectedEnterElements.length){const Os=Ci[Fa];if(Os&&Os.setForMove){if(Os.previousTriggersValues&&Os.previousTriggersValues.has(Ot.triggerName)){const ng=Os.previousTriggersValues.get(Ot.triggerName),af=this.statesByElement.get(Ot.element);af&&af[Ot.triggerName]&&(af[Ot.triggerName].value=ng)}return void an.destroy()}}const Nl=!M||!this.driver.containsElement(M,Ci),Uo=rt.get(Ci),sf=B.get(Ci),rr=this._buildInstruction(Ot,r,sf,Uo,Nl);if(rr.errors&&rr.errors.length)return void Pt.push(rr);if(Nl)return an.onStart(()=>Xp(Ci,rr.fromStyles)),an.onDestroy(()=>Pl(Ci,rr.toStyles)),void i.push(an);if(Ot.isFallbackTransition)return an.onStart(()=>Xp(Ci,rr.fromStyles)),an.onDestroy(()=>Pl(Ci,rr.toStyles)),void i.push(an);const MN=[];rr.timelines.forEach(Os=>{Os.stretchStartingKeyframe=!0,this.disabledNodes.has(Os.element)||MN.push(Os)}),rr.timelines=MN,r.append(Ci,rr.timelines),c.push({instruction:rr,player:an,element:Ci}),rr.queriedElements.forEach(Os=>Fo(f,Os,[]).push(an)),rr.preStyleProps.forEach((Os,ng)=>{const af=Object.keys(Os);if(af.length){let rg=y.get(ng);rg||y.set(ng,rg=new Set),af.forEach(MA=>rg.add(MA))}}),rr.postStyleProps.forEach((Os,ng)=>{const af=Object.keys(Os);let rg=b.get(ng);rg||b.set(ng,rg=new Set),af.forEach(MA=>rg.add(MA))})});if(Pt.length){const lt=[];Pt.forEach(Dt=>{lt.push(function VV(n,e){return new p.vHH(3505,Qt)}())}),At.forEach(Dt=>Dt.destroy()),this.reportError(lt)}const Jt=new Map,Sr=new Map;c.forEach(lt=>{const Dt=lt.element;r.has(Dt)&&(Sr.set(Dt,Dt),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,Jt))}),i.forEach(lt=>{const Dt=lt.element;this._getPreviousPlayers(Dt,!1,lt.namespaceId,lt.triggerName,null).forEach(an=>{Fo(Jt,Dt,[]).push(an),an.destroy()})});const Vo=De.filter(lt=>oN(lt,y,b)),vd=new Map;rN(vd,this.driver,it,b,yd).forEach(lt=>{oN(lt,y,b)&&Vo.push(lt)});const G0=new Map;V.forEach((lt,Dt)=>{rN(G0,this.driver,new Set(lt),y,"!")}),Vo.forEach(lt=>{const Dt=vd.get(lt),Ot=G0.get(lt);vd.set(lt,Object.assign(Object.assign({},Dt),Ot))});const tg=[],SN=[],AN={};c.forEach(lt=>{const{element:Dt,player:Ot,instruction:an}=lt;if(r.has(Dt)){if(S.has(Dt))return Ot.onDestroy(()=>Pl(Dt,an.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(an.totalTime),void i.push(Ot);let Ci=AN;if(Sr.size>1){let Uo=Dt;const sf=[];for(;Uo=Uo.parentNode;){const rr=Sr.get(Uo);if(rr){Ci=rr;break}sf.push(Uo)}sf.forEach(rr=>Sr.set(rr,Ci))}const Nl=this._buildAnimation(Ot.namespaceId,an,Jt,u,G0,vd);if(Ot.setRealPlayer(Nl),Ci===AN)tg.push(Ot);else{const Uo=this.playersByElement.get(Ci);Uo&&Uo.length&&(Ot.parentPlayer=tf(Uo)),i.push(Ot)}}else Xp(Dt,an.fromStyles),Ot.onDestroy(()=>Pl(Dt,an.toStyles)),SN.push(Ot),S.has(Dt)&&i.push(Ot)}),SN.forEach(lt=>{const Dt=u.get(lt.element);if(Dt&&Dt.length){const Ot=tf(Dt);lt.setRealPlayer(Ot)}}),i.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<De.length;lt++){const Dt=De[lt],Ot=Dt[Fa];if(Dy(Dt,tI),Ot&&Ot.hasAnimation)continue;let an=[];if(f.size){let Nl=f.get(Dt);Nl&&Nl.length&&an.push(...Nl);let Uo=this.driver.query(Dt,aA,!0);for(let sf=0;sf<Uo.length;sf++){let rr=f.get(Uo[sf]);rr&&rr.length&&an.push(...rr)}}const Ci=an.filter(Nl=>!Nl.destroyed);Ci.length?VU(this,Dt,Ci):this.processLeaveNode(Dt)}return De.length=0,tg.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const Dt=this.players.indexOf(lt);this.players.splice(Dt,1)}),lt.play()}),tg}elementContainsData(e,t){let r=!1;const i=t[Fa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==H0;f.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,S=b!==u,M=Fo(r,b,[]);this._getPreviousPlayers(b,S,c,f,t.toState).forEach(V=>{const B=V.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),V.destroy(),M.push(V)})}Xp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,y=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(B=>{const se=B.element;S.add(se);const De=se[Fa];if(De&&De.removedBeforeQueried)return new B0(B.duration,B.delay);const Ge=se!==y,it=function UU(n){const e=[];return sN(n,e),e}((r.get(se)||RU).map(Jt=>Jt.getRealPlayer())).filter(Jt=>!!Jt.element&&Jt.element===se),rt=u.get(se),ze=c.get(se),At=RP(0,this._normalizer,0,B.keyframes,rt,ze),Pt=this._buildPlayer(B,At,it);if(B.subTimeline&&i&&M.add(se),Ge){const Jt=new wA(e,f,se);Jt.setRealPlayer(Pt),b.push(Jt)}return Pt});b.forEach(B=>{Fo(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function kU(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),S.forEach(B=>La(B,jP));const V=tf(F);return V.onDestroy(()=>{S.forEach(B=>Dy(B,jP)),Pl(y,t.toStyles)}),M.forEach(B=>{Fo(i,B,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new B0(e.duration,e.delay)}}class wA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new B0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>eA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Fo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mI(n){return n&&1===n.nodeType}function nN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function rN(n,e,t,r,i){const u=[];t.forEach(y=>u.push(nN(y)));const c=[];r.forEach((y,b)=>{const S={};y.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Fa]=PU,c.push(b))}),n.set(b,S)});let f=0;return t.forEach(y=>nN(y,u[f++])),c}function iN(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let y=u.get(f);if(y)return y;const b=f.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function La(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Dy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function VU(n,e,t){tf(t).onDone(()=>n.processLeaveNode(e))}function sN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof MP?sN(r.players,e):e.push(r)}}function oN(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class yI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new OU(e,t,r),this._timelineEngine=new TU(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],S=dA(this._driver,u,y,[]);if(y.length)throw function SV(n,e){return new p.vHH(3404,Qt)}();f=function bU(n,e,t){return new CU(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=PP(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=PP(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let HU=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Pl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pl(this._element,this._initialStyles),this._endStyles&&(Pl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xp(this._element,this._endStyles),this._endStyles=null),Pl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function bA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];$U(i)&&(e=e||{},e[i]=n[i])}return e}function $U(n){return"display"===n||"position"===n}class aN{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:zP(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class GU{validateStyleProperty(e){return FP(e)}matchesElement(e,t){return!1}containsElement(e,t){return LP(e,t)}getParentElement(e){return iA(e)}query(e,t,r){return VP(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},S=c.filter(F=>F instanceof aN);(function KV(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let V=F.currentSnapshot;Object.keys(V).forEach(B=>b[B]=V[B])}),t=function ZV(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(y){f[y]=zP(n,y)})}}return e}(e,t=t.map(F=>nf(F,!1)),b);const M=function jU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=bA(e[0]),e.length>1&&(r=bA(e[e.length-1]))):e&&(t=bA(e)),t||r?new HU(n,t,r):null}(e,t);return new aN(e,t,y,M)}}let qU=(()=>{class n extends DP{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:p.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?TP(t):t;return uN(this._renderer,null,r,"register",[i]),new zU(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class zU extends class sV{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new WU(this._id,e,t||{},this._renderer)}}class WU{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return uN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function uN(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const lN="@.disabled";let KU=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new cN("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(c,f,t,S.name,S)};return r.data.animation.forEach(y),new ZU(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(yI),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class cN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==lN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ZU extends cN{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==lN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function YU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function QU(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let JU=(()=>{class n extends yI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(sA),p.LFG(mA))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const dN=new p.OlP("AnimationModuleType"),hN=[{provide:DP,useClass:qU},{provide:mA,useFactory:function XU(){return new yU}},{provide:yI,useClass:JU},{provide:p.FYo,useFactory:function eB(n,e,t){return new KU(n,e,t)},deps:[gn,yI,p.R0b]}],fN=[{provide:sA,useFactory:()=>new GU},{provide:dN,useValue:"BrowserAnimations"},...hN],tB=[{provide:sA,useClass:UP},{provide:dN,useValue:"NoopAnimations"},...hN];let nB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?tB:fN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:fN,imports:[Qo]}),n})();class pN{}class gN{}class _d{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof _d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new _d;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof _d?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===u.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class rB{encodeKey(e){return mN(e)}encodeValue(e){return mN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sB=/%(\d[a-f0-9])/gi,oB={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function mN(n){return encodeURIComponent(n).replace(sB,(e,t)=>{var r;return null!==(r=oB[t])&&void 0!==r?r:e})}function yN(n){return`${n}`}class rf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rB,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function iB(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,f]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],y=t.get(c)||[];y.push(f),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new rf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(yN(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(yN(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aB{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function _N(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function vN(n){return"undefined"!=typeof Blob&&n instanceof Blob}function EN(n){return"undefined"!=typeof FormData&&n instanceof FormData}class $0{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function uB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new _d),this.context||(this.context=new aB),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new rf,this.urlWithParams=t}serializeBody(){return null===this.body?null:_N(this.body)||vN(this.body)||EN(this.body)||function lB(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof rf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||EN(this.body)?null:vN(this.body)?this.body.type||null:_N(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof rf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,u=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,S=e.params||this.params;const M=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((F,V)=>F.set(V,e.setHeaders[V]),b)),e.setParams&&(S=Object.keys(e.setParams).reduce((F,V)=>F.set(V,e.setParams[V]),S)),new $0(r,i,c,{params:S,headers:b,context:M,reportProgress:y,responseType:u,withCredentials:f})}}var qr=(()=>((qr=qr||{})[qr.Sent=0]="Sent",qr[qr.UploadProgress=1]="UploadProgress",qr[qr.ResponseHeader=2]="ResponseHeader",qr[qr.DownloadProgress=3]="DownloadProgress",qr[qr.Response=4]="Response",qr[qr.User=5]="User",qr))();class CA{constructor(e,t=200,r="OK"){this.headers=e.headers||new _d,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class IA extends CA{constructor(e={}){super(e),this.type=qr.ResponseHeader}clone(e={}){return new IA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vI extends CA{constructor(e={}){super(e),this.type=qr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vI({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wN extends CA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function DA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let cB=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof $0)u=t;else{let y,b;y=i.headers instanceof _d?i.headers:new _d(i.headers),i.params&&(b=i.params instanceof rf?i.params:new rf({fromObject:i.params})),u=new $0(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=pt(u).pipe(my(y=>this.handler.handle(y)));if(t instanceof $0||"events"===i.observe)return c;const f=c.pipe(Er(y=>y instanceof vI));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return f.pipe((0,Mt.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return f.pipe((0,Mt.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return f.pipe((0,Mt.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return f.pipe((0,Mt.U)(y=>y.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new rf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,DA(i,r))}post(t,r,i={}){return this.request("POST",t,DA(i,r))}put(t,r,i={}){return this.request("PUT",t,DA(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pN))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class bN{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const CN=new p.OlP("HTTP_INTERCEPTORS");let dB=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const hB=/^\)\]\}',?\n/;let IN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Qi.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,B)=>i.setRequestHeader(V,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const u=t.serializeBody();let c=null;const f=()=>{if(null!==c)return c;const V=i.statusText||"OK",B=new _d(i.getAllResponseHeaders()),se=function fB(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new IA({headers:B,status:i.status,statusText:V,url:se}),c},y=()=>{let{headers:V,status:B,statusText:se,url:De}=f(),Ge=null;204!==B&&(Ge=void 0===i.response?i.responseText:i.response),0===B&&(B=Ge?200:0);let it=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof Ge){const rt=Ge;Ge=Ge.replace(hB,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(ze){Ge=rt,it&&(it=!1,Ge={error:ze,text:Ge})}}it?(r.next(new vI({body:Ge,headers:V,status:B,statusText:se,url:De||void 0})),r.complete()):r.error(new wN({error:Ge,headers:V,status:B,statusText:se,url:De||void 0}))},b=V=>{const{url:B}=f(),se=new wN({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(se)};let S=!1;const M=V=>{S||(r.next(f()),S=!0);let B={type:qr.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(B.total=V.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},F=V=>{let B={type:qr.UploadProgress,loaded:V.loaded};V.lengthComputable&&(B.total=V.total),r.next(B)};return i.addEventListener("load",y),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",M),null!==u&&i.upload&&i.upload.addEventListener("progress",F)),i.send(u),r.next({type:qr.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",y),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",M),null!==u&&i.upload&&i.upload.removeEventListener("progress",F)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(rn))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const TA=new p.OlP("XSRF_COOKIE_NAME"),SA=new p.OlP("XSRF_HEADER_NAME");class DN{}let pB=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ho(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(p.Lbi),p.LFG(TA))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),AA=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(DN),p.LFG(SA))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),gB=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(CN,[]);this.chain=r.reduceRight((i,u)=>new bN(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(gN),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),mB=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:AA,useClass:dB}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:TA,useValue:t.cookieName}:[],t.headerName?{provide:SA,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[AA,{provide:CN,useExisting:AA,multi:!0},{provide:DN,useClass:pB},{provide:TA,useValue:"XSRF-TOKEN"},{provide:SA,useValue:"X-XSRF-TOKEN"}]}),n})(),yB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[cB,{provide:pN,useClass:gB},IN,{provide:gN,useExisting:IN}],imports:[[mB.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),_B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[JO]}),n.\u0275inj=p.cJS({providers:[],imports:[[Qo,iV,KO,nB,yB]]}),n})();(0,p.G48)(),Vu().bootstrapModule(_B).catch(n=>console.error(n))},5867:(nt,we,N)=>{N.d(we,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=N(9681);(0,p.registerVersion)("firebase","9.8.2","app")},127:(nt,we,N)=>{N.d(we,{Z:()=>p.Z});var p=N(3942);p.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(nt,we,N)=>{N.r(we);var p=N(5861),X=N(3942),O=N(2090),le=N(9681),ne=N(655),ge=N(1877),ue=N(4859);const Ne=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new ge.Yd("@firebase/auth");function Je(_,...h){Ke.logLevel<=ge.in.ERROR&&Ke.error(`Auth (${le.SDK_VERSION}): ${_}`,...h)}function Te(_,...h){throw Be(_,...h)}function Ee(_,...h){return Be(_,...h)}function be(_,h,m){const E=Object.assign(Object.assign({},Ue()),{[h]:m});return new O.LL("auth","Firebase",E).create(h,{appName:_.name})}function je(_,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&Te(_,"argument-error"),be(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(_,...h){if("string"!=typeof _){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return pe.create(_,...h)}function $(_,h,...m){if(!_)throw Be(h,...m)}function ve(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Je(h),new Error(h)}function Z(_,h){_||ve(h)}const re=new Map;function ee(_){Z(_ instanceof Function,"Expected a class definition");let h=re.get(_);return h?(Z(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,re.set(_,h),h)}function Oe(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function dt(){return"http:"===Gt()||"https:"===Gt()}function Gt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class tn{constructor(h,m){this.shortDelay=h,this.longDelay=m,Z(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(_,h){Z(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class un{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ar=new tn(3e4,6e4);function Wt(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function Vt(_,h,m,E){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(_,h,m,E,T={}){return ni(_,T,(0,p.Z)(function*(){let P={},K={};E&&("GET"===h?K=E:P={body:JSON.stringify(E)});const fe=(0,O.xO)(Object.assign({key:_.config.apiKey},K)).slice(1),Fe=yield _._getAdditionalHeaders();return Fe["Content-Type"]="application/json",_.languageCode&&(Fe["X-Firebase-Locale"]=_.languageCode),un.fetch()(ks(_,_.config.apiHost,m,fe),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ni(_,h,m){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(_,h,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Xt),h);try{const T=new ri(_),P=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const K=yield P.json();if("needConfirmation"in K)throw Ii(_,"account-exists-with-different-credential",K);if(P.ok&&!("errorMessage"in K))return K;{const fe=P.ok?K.errorMessage:K.error.message,[Fe,Qe]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Ii(_,"credential-already-in-use",K);if("EMAIL_EXISTS"===Fe)throw Ii(_,"email-already-in-use",K);if("USER_DISABLED"===Fe)throw Ii(_,"user-disabled",K);const gt=E[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw be(_,gt,Qe);Te(_,gt)}}catch(T){if(T instanceof O.ZR)throw T;Te(_,"network-request-failed")}})).apply(this,arguments)}function Mr(_,h,m,E){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,p.Z)(function*(_,h,m,E,T={}){const P=yield Vt(_,h,m,E,T);return"mfaPendingCredential"in P&&Te(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function ks(_,h,m,E){const T=`${h}${m}?${E}`;return _.config.emulator?xn(_.config,T):`${_.config.apiScheme}://${T}`}class ri{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Ar.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ii(_,h,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=Ee(_,h,E);return T.customData._tokenResponse=m,T}function ii(){return(ii=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Sn(_,h){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Js(_,h){return si.apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Qn(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Bo(){return(Bo=(0,p.Z)(function*(_,h=!1){const m=(0,O.m9)(_),E=yield m.getIdToken(h),T=at(E);$(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const P="object"==typeof T.firebase?T.firebase:void 0,K=null==P?void 0:P.sign_in_provider;return{claims:T,token:E,authTime:Qn(qt(T.auth_time)),issuedAtTime:Qn(qt(T.iat)),expirationTime:Qn(qt(T.exp)),signInProvider:K||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(_){return 1e3*Number(_)}function at(_){const[h,m,E]=_.split(".");if(void 0===h||void 0===m||void 0===E)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(m);return T?JSON.parse(T):(Je("Failed to decode base64 JWT payload"),null)}catch(T){return Je("Caught error parsing JWT payload as JSON",T),null}}function gr(_,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(_,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&Bt(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Bt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Xs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class mr{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qn(this.lastLoginAt),this.creationTime=Qn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(_){return U.apply(this,arguments)}function U(){return(U=(0,p.Z)(function*(_){var h;const m=_.auth,E=yield _.getIdToken(),T=yield gr(_,Js(m,{idToken:E}));$(null==T?void 0:T.users.length,m,"internal-error");const P=T.users[0];_._notifyReloadListener(P);const K=(null===(h=P.providerUserInfo)||void 0===h?void 0:h.length)?q(P.providerUserInfo):[],fe=Ce(_.providerData,K),gt=!!_.isAnonymous&&!(_.email&&P.passwordHash||(null==fe?void 0:fe.length)),ut={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:fe,metadata:new mr(P.createdAt,P.lastLoginAt),isAnonymous:gt};Object.assign(_,ut)})).apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(_){const h=(0,O.m9)(_);yield yr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ce(_,h){return[..._.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function q(_){return _.map(h=>{var{providerId:m}=h,E=(0,ne._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Re(){return(Re=(0,p.Z)(function*(_,h){const m=yield ni(_,{},(0,p.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:P}=_.config,K=ks(_,T,"/v1/token",`key=${P}`),fe=yield _._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(K,{method:"POST",headers:fe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){$(h.idToken,"internal-error"),$(void 0!==h.idToken,"internal-error"),$(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function Et(_){const h=at(_);return $(h,"internal-error"),$(void 0!==h.exp,"internal-error"),$(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,p.Z)(function*(){return $(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,p.Z)(function*(){const{accessToken:T,refreshToken:P,expiresIn:K}=yield function J(_,h){return Re.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(T,P,Number(K))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:T,expirationTime:P}=m,K=new tt;return E&&($("string"==typeof E,"internal-error",{appName:h}),K.refreshToken=E),T&&($("string"==typeof T,"internal-error",{appName:h}),K.accessToken=T),P&&($("number"==typeof P,"internal-error",{appName:h}),K.expirationTime=P),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ht(_,h){$("string"==typeof _||void 0===_,"internal-error",{appName:h})}class Tt{constructor(h){var{uid:m,auth:E,stsTokenManager:T}=h,P=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new mr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,p.Z)(function*(){const E=yield gr(m,m.stsTokenManager.getToken(m.auth,h));return $(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function Di(_){return Bo.apply(this,arguments)}(this,h)}reload(){return function z(_){return W.apply(this,arguments)}(this)}_assign(h){this!==h&&($(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Tt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,p.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),m&&(yield yr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,p.Z)(function*(){const m=yield h.getIdToken();return yield gr(h,function mt(_,h){return ii.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,T,P,K,fe,Fe,Qe,gt;const ut=null!==(E=m.displayName)&&void 0!==E?E:void 0,Fn=null!==(T=m.email)&&void 0!==T?T:void 0,_i=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,au=null!==(K=m.photoURL)&&void 0!==K?K:void 0,Ff=null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,Do=null!==(Fe=m._redirectEventId)&&void 0!==Fe?Fe:void 0,uu=null!==(Qe=m.createdAt)&&void 0!==Qe?Qe:void 0,oh=null!==(gt=m.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:ah,emailVerified:zs,isAnonymous:Lf,providerData:uh,stsTokenManager:Vf}=m;$(ah&&Vf,h,"internal-error");const Og=tt.fromJSON(this.name,Vf);$("string"==typeof ah,h,"internal-error"),ht(ut,h.name),ht(Fn,h.name),$("boolean"==typeof zs,h,"internal-error"),$("boolean"==typeof Lf,h,"internal-error"),ht(_i,h.name),ht(au,h.name),ht(Ff,h.name),ht(Do,h.name),ht(uu,h.name),ht(oh,h.name);const tl=new Tt({uid:ah,auth:h,email:Fn,emailVerified:zs,displayName:ut,isAnonymous:Lf,photoURL:au,phoneNumber:_i,tenantId:Ff,stsTokenManager:Og,createdAt:uu,lastLoginAt:oh});return uh&&Array.isArray(uh)&&(tl.providerData=uh.map(Ri=>Object.assign({},Ri))),Do&&(tl._redirectEventId=Do),tl}static _fromIdTokenResponse(h,m,E=!1){return(0,p.Z)(function*(){const T=new tt;T.updateFromServerResponse(m);const P=new Tt({uid:m.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield yr(P),P})()}}const It=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,p.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function Wn(_,h,m){return`firebase:${_}:${h}:${m}`}class xr{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:T,name:P}=this.auth;this.fullUserKey=Wn(this.userKey,T.apiKey,P),this.fullPersistenceKey=Wn("persistence",T.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?Tt._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,p.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new xr(ee(It),h,E);const T=(yield Promise.all(m.map(function(){var Qe=(0,p.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let P=T[0]||ee(It);const K=Wn(E,h.config.apiKey,h.name);let fe=null;for(const Qe of m)try{const gt=yield Qe._get(K);if(gt){const ut=Tt._fromJSON(h,gt);Qe!==P&&(fe=ut),P=Qe;break}}catch(gt){}const Fe=T.filter(Qe=>Qe._shouldAllowMigration);return P._shouldAllowMigration&&Fe.length?(P=Fe[0],fe&&(yield P._set(K,fe.toJSON())),yield Promise.all(m.map(function(){var Qe=(0,p.Z)(function*(gt){if(gt!==P)try{yield gt._remove(K)}catch(ut){}});return function(gt){return Qe.apply(this,arguments)}}())),new xr(P,h,E)):new xr(P,h,E)})()}}function Tu(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Kn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Va(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(fs(h))return"Blackberry";if(Zn(h))return"Webos";if(Su(h))return"Safari";if((h.includes("chrome/")||Ua(h))&&!h.includes("edge/"))return"Chrome";if(Rr(h))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Va(_=(0,O.z$)()){return/firefox\//i.test(_)}function Su(_=(0,O.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ua(_=(0,O.z$)()){return/crios\//i.test(_)}function Kn(_=(0,O.z$)()){return/iemobile/i.test(_)}function Rr(_=(0,O.z$)()){return/android/i.test(_)}function fs(_=(0,O.z$)()){return/blackberry/i.test(_)}function Zn(_=(0,O.z$)()){return/webos/i.test(_)}function zr(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)}function Fs(_=(0,O.z$)()){return zr(_)||Rr(_)||Zn(_)||fs(_)||/windows phone/i.test(_)||Kn(_)}function jo(_,h=[]){let m;switch(_){case"Browser":m=Tu((0,O.z$)());break;case"Worker":m=`${Tu((0,O.z$)())}-${_}`;break;default:m=_}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${le.SDK_VERSION}/${E}`}class Wr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,m){const E=P=>new Promise((K,fe)=>{try{K(h(P))}catch(Fe){fe(Fe)}});E.onAbort=m,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var m=this;return(0,p.Z)(function*(){if(m.auth.currentUser===h)return;const E=[];try{for(const T of m.queue)yield T(h),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const P of E)try{P()}catch(K){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class Ze{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nn(this),this.idTokenSubscription=new nn(this),this.beforeStateQueue=new Wr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var T,P;if(!E._deleted&&(E.persistenceManager=yield xr.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(K){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m,!0)}})()}initializeCurrentUser(h){var m=this;return(0,p.Z)(function*(){var E;const T=yield m.assertedPersistence.getCurrentUser();let P=T,K=!1;if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const fe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Fe=null==P?void 0:P._redirectEventId,Qe=yield m.tryRedirectSignIn(h);(!fe||fe===Fe)&&(null==Qe?void 0:Qe.user)&&(P=Qe.user,K=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(P)}catch(fe){P=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(fe))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return $(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(h){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,p.Z)(function*(){try{yield yr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Xe(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,p.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&$(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return h&&$(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}beforeAuthStateChanged(h,m){return this.beforeStateQueue.pushCallback(h,m)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,p.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&ee(h)||m._popupRedirectResolver;$(E,m,"argument-error"),m.redirectPersistenceManager=yield xr.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,p.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,p.Z)(function*(){if(h===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,T){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return $(K,this,"internal-error"),K.then(()=>P(this.currentUser)),"function"==typeof m?h.addObserver(m,E,T):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=jo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function ct(_){return(0,O.m9)(_)}class nn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ui(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Bi(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class Ti{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,m){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function Pn(_,h){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:resetPassword",Wt(_,h))})).apply(this,arguments)}function Ho(_,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Au(_,h){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:update",Wt(_,h))})).apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signInWithPassword",Wt(_,h))})).apply(this,arguments)}function Vs(_,h){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:sendOobCode",Wt(_,h))})).apply(this,arguments)}function ln(_,h){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,p.Z)(function*(_,h){return Vs(_,h)})).apply(this,arguments)}function ja(_,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(_,h){return Vs(_,h)})).apply(this,arguments)}function Hi(_,h){return xu.apply(this,arguments)}function xu(){return(xu=(0,p.Z)(function*(_,h){return Vs(_,h)})).apply(this,arguments)}function wd(_,h){return $i.apply(this,arguments)}function $i(){return($i=(0,p.Z)(function*(_,h){return Vs(_,h)})).apply(this,arguments)}function Ol(){return(Ol=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signInWithEmailLink",Wt(_,h))})).apply(this,arguments)}function bd(){return(bd=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signInWithEmailLink",Wt(_,h))})).apply(this,arguments)}class _r extends Ti{constructor(h,m,E,T=null){super("password",E),this._email=h,this._password=m,this._tenantId=T}static _fromEmailAndPassword(h,m){return new _r(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new _r(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function sr(_,h){return to.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Gi(_,h){return Ol.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:Te(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Ho(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ig(_,h){return bd.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:Te(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Us(_,h){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signInWithIdp",Wt(_,h))})).apply(this,arguments)}class ps extends Ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new ps(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):Te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=m,P=(0,ne._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const K=new ps(E,T);return K.idToken=P.idToken||void 0,K.accessToken=P.accessToken||void 0,K.secret=P.secret,K.nonce=P.nonce,K.pendingToken=P.pendingToken||null,K}_getIdTokenResponse(h){return Us(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Us(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Us(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,O.xO)(m)}return h}}function og(_,h){return Id.apply(this,arguments)}function Id(){return(Id=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:sendVerificationCode",Wt(_,h))})).apply(this,arguments)}function Bs(){return(Bs=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,h))})).apply(this,arguments)}function Dd(){return(Dd=(0,p.Z)(function*(_,h){const m=yield Mr(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,h));if(m.temporaryProof)throw Ii(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ug={USER_NOT_FOUND:"user-not-found"};function Td(){return(Td=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ug)})).apply(this,arguments)}class $o extends Ti{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new $o({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new $o({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function kl(_,h){return Bs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function ag(_,h){return Dd.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function lg(_,h){return Td.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:P}=h;return E||m||T||P?new $o({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:P}):null}}class Ru{constructor(h){var m,E,T,P,K,fe;const Fe=(0,O.zd)((0,O.pd)(h)),Qe=null!==(m=Fe.apiKey)&&void 0!==m?m:null,gt=null!==(E=Fe.oobCode)&&void 0!==E?E:null,ut=function uf(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);$(Qe&&gt&&ut,"argument-error"),this.apiKey=Qe,this.operation=ut,this.code=gt,this.continueUrl=null!==(P=Fe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(K=Fe.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(fe=Fe.tenantId)&&void 0!==fe?fe:null}static parseLink(h){const m=function Ha(_){const h=(0,O.zd)((0,O.pd)(_)).link,m=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||h||_}(h);try{return new Ru(m)}catch(E){return null}}}let Ad=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return _r._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=Ru.parseLink(E);return $(T,"argument-error"),_r._fromEmailAndCode(m,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class vr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class no extends vr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class qi extends no{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return $("providerId"in m&&"signInMethod"in m,"argument-error"),ps._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return $(h.idToken||h.accessToken,"argument-error"),ps._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return qi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return qi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:P,nonce:K,providerId:fe}=h;if(!E&&!T&&!m&&!P||!fe)return null;try{return new qi(fe)._credential({idToken:m,accessToken:E,nonce:K,pendingToken:P})}catch(Fe){return null}}}let Go=(()=>{class _ extends no{constructor(){super("facebook.com")}static credential(m){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Md=(()=>{class _ extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return _.credential(E,T)}catch(P){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),lf=(()=>{class _ extends no{constructor(){super("github.com")}static credential(m){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class ro extends Ti{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return Us(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Us(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Us(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:P}=m;return E&&T&&P&&E===T?new ro(E,P):null}static _create(h,m){return new ro(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends vr{constructor(h){$(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Pr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Pr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=ro.fromJSON(h);return $(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return ro._create(E,m)}catch(T){return null}}}let Rd=(()=>{class _ extends no{constructor(){super("twitter.com")}static credential(m,E){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return _.credential(E,T)}catch(P){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Nr(_,h){return zo.apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signUp",Wt(_,h))})).apply(this,arguments)}class ai{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,T=!1){return(0,p.Z)(function*(){const P=yield Tt._fromIdTokenResponse(h,E,T),K=Fl(E);return new ai({user:P,providerId:K,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Fl(E);return new ai({user:h,providerId:T,_tokenResponse:E,operationType:m})})()}}function Fl(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Ll(){return(Ll=(0,p.Z)(function*(_){var h;const m=ct(_);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new ai({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Nr(m,{returnSecureToken:!0}),T=yield ai._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Wo extends O.ZR{constructor(h,m,E,T){var P;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,Wo.prototype),this.customData={appName:h.name,tenantId:null!==(P=h.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,T){return new Wo(h,m,E,T)}}function Vl(_,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Wo._fromErrorAndOperation(_,P,h,E):P})}function zi(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function rn(){return(rn=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_);yield en(!0,m,h);const{providerUserInfo:E}=yield Sn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),T=zi(E||[]);return m.providerData=m.providerData.filter(P=>T.has(P.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function $a(_,h){return io.apply(this,arguments)}function io(){return(io=(0,p.Z)(function*(_,h,m=!1){const E=yield gr(_,h._linkToIdToken(_.auth,yield _.getIdToken()),m);return ai._forOperation(_,"link",E)})).apply(this,arguments)}function en(_,h,m){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,p.Z)(function*(_,h,m){yield yr(h);const T=!1===_?"provider-already-linked":"no-such-provider";$(zi(h.providerData).has(m)===_,h.auth,T)})).apply(this,arguments)}function Pu(_,h){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(_,h,m=!1){const{auth:E}=_,T="reauthenticate";try{const P=yield gr(_,Vl(E,T,h,_),m);$(P.idToken,E,"internal-error");const K=at(P.idToken);$(K,E,"internal-error");const{sub:fe}=K;return $(_.uid===fe,E,"user-mismatch"),ai._forOperation(_,T,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Te(E,"user-mismatch"),P}})).apply(this,arguments)}function or(_,h){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,p.Z)(function*(_,h,m=!1){const E="signIn",T=yield Vl(_,E,h),P=yield ai._fromIdTokenResponse(_,E,T);return m||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function bn(_,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,p.Z)(function*(_,h){return or(ct(_),h)})).apply(this,arguments)}function ar(_,h){return so.apply(this,arguments)}function so(){return(so=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_);return yield en(!1,m,h.providerId),$a(m,h)})).apply(this,arguments)}function gs(_,h){return qa.apply(this,arguments)}function qa(){return(qa=(0,p.Z)(function*(_,h){return Pu((0,O.m9)(_),h)})).apply(this,arguments)}function Si(_,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,p.Z)(function*(_,h){return Mr(_,"POST","/v1/accounts:signInWithCustomToken",Wt(_,h))})).apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(_,h){const m=ct(_),E=yield Si(m,{token:h,returnSecureToken:!0}),T=yield ai._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Zo{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?Nu._fromServerResponse(h,m):Te(h,"internal-error")}}class Nu extends Zo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new Nu(m)}}function za(_,h,m){var E;$((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),$(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&($(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&($(m.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function Wa(){return(Wa=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"PASSWORD_RESET",email:h};m&&za(E,T,m),yield ja(E,T)})).apply(this,arguments)}function Hl(){return(Hl=(0,p.Z)(function*(_,h,m){yield Pn((0,O.m9)(_),{oobCode:h,newPassword:m})})).apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(_,h){yield Au((0,O.m9)(_),{oobCode:h})})).apply(this,arguments)}function Ou(_,h){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_),E=yield Pn(m,{oobCode:h}),T=E.requestType;switch($(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,m,"internal-error");default:$(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=Zo._fromServerResponse(ct(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:T}})).apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(_,h){const{data:m}=yield Ou((0,O.m9)(_),h);return m.email})).apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(_,h,m){const E=ct(_),T=yield Nr(E,{returnSecureToken:!0,email:h,password:m}),P=yield ai._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"EMAIL_SIGNIN",email:h};$(m.handleCodeInApp,E,"argument-error"),m&&za(E,T,m),yield Hi(E,T)})).apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=Ad.credentialWithLink(h,m||Oe());return $(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),bn(E,T)})).apply(this,arguments)}function ms(_,h){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:createAuthUri",Wt(_,h))})).apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(_,h){const E={identifier:h,continueUri:dt()?Oe():"http://localhost"},{signinMethods:T}=yield ms((0,O.m9)(_),E);return T||[]})).apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&za(m.auth,T,h);const{email:P}=yield ln(m.auth,T);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function Vu(){return(Vu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};m&&za(E.auth,P,m);const{email:K}=yield wd(E.auth,P);K!==_.email&&(yield _.reload())})).apply(this,arguments)}function Qa(_,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(_,h){return Vt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ja(){return(Ja=(0,p.Z)(function*(_,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,O.m9)(_),P={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},K=yield gr(E,Qa(E.auth,P));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const fe=E.providerData.find(({providerId:Fe})=>"password"===Fe);fe&&(fe.displayName=E.displayName,fe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)})).apply(this,arguments)}function Jo(_,h,m){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(_,h,m){const{auth:E}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(P.email=h),m&&(P.password=m);const K=yield gr(_,Ho(E,P));yield _._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Xo{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class Od extends Xo{constructor(h,m,E,T){super(h,m,E),this.username=T}}class ea extends Xo{constructor(h,m){super(h,"facebook.com",m)}}class Zi extends Od{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class df extends Xo{constructor(h,m){super(h,"google.com",m)}}class Xn extends Od{constructor(h,m,E){super(h,"twitter.com",m,E)}}function Yi(_){const{user:h,_tokenResponse:m}=_;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Nd(_){var h,m;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const K=null===(m=null===(h=at(_.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new Xo(P,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new ea(P,T);case"github.com":return new Zi(P,T);case"google.com":return new df(P,T);case"twitter.com":return new Xn(P,T,_.screenName||null);case"custom":case"anonymous":return new Xo(P,null);default:return new Xo(P,E,T)}}(m)}class ys{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new ys("enroll",h)}static _fromMfaPendingCredential(h){return new ys("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ys._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ys._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ta{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=ct(h),T=m.customData._serverResponse,P=(T.mfaInfo||[]).map(fe=>Zo._fromServerResponse(E,fe));$(T.mfaPendingCredential,E,"internal-error");const K=ys._fromMfaPendingCredential(T.mfaPendingCredential);return new ta(K,P,function(){var fe=(0,p.Z)(function*(Fe){const Qe=yield Fe._process(E,K);delete T.mfaInfo,delete T.mfaPendingCredential;const gt=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(m.operationType){case"signIn":const ut=yield ai._fromIdTokenResponse(E,m.operationType,gt);return yield E._updateCurrentUser(ut.user),ut;case"reauthenticate":return $(m.user,E,"internal-error"),ai._forOperation(m.user,m.operationType,gt);default:Te(E,"internal-error")}});return function(Fe){return fe.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,p.Z)(function*(){return m.signInResolver(h)})()}}function ff(_,h){return Vt(_,"POST","/v2/accounts/mfaEnrollment:start",Wt(_,h))}class Ld{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Zo._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new Ld(h)}getSession(){var h=this;return(0,p.Z)(function*(){return ys._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,p.Z)(function*(){const T=h,P=yield E.getSession(),K=yield gr(E.user,T._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(h){var m=this;return(0,p.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield m.user.getIdToken(),P=yield gr(m.user,function Uu(_,h){return Vt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(_,h))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:K})=>K!==E),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const Bu=new WeakMap,uo="__sak";class Vd{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ji=(()=>{class _ extends Vd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fg(){const _=(0,O.z$)();return Su(_)||zr(_)}()&&function ir(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Fs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),P=this.localCache[E];T!==P&&m(E,P,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((fe,Fe,Qe)=>{this.notifyListeners(fe,Qe)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(T);if(m.newValue!==fe)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const P=()=>{const fe=this.storage.getItem(T);!E&&this.localCache[T]===fe||this.notifyListeners(T,fe)},K=this.storage.getItem(T);!function Ba(){return(0,O.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,P=this;return(0,p.Z)(function*(){yield T().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,p.Z)(function*(){const P=yield E().call(T,m);return T.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,T=this;return(0,p.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return _.type="LOCAL",_})(),Ht=(()=>{class _ extends Vd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Ud=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const T=new _(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const T=m,{eventId:P,eventType:K,data:fe}=T.data,Fe=E.handlersMap[K];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:P,eventType:K});const Qe=Array.from(Fe).map(function(){var ut=(0,p.Z)(function*(Fn){return Fn(T.origin,fe)});return function(Fn){return ut.apply(this,arguments)}}()),gt=yield function na(_){return Promise.all(_.map(function(){var h=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:P,eventType:K,response:gt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function li(_="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return _+m}class ur{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var T=this;return(0,p.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let K,fe;return new Promise((Fe,Qe)=>{const gt=li("",20);P.port1.start();const ut=setTimeout(()=>{Qe(new Error("unsupported_event"))},E);fe={messageChannel:P,onMessage(Fn){const _i=Fn;if(_i.data.eventId===gt)switch(_i.data.status){case"ack":clearTimeout(ut),K=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Fe(_i.data.response);break;default:clearTimeout(ut),clearTimeout(K),Qe(new Error("invalid_response"))}}},T.handlers.add(fe),P.port1.addEventListener("message",fe.onMessage),T.target.postMessage({eventType:h,eventId:gt,data:m},[P.port2])}).finally(()=>{fe&&T.removeMessageHandler(fe)})})()}}function sn(){return window}function _s(){return void 0!==sn().WorkerGlobalScope&&"function"==typeof sn().importScripts}function Hu(){return(Hu=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Bd="firebaseLocalStorageDb",Er="firebaseLocalStorage",On="fbase_key";class co{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function lr(_,h){return _.transaction([Er],h?"readwrite":"readonly").objectStore(Er)}function wr(){const _=indexedDB.open(Bd,1);return new Promise((h,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Er,{keyPath:On})}catch(T){m(T)}}),_.addEventListener("success",(0,p.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Er)?h(E):(E.close(),yield function me(){const _=indexedDB.deleteDatabase(Bd);return new co(_).toPromise()}(),h(yield wr()))}))})}function Mi(_,h,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(_,h,m){const E=lr(_,!0).put({[On]:h,value:m});return new co(E).toPromise()})).apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(_,h){const m=lr(_,!1).get(h),E=yield new co(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function di(_,h){const m=lr(_,!0).delete(h);return new co(m).toPromise()}const Xi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield wr()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let T=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(T++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return _s()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Ud._getInstance(function tu(){return _s()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(T,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(T,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(T,P){return["keyChanged"]});return function(T,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Mt(){return Hu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ur(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=P[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function ra(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield wr();return yield Mi(m,uo,"1"),yield di(m,uo),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,p.Z)(function*(){return T._withPendingWrite((0,p.Z)(function*(){return yield T._withRetries(P=>Mi(P,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const T=yield E._withRetries(P=>function yt(_,h){return ho.apply(this,arguments)}(P,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(T=>di(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(K=>{const fe=lr(K,!1).getAll();return new co(fe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],P=new Set;for(const{fbase_key:K,value:fe}of E)P.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(fe)&&(m.notifyListeners(K,fe),T.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!P.has(K)&&(m.notifyListeners(K,null),T.push(K));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function ia(_,h){return Vt(_,"POST","/v2/accounts/mfaSignIn:start",Wt(_,h))}function po(){return(po=(0,p.Z)(function*(_){return(yield Vt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function go(_){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=h,E.onerror=T=>{const P=Ee("internal-error");P.customData=T,m(P)},E.type="text/javascript",E.charset="UTF-8",function nu(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(E)})}function vs(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Mn=1e12;class Yr{constructor(h){this.auth=h,this.counter=Mn,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new pg(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||Mn;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||Mn))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(h||Mn))||void 0===E||E.execute(),""})()}}class pg{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;$(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kl(_){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const En=vs("rcb"),gf=new tn(3e4,6e4);class gg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!sn().grecaptcha}load(h,m=""){return $(function jd(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(sn().grecaptcha):new Promise((E,T)=>{const P=sn().setTimeout(()=>{T(Ee(h,"network-request-failed"))},gf.get());sn()[En]=()=>{sn().clearTimeout(P),delete sn()[En];const fe=sn().grecaptcha;if(!fe)return void T(Ee(h,"internal-error"));const Fe=fe.render;fe.render=(Qe,gt)=>{const ut=Fe(Qe,gt);return this.counter++,ut},this.hostLanguage=m,E(fe)},go(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:En,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),T(Ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!sn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gu{load(h){return(0,p.Z)(function*(){return new Yr(h)})()}clearedOneInstance(){}}const Zl="recaptcha",Or={theme:"light",type:"image"};class yo{constructor(h,m=Object.assign({},Or),E){this.parameters=m,this.type=Zl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(E),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;$(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gu:new gg,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const K=fe=>{!fe||(h.tokenChangeListeners.delete(K),P(fe))};h.tokenChangeListeners.add(K),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=sn()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){$(dt()&&!_s(),h.auth,"internal-error"),yield function kr(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function $u(_){return po.apply(this,arguments)}(h.auth);$(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class In{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=$o._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function Es(){return(Es=(0,p.Z)(function*(_,h,m){const E=ct(_),T=yield ru(E,h,(0,O.m9)(m));return new In(T,P=>bn(E,P))})).apply(this,arguments)}function zu(){return(zu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);yield en(!1,E,"phone");const T=yield ru(E.auth,h,(0,O.m9)(m));return new In(T,P=>ar(E,P))})).apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=yield ru(E.auth,h,(0,O.m9)(m));return new In(T,P=>gs(E,P))})).apply(this,arguments)}function ru(_,h,m){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(_,h,m){var E;const T=yield m.verify();try{let P;if($("string"==typeof T,_,"argument-error"),$(m.type===Zl,_,"argument-error"),P="string"==typeof h?{phoneNumber:h}:h,"session"in P){const K=P.session;if("phoneNumber"in P)return $("enroll"===K.type,_,"internal-error"),(yield ff(_,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{$("signin"===K.type,_,"internal-error");const fe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return $(fe,_,"missing-multi-factor-info"),(yield ia(_,{mfaPendingCredential:K.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield og(_,{phoneNumber:P.phoneNumber,recaptchaToken:T});return K}}finally{m._reset()}})).apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(_,h){yield $a((0,O.m9)(_),h)})).apply(this,arguments)}let ws=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=ct(m)}verifyPhoneNumber(m,E){return ru(this.auth,m,(0,O.m9)(E))}static credential(m,E){return $o._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?$o._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function ts(_,h){return h?ee(h):($(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Wu extends Ti{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Us(h,this._buildIdpRequest())}_linkToIdToken(h,m){return Us(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return Us(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function Yl(_){return or(_.auth,new Wu(_),_.bypassAuthState)}function vo(_){const{auth:h,user:m}=_;return $(m,h,"internal-error"),Pu(m,new Wu(_),_.bypassAuthState)}function Fr(_){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(_){const{auth:h,user:m}=_;return $(m,h,"internal-error"),$a(m,new Wu(_),_.bypassAuthState)})).apply(this,arguments)}class $s{constructor(h,m,E,T,P=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,p.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(P){h.reject(P)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:P,tenantId:K,error:fe,type:Fe}=h;if(fe)return void m.reject(fe);const Qe={auth:m.auth,requestUri:E,sessionId:T,tenantId:K||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Fe)(Qe))}catch(gt){m.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Yl;case"linkViaPopup":case"linkViaRedirect":return Fr;case"reauthViaPopup":case"reauthViaRedirect":return vo;default:Te(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yg=new tn(2e3,1e4);function ns(){return(ns=(0,p.Z)(function*(_,h,m){const E=ct(_);je(_,h,vr);const T=ts(E,m);return new Gs(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Jl(){return(Jl=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);je(E.auth,h,vr);const T=ts(E.auth,m);return new Gs(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function mn(){return(mn=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);je(E.auth,h,vr);const T=ts(E.auth,m);return new Gs(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let Gs=(()=>{class _ extends $s{constructor(m,E,T,P,K){super(m,E,P,K),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return $(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){Z(1===m.filter.length,"Popup operations only handle one event");const E=li();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,yg.get())};m()}}return _.currentPopupAction=null,_})();const fi=new Map;class Ay extends $s{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=fi.get(m.auth._key());if(!E){try{const P=(yield function aa(_,h){return qs.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(P)}catch(T){E=()=>Promise.reject(T)}fi.set(m.auth._key(),E)}return m.bypassAuthState||fi.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function qs(){return(qs=(0,p.Z)(function*(_,h){const m=L(h),E=R(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function Cs(_,h){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,p.Z)(function*(_,h){return R(_)._set(L(h),"true")})).apply(this,arguments)}function D(_,h){fi.set(_._key(),h)}function R(_){return ee(_._redirectPersistence)}function L(_){return Wn("pendingRedirect",_.config.apiKey,_.name)}function Pe(){return(Pe=(0,p.Z)(function*(_,h,m){const E=ct(_);je(_,h,vr);const T=ts(E,m);return yield Cs(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function bt(){return(bt=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);je(E.auth,h,vr);const T=ts(E.auth,m);yield Cs(T,E.auth);const P=yield xi(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",P)})).apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);je(E.auth,h,vr);const T=ts(E.auth,m);yield en(!1,E,h.providerId),yield Cs(T,E.auth);const P=yield xi(E);return T._openRedirect(E.auth,h,"linkViaRedirect",P)})).apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(_,h){return yield ct(_)._initializationPromise,dn(_,h,!1)})).apply(this,arguments)}function dn(_,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(_,h,m=!1){const E=ct(_),T=ts(E,h),K=yield new Ay(E,T,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,h)),K})).apply(this,arguments)}function xi(_){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(_){const h=li(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Gd{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function zd(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xl(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!Xl(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,T))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qd(h))}saveEventToCache(h){this.cachedEventUids.add(qd(h)),this.lastProcessedEventTime=Date.now()}}function qd(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function Xl({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Wd(_){return yf.apply(this,arguments)}function yf(){return(yf=(0,p.Z)(function*(_,h={}){return Vt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const ua=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zu=/^https?/;function ec(){return(ec=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Wd(_);for(const m of h)try{if(Kd(m))return}catch(E){}Te(_,"unauthorized-domain")})).apply(this,arguments)}function Kd(_){const h=Oe(),{protocol:m,hostname:E}=new URL(h);if(_.startsWith("chrome-extension://")){const K=new URL(_);return""===K.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===E}if(!Zu.test(m))return!1;if(ua.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const _f=new tn(3e4,6e4);function _g(){const _=sn().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let la=null;function vg(_){return la=la||function xy(_){return new Promise((h,m)=>{var E,T,P;function K(){_g(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{_g(),m(Ee(_,"network-request-failed"))},timeout:_f.get()})}if(null===(T=null===(E=sn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(P=sn().gapi)||void 0===P?void 0:P.load)){const fe=vs("iframefcb");return sn()[fe]=()=>{gapi.load?K():m(Ee(_,"network-request-failed"))},go(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Fe=>m(Fe))}K()}}).catch(h=>{throw la=null,h})}(_),la}const tc=new tn(5e3,15e3),Ry={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Py=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nc(_){const h=_.config;$(h.authDomain,_,"auth-domain-config-required");const m=h.emulator?xn(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:_.name,v:le.SDK_VERSION},T=Py.get(_.config.apiHost);T&&(E.eid=T);const P=_._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function rc(){return rc=(0,p.Z)(function*(_){const h=yield vg(_),m=sn().gapi;return $(m,_,"internal-error"),h.open({where:document.body,url:nc(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ry,dontclear:!0},E=>new Promise(function(){var T=(0,p.Z)(function*(P,K){yield E.restyle({setHideOnLeave:!1});const fe=Ee(_,"network-request-failed"),Fe=sn().setTimeout(()=>{K(fe)},tc.get());function Qe(){sn().clearTimeout(Fe),P(E)}E.ping(Qe).then(Qe,()=>{K(fe)})});return function(P,K){return T.apply(this,arguments)}}()))}),rc.apply(this,arguments)}const ca={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wf{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function da(_,h,m,E,T,P){$(_.config.authDomain,_,"auth-domain-config-required"),$(_.config.apiKey,_,"invalid-api-key");const K={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:le.SDK_VERSION,eventId:T};if(h instanceof vr){h.setDefaultLanguage(_.languageCode),K.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(K.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Qe]of Object.entries(P||{}))K[Fe]=Qe}if(h instanceof no){const Fe=h.getScopes().filter(Qe=>""!==Qe);Fe.length>0&&(K.scopes=Fe.join(","))}_.tenantId&&(K.tid=_.tenantId);const fe=K;for(const Fe of Object.keys(fe))void 0===fe[Fe]&&delete fe[Fe];return`${function bf({config:_}){return _.emulator?xn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(fe).slice(1)}`}const Cf="webStorageSupport";class Qd extends class wg{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Qd(h)}_finalizeEnroll(h,m,E){return function ao(_,h){return Vt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(_,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function es(_,h){return Vt(_,"POST","/v2/accounts/mfaSignIn:finalize",Wt(_,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jd=(()=>{class _{constructor(){}static assertion(m){return Qd._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var uc="@firebase/auth";class bg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rs(){return window}function ha(){return(ha=(0,p.Z)(function*(_,h,m){var E;const{BuildInfo:T}=rs();Z(h.sessionId,"AuthEvent did not contain a session ID");const P=yield lc(h.sessionId),K={};return zr()?K.ibi=T.packageName:Rr()?K.apn=T.packageName:Te(_,"operation-not-supported-in-this-environment"),T.displayName&&(K.appDisplayName=T.displayName),K.sessionId=P,da(_,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,K)})).apply(this,arguments)}function fa(){return(fa=(0,p.Z)(function*(_){const{BuildInfo:h}=rs(),m={};zr()?m.iosBundleId=h.packageName:Rr()?m.androidPackageName=h.packageName:Te(_,"operation-not-supported-in-this-environment"),yield Wd(_,m)})).apply(this,arguments)}function Qu(){return(Qu=(0,p.Z)(function*(_,h,m){const{cordova:E}=rs();let T=()=>{};try{yield new Promise((P,K)=>{let fe=null;function Fe(){var ut;P();const Fn=null===(ut=E.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof Fn&&Fn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Qe(){fe||(fe=window.setTimeout(()=>{K(Ee(_,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}h.addPassiveListener(Fe),document.addEventListener("resume",Qe,!1),Rr()&&document.addEventListener("visibilitychange",gt,!1),T=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",gt,!1),fe&&window.clearTimeout(fe)}})}finally{T()}})).apply(this,arguments)}function lc(_){return cc.apply(this,arguments)}function cc(){return(cc=(0,p.Z)(function*(_){const h=dc(_),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function dc(_){if(Z(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),m=new Uint8Array(h);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function Cg(_){(0,le._registerComponent)(new ue.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:P,authDomain:K}=E.options;return((fe,Fe)=>{$(P&&!P.includes(":"),"invalid-api-key",{appName:fe.name}),$(!(null==K?void 0:K.includes(":")),"argument-error",{appName:fe.name});const Qe={apiKey:P,authDomain:K,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jo(_)},gt=new Ze(fe,Fe,Qe);return function ae(_,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ee);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(gt,m),gt})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new ue.wA("auth-internal",h=>{const m=ct(h.getProvider("auth").getImmediate());return new bg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(uc,"0.20.2",function Oy(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,le.registerVersion)(uc,"0.20.2","esm2017")}("Browser");class Dg extends Gd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function Sg(_){return wo.apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(_){const h=yield Co()._get(Xu(_));return h&&(yield Co()._remove(Xu(_))),h})).apply(this,arguments)}function fc(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);_.push(h.charAt(E))}return _.join("")}function Co(){return ee(Ji)}function Xu(_){return Wn("authEvent",_.config.apiKey,_.name)}function yn(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function su(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function pc(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function gc(_=(0,O.z$)()){return!("file:"!==pc()&&"ionic:"!==pc()&&"capacitor:"!==pc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function ga(){try{const _=self.localStorage,h=li();if(_)return _.setItem(h,"1"),_.removeItem(h),!function Af(_=(0,O.z$)()){return function Vr(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function eh(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch(_){return dr()&&(0,O.hl)()}return!1}function dr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ou(){return(function W0(){return"http:"===pc()||"https:"===pc()}()||(0,O.ru)()||gc())&&!function is(){return(0,O.b$)()||(0,O.UG)()}()&&ga()&&!dr()}function mc(){return gc()&&"undefined"!=typeof document}function th(){return(th=(0,p.Z)(function*(){return!!mc()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const Xr={LOCAL:"local",NONE:"none",SESSION:"session"},ma=$,xf="persistence";function yc(_){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,p.Z)(function*(_){yield _._initializationPromise;const h=Mg(),m=Wn(xf,_.config.apiKey,_.name);h&&h.setItem(m,_._getPersistence())})).apply(this,arguments)}function Mg(){var _;try{return(null===(_=function Mf(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(h){return null}}const nh=$;class gi{constructor(){this.browserResolver=ee(class Ny{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ht,this._completeRedirectFn=dn,this._overrideRedirectResult=D}_openPopup(h,m,E,T){var P=this;return(0,p.Z)(function*(){var K;Z(null===(K=P.eventManagers[h._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const fe=da(h,m,E,Oe(),T);return function Jr(_,h,m,E=500,T=600){const P=Math.max((window.screen.availHeight-T)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let fe="";const Fe=Object.assign(Object.assign({},ca),{width:E.toString(),height:T.toString(),top:P,left:K}),Qe=(0,O.z$)().toLowerCase();m&&(fe=Ua(Qe)?"_blank":m),Va(Qe)&&(h=h||"http://localhost",Fe.scrollbars="yes");const gt=Object.entries(Fe).reduce((Fn,[_i,au])=>`${Fn}${_i}=${au},`,"");if(function eo(_=(0,O.z$)()){var h;return zr(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Qe)&&"_self"!==fe)return function Eg(_,h){const m=document.createElement("a");m.href=_,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",fe),new wf(null);const ut=window.open(h||"",fe,gt);$(ut,_,"popup-blocked");try{ut.focus()}catch(Fn){}return new wf(ut)}(h,fe,li())})()}_openRedirect(h,m,E,T){var P=this;return(0,p.Z)(function*(){return yield P._originValidation(h),function $n(_){sn().location.href=_}(da(h,m,E,Oe(),T)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:T,promise:P}=this.eventManagers[m];return T?Promise.resolve(T):(Z(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,p.Z)(function*(){const E=yield function Yd(_){return rc.apply(this,arguments)}(h),T=new Gd(h);return E.register("authEvent",P=>($(null==P?void 0:P.authEvent,h,"invalid-auth-event"),{status:T.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:T},m.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(Cf,{type:Cf},T=>{var P;const K=null===(P=null==T?void 0:T[0])||void 0===P?void 0:P[Cf];void 0!==K&&m(!!K),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function My(_){return ec.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return Fs()||Su()||zr()}}),this.cordovaResolver=ee(class Fy{constructor(){this._redirectPersistence=Ht,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dn,this._overrideRedirectResult=D}_initialize(h){var m=this;return(0,p.Z)(function*(){const E=h._key();let T=m.eventManagers.get(E);return T||(T=new Dg(h),m.eventManagers.set(E,T),m.attachCallbackListeners(h,T)),T})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,T){var P=this;return(0,p.Z)(function*(){!function Ju(_){var h,m,E,T,P,K,fe,Fe,Qe,gt;const ut=rs();$("function"==typeof(null===(h=null==ut?void 0:ut.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(m=null==ut?void 0:ut.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(P=null===(T=null===(E=null==ut?void 0:ut.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===P?void 0:P.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Fe=null===(fe=null===(K=null==ut?void 0:ut.cordova)||void 0===K?void 0:K.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Fe?void 0:Fe.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(gt=null===(Qe=null==ut?void 0:ut.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===gt?void 0:gt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const K=yield P._initialize(h);yield K.initialized(),K.resetRedirect(),function I(){fi.clear()}(),yield P._originValidation(h);const fe=function pa(_,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:fc(),postBody:null,tenantId:_.tenantId,error:Ee(_,"no-auth-event")}}(h,E,T);yield function Tg(_,h){return Co()._set(Xu(_),h)}(h,fe);const Fe=yield function Ds(_,h,m){return ha.apply(this,arguments)}(h,fe,m),Qe=yield function Tf(_){const{cordova:h}=rs();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(_):T=h.InAppBrowser.open(_,function Ed(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(T)})})}(Fe);return function Sf(_,h,m){return Qu.apply(this,arguments)}(h,K,Qe)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ig(_){return fa.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:P}=rs(),K=setTimeout((0,p.Z)(function*(){yield Sg(h),m.onEvent(su())}),500),fe=function(){var gt=(0,p.Z)(function*(ut){clearTimeout(K);const Fn=yield Sg(h);let _i=null;Fn&&(null==ut?void 0:ut.url)&&(_i=function bo(_,h){var m,E;const T=function Dn(_){const h=yn(_),m=h.link?decodeURIComponent(h.link):void 0,E=yn(m).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return yn(T).link||T||E||m||_}(h);if(T.includes("/__/auth/callback")){const P=yn(T),K=P.firebaseError?function Xd(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(P.firebaseError)):null,fe=null===(E=null===(m=null==K?void 0:K.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Fe=fe?Ee(fe):null;return Fe?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Fn,ut.url)),m.onEvent(_i||su())});return function(Fn){return gt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,fe);const Fe=T,Qe=`${P.packageName.toLowerCase()}://`;rs().handleOpenURL=function(){var gt=(0,p.Z)(function*(ut){if(ut.toLowerCase().startsWith(Qe)&&fe({url:ut}),"function"==typeof Fe)try{Fe(ut)}catch(Fn){console.error(Fn)}});return function(ut){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ht,this._completeRedirectFn=dn,this._overrideRedirectResult=D}_initialize(h){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,T){var P=this;return(0,p.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(h,m,E,T)})()}_openRedirect(h,m,E,T){var P=this;return(0,p.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(h,m,E,T)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return mc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const m=yield function By(){return th.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function _c(_){return _.unwrap()}function vc(_){return el(_)}function el(_){const{_tokenResponse:h}=_ instanceof O.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ws.credentialFromResult(_);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Md;break;case"facebook.com":E=Go;break;case"github.com":E=lf;break;case"twitter.com":E=Rd;break;default:const{oauthIdToken:T,oauthAccessToken:P,oauthTokenSecret:K,pendingToken:fe,nonce:Fe}=h;return P||K||T||fe?fe?m.startsWith("saml.")?ro._create(m,fe):ps._fromParams({providerId:m,signInMethod:m,pendingToken:fe,idToken:T,accessToken:P}):new qi(m).credential({idToken:T,accessToken:P,rawNonce:Fe}):null}return _ instanceof O.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function mi(_,h){return h.catch(m=>{throw m instanceof O.ZR&&function Ec(_,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new xg(_,function er(_,h){var m;const E=(0,O.m9)(_),T=h;return $(h.customData.operationType,E,"argument-error"),$(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),ta._fromError(E,T)}(_,h));else if(E){const T=el(h),P=h;T&&(P.credential=T,P.tenantId=E.tenantId||void 0,P.email=E.email||void 0,P.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:vc(m),additionalUserInfo:Yi(m),user:Io.getOrCreate(T)}})}function kn(_,h){return rh.apply(this,arguments)}function rh(){return(rh=(0,p.Z)(function*(_,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>mi(_,m.confirm(E))}})).apply(this,arguments)}class xg{constructor(h,m){this.resolver=m,this.auth=function Of(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return mi(_c(this.auth),this.resolver.resolveSignIn(h))}}class Io{constructor(h){this._delegate=h,this.multiFactor=function ju(_){const h=(0,O.m9)(_);return Bu.has(h)||Bu.set(h,Ld._fromUser(h)),Bu.get(h)}(h)}static getOrCreate(h){return Io.USER_MAP.has(h)||Io.USER_MAP.set(h,new Io(h)),Io.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,p.Z)(function*(){return mi(m.auth,ar(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,p.Z)(function*(){return kn(E.auth,function mg(_,h,m){return zu.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,p.Z)(function*(){return mi(m.auth,function mf(_,h,m){return mn.apply(this,arguments)}(m._delegate,h,gi))})()}linkWithRedirect(h){var m=this;return(0,p.Z)(function*(){return yield yc(ct(m.auth)),function jt(_,h,m){return function Ct(_,h,m){return cr.apply(this,arguments)}(_,h,m)}(m._delegate,h,gi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,p.Z)(function*(){return mi(m.auth,gs(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return kn(this.auth,function Qr(_,h,m){return br.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return mi(this.auth,function Ql(_,h,m){return Jl.apply(this,arguments)}(this._delegate,h,gi))}reauthenticateWithRedirect(h){var m=this;return(0,p.Z)(function*(){return yield yc(ct(m.auth)),function Ve(_,h,m){return function wt(_,h,m){return bt.apply(this,arguments)}(_,h,m)}(m._delegate,h,gi)})()}sendEmailVerification(h){return function Gl(_,h){return Lu.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,p.Z)(function*(){return yield function cf(_,h){return rn.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function dg(_,h){return Jo((0,O.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function Wl(_,h){return Jo((0,O.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function hi(_,h){return _o.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function zl(_,h){return Ja.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function ql(_,h,m){return Vu.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Io.USER_MAP=new WeakMap;const wc=$;let Rg=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;wc(T,"invalid-api-key",{appName:m.name}),wc(T,"invalid-api-key",{appName:m.name});const P="undefined"!=typeof window?gi:void 0;this._delegate=E.initialize({options:{persistence:Pg(T,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Kr(_,h,m){const E=ct(_);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),P=Ui(h),{host:K,port:fe}=function Hn(_){const h=Ui(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const P=T[1];return{host:P,port:Bi(E.substr(P.length+1))}}{const[P,K]=E.split(":");return{host:P,port:Bi(K)}}}(h);E.config.emulator={url:`${P}//${K}${null===fe?"":`:${fe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:fe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function pn(){function _(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function Se(_,h){return Lt.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ou(this._delegate,m)}confirmPasswordReset(m,E){return function jl(_,h,m){return Hl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,p.Z)(function*(){return mi(T._delegate,function ui(_,h,m){return Ka.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Hs(_,h){return Ai.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Za(_,h){const m=Ru.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){wc(ou(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Gn(_,h){return wn.apply(this,arguments)}(m._delegate,gi);return E?mi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Ly(_,h){ct(_)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:P,error:K,complete:fe}=kf(m,E,T);return this._delegate.onAuthStateChanged(P,K,fe)}onIdTokenChanged(m,E,T){const{next:P,error:K,complete:fe}=kf(m,E,T);return this._delegate.onIdTokenChanged(P,K,fe)}sendSignInLinkToEmail(m,E){return function cg(_,h,m){return ku.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Bl(_,h,m){return Wa.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let T;switch(function Rf(_,h){ma(Object.values(Xr).includes(h),_,"invalid-persistence-type"),(0,O.b$)()?ma(h!==Xr.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?ma(h===Xr.NONE,_,"unsupported-persistence-type"):dr()?ma(h===Xr.NONE||h===Xr.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):ma(h===Xr.NONE||ga(),_,"unsupported-persistence-type")}(E._delegate,m),m){case Xr.SESSION:T=Ht;break;case Xr.LOCAL:T=(yield ee(Xi)._isAvailable())?Xi:Ji;break;case Xr.NONE:T=It;break;default:return Te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return mi(this._delegate,function Pd(_){return Ll.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return mi(this._delegate,bn(this._delegate,m))}signInWithCustomToken(m){return mi(this._delegate,function Ko(_,h){return ft.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return mi(this._delegate,function $l(_,h,m){return bn((0,O.m9)(_),Ad.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return mi(this._delegate,function Fu(_,h,m){return Nn.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return kn(this._delegate,function qu(_,h,m){return Es.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return wc(ou(),E._delegate,"operation-not-supported-in-this-environment"),mi(E._delegate,function Hd(_,h,m){return ns.apply(this,arguments)}(E._delegate,m,gi))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return wc(ou(),E._delegate,"operation-not-supported-in-this-environment"),yield yc(E._delegate),function Y(_,h,m){return function ie(_,h,m){return Pe.apply(this,arguments)}(_,h,m)}(E._delegate,m,gi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Yo(_,h){return oo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Xr,_})();function kf(_,h,m){let E=_;"function"!=typeof _&&({next:E,error:h,complete:m}=_);const T=E;return{next:K=>T(K&&Io.getOrCreate(K)),error:h,complete:m}}function Pg(_,h){const m=function Nf(_,h){const m=Mg();if(!m)return[];const E=Wn(xf,_,h);switch(m.getItem(E)){case Xr.NONE:return[It];case Xr.LOCAL:return[Xi,Ht];case Xr.SESSION:return[Ht];default:return[]}}(_,h);if("undefined"!=typeof self&&!m.includes(Xi)&&m.push(Xi),"undefined"!=typeof window)for(const E of[Ji,Ht])m.includes(E)||m.push(E);return m.includes(It)||m.push(It),m}class ih{constructor(){this.providerId="phone",this._delegate=new ws(_c(X.Z.auth()))}static credential(h,m){return ws.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}ih.PHONE_SIGN_IN_METHOD=ws.PHONE_SIGN_IN_METHOD,ih.PROVIDER_ID=ws.PROVIDER_ID;const sh=$;class Ng{constructor(h,m,E=X.Z.app()){var T;sh(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new yo(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ts(_){_.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new Rg(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ad,FacebookAuthProvider:Go,GithubAuthProvider:lf,GoogleAuthProvider:Md,OAuthProvider:qi,SAMLAuthProvider:Pr,PhoneAuthProvider:ih,PhoneMultiFactorGenerator:Jd,RecaptchaVerifier:Ng,TwitterAuthProvider:Rd,Auth:Rg,AuthCredential:Ti,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.15")}(X.Z)},8306:(nt,we,N)=>{N.d(we,{y:()=>G});var p=N(2961),X=N(727),O=N(8822),le=N(4671);var ue=N(2416),oe=N(576),he=N(2806);let G=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const pe=new Me;return pe.source=this,pe.operator=Ue,pe}subscribe(Ue,pe,Ie){const Ke=function We(Me){return Me&&Me instanceof p.Lv||function te(Me){return Me&&(0,oe.m)(Me.next)&&(0,oe.m)(Me.error)&&(0,oe.m)(Me.complete)}(Me)&&(0,X.Nn)(Me)}(Ue)?Ue:new p.Hp(Ue,pe,Ie);return(0,he.x)(()=>{const{operator:Je,source:Te}=this;Ke.add(Je?Je.call(Ke,Te):Te?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(pe){Ue.error(pe)}}forEach(Ue,pe){return new(pe=H(pe))((Ie,Ke)=>{const Je=new p.Hp({next:Te=>{try{Ue(Te)}catch(Ee){Ke(Ee),Je.unsubscribe()}},error:Ke,complete:Ie});this.subscribe(Je)})}_subscribe(Ue){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ue)}[O.L](){return this}pipe(...Ue){return function ge(Me){return 0===Me.length?le.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((pe,Ie)=>Ie(pe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=H(Ue))((pe,Ie)=>{let Ke;this.subscribe(Je=>Ke=Je,Je=>Ie(Je),()=>pe(Ke))})}}return Me.create=Ne=>new Me(Ne),Me})();function H(Me){var Ne;return null!==(Ne=null!=Me?Me:ue.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(nt,we,N)=>{N.d(we,{x:()=>ue});var p=N(8306),X=N(727);const le=(0,N(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=N(8737),ge=N(2806);let ue=(()=>{class he extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const te=new oe(this,this);return te.operator=H,te}_throwIfClosed(){if(this.closed)throw new le}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:te}=this;for(;te.length;)te.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:te,isStopped:We,observers:Me}=this;return te||We?X.Lc:(this.currentObservers=null,Me.push(H),new X.w0(()=>{this.currentObservers=null,(0,ne.P)(Me,H)}))}_checkFinalizedStatuses(H){const{hasError:te,thrownError:We,isStopped:Me}=this;te?H.error(We):Me&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return he.create=(G,H)=>new oe(G,H),he})();class oe extends ue{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===te||te.call(H,G)}error(G){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===te||te.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,te;return null!==(te=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==te?te:X.Lc}}},2961:(nt,we,N)=>{N.d(we,{Hp:()=>Ue,Lv:()=>te});var p=N(576),X=N(727),O=N(2416),le=N(7849);function ne(){}const ge=he("C",void 0,void 0);function he(Te,Ee,be){return{kind:Te,value:Ee,error:be}}var G=N(3410),H=N(2806);class te extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=Je}static create(Ee,be,je){return new Ue(Ee,be,je)}next(Ee){this.isStopped?Ke(function oe(Te){return he("N",Te,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ke(function ue(Te){return he("E",void 0,Te)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ke(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Me(Te,Ee){return We.call(Te,Ee)}class Ne{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:be}=this;if(be.next)try{be.next(Ee)}catch(je){pe(je)}}error(Ee){const{partialObserver:be}=this;if(be.error)try{be.error(Ee)}catch(je){pe(je)}else pe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(be){pe(be)}}}class Ue extends te{constructor(Ee,be,je){let Be;if(super(),(0,p.m)(Ee)||!Ee)Be={next:null!=Ee?Ee:void 0,error:null!=be?be:void 0,complete:null!=je?je:void 0};else{let $;this&&O.v.useDeprecatedNextContext?($=Object.create(Ee),$.unsubscribe=()=>this.unsubscribe(),Be={next:Ee.next&&Me(Ee.next,$),error:Ee.error&&Me(Ee.error,$),complete:Ee.complete&&Me(Ee.complete,$)}):Be=Ee}this.destination=new Ne(Be)}}function pe(Te){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Te):(0,le.h)(Te)}function Ke(Te,Ee){const{onStoppedNotification:be}=O.v;be&&G.z.setTimeout(()=>be(Te,Ee))}const Je={closed:!0,next:ne,error:function Ie(Te){throw Te},complete:ne}},727:(nt,we,N)=>{N.d(we,{Lc:()=>ge,w0:()=>ne,Nn:()=>ue});var p=N(576);const O=(0,N(3888).d)(he=>function(H){he(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((te,We)=>`${We+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var le=N(8737);class ne{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Me of H)Me.remove(this);else H.remove(this);const{initialTeardown:te}=this;if((0,p.m)(te))try{te()}catch(Me){G=Me instanceof O?Me.errors:[Me]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Me of We)try{oe(Me)}catch(Ne){G=null!=G?G:[],Ne instanceof O?G=[...G,...Ne.errors]:G.push(Ne)}}if(G)throw new O(G)}}add(G){var H;if(G&&G!==this)if(this.closed)oe(G);else{if(G instanceof ne){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,le.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,le.P)(H,G),G instanceof ne&&G._removeParent(this)}}ne.EMPTY=(()=>{const he=new ne;return he.closed=!0,he})();const ge=ne.EMPTY;function ue(he){return he instanceof ne||he&&"closed"in he&&(0,p.m)(he.remove)&&(0,p.m)(he.add)&&(0,p.m)(he.unsubscribe)}function oe(he){(0,p.m)(he)?he():he.unsubscribe()}},2416:(nt,we,N)=>{N.d(we,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,we,N)=>{N.d(we,{E:()=>X});const X=new(N(8306).y)(ne=>ne.complete())},8996:(nt,we,N)=>{N.d(we,{D:()=>Ee});var p=N(8421),X=N(5363),O=N(9468),ge=N(8306),oe=N(2202),he=N(576),G=N(9672);function te(be,je){if(!be)throw new Error("Iterable cannot be null");return new ge.y(Be=>{(0,G.f)(Be,je,()=>{const $=be[Symbol.asyncIterator]();(0,G.f)(Be,je,()=>{$.next().then(ve=>{ve.done?Be.complete():Be.next(ve.value)})},0,!0)})})}var We=N(3670),Me=N(8239),Ne=N(1144),Ue=N(6495),pe=N(2206),Ie=N(4532),Ke=N(3260);function Ee(be,je){return je?function Te(be,je){if(null!=be){if((0,We.c)(be))return function le(be,je){return(0,p.Xf)(be).pipe((0,O.R)(je),(0,X.Q)(je))}(be,je);if((0,Ne.z)(be))return function ue(be,je){return new ge.y(Be=>{let $=0;return je.schedule(function(){$===be.length?Be.complete():(Be.next(be[$++]),Be.closed||this.schedule())})})}(be,je);if((0,Me.t)(be))return function ne(be,je){return(0,p.Xf)(be).pipe((0,O.R)(je),(0,X.Q)(je))}(be,je);if((0,pe.D)(be))return te(be,je);if((0,Ue.T)(be))return function H(be,je){return new ge.y(Be=>{let $;return(0,G.f)(Be,je,()=>{$=be[oe.h](),(0,G.f)(Be,je,()=>{let ve,Z;try{({value:ve,done:Z}=$.next())}catch(re){return void Be.error(re)}Z?Be.complete():Be.next(ve)},0,!0)}),()=>(0,he.m)(null==$?void 0:$.return)&&$.return()})}(be,je);if((0,Ke.L)(be))return function Je(be,je){return te((0,Ke.Q)(be),je)}(be,je)}throw(0,Ie.z)(be)}(be,je):(0,p.Xf)(be)}},8421:(nt,we,N)=>{N.d(we,{Xf:()=>We});var p=N(655),X=N(1144),O=N(8239),le=N(8306),ne=N(3670),ge=N(2206),ue=N(4532),oe=N(6495),he=N(3260),G=N(576),H=N(7849),te=N(8822);function We(Te){if(Te instanceof le.y)return Te;if(null!=Te){if((0,ne.c)(Te))return function Me(Te){return new le.y(Ee=>{const be=Te[te.L]();if((0,G.m)(be.subscribe))return be.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,X.z)(Te))return function Ne(Te){return new le.y(Ee=>{for(let be=0;be<Te.length&&!Ee.closed;be++)Ee.next(Te[be]);Ee.complete()})}(Te);if((0,O.t)(Te))return function Ue(Te){return new le.y(Ee=>{Te.then(be=>{Ee.closed||(Ee.next(be),Ee.complete())},be=>Ee.error(be)).then(null,H.h)})}(Te);if((0,ge.D)(Te))return Ie(Te);if((0,oe.T)(Te))return function pe(Te){return new le.y(Ee=>{for(const be of Te)if(Ee.next(be),Ee.closed)return;Ee.complete()})}(Te);if((0,he.L)(Te))return function Ke(Te){return Ie((0,he.Q)(Te))}(Te)}throw(0,ue.z)(Te)}function Ie(Te){return new le.y(Ee=>{(function Je(Te,Ee){var be,je,Be,$;return(0,p.mG)(this,void 0,void 0,function*(){try{for(be=(0,p.KL)(Te);!(je=yield be.next()).done;)if(Ee.next(je.value),Ee.closed)return}catch(ve){Be={error:ve}}finally{try{je&&!je.done&&($=be.return)&&(yield $.call(be))}finally{if(Be)throw Be.error}}Ee.complete()})})(Te,Ee).catch(be=>Ee.error(be))})}},6451:(nt,we,N)=>{N.d(we,{T:()=>ge});var p=N(8189),X=N(8421),O=N(515),le=N(7669),ne=N(8996);function ge(...ue){const oe=(0,le.yG)(ue),he=(0,le._6)(ue,1/0),G=ue;return G.length?1===G.length?(0,X.Xf)(G[0]):(0,p.J)(he)((0,ne.D)(G,oe)):O.E}},5403:(nt,we,N)=>{N.d(we,{x:()=>X});var p=N(2961);function X(le,ne,ge,ue,oe){return new O(le,ne,ge,ue,oe)}class O extends p.Lv{constructor(ne,ge,ue,oe,he,G){super(ne),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=ge?function(H){try{ge(H)}catch(te){ne.error(te)}}:super._next,this._error=oe?function(H){try{oe(H)}catch(te){ne.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(H){ne.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(nt,we,N)=>{N.d(we,{U:()=>O});var p=N(4482),X=N(5403);function O(le,ne){return(0,p.e)((ge,ue)=>{let oe=0;ge.subscribe((0,X.x)(ue,he=>{ue.next(le.call(ne,he,oe++))}))})}},8189:(nt,we,N)=>{N.d(we,{J:()=>O});var p=N(5577),X=N(4671);function O(le=1/0){return(0,p.z)(X.y,le)}},5577:(nt,we,N)=>{N.d(we,{z:()=>oe});var p=N(4004),X=N(8421),O=N(4482),le=N(9672),ne=N(5403),ue=N(576);function oe(he,G,H=1/0){return(0,ue.m)(G)?oe((te,We)=>(0,p.U)((Me,Ne)=>G(te,Me,We,Ne))((0,X.Xf)(he(te,We))),H):("number"==typeof G&&(H=G),(0,O.e)((te,We)=>function ge(he,G,H,te,We,Me,Ne,Ue){const pe=[];let Ie=0,Ke=0,Je=!1;const Te=()=>{Je&&!pe.length&&!Ie&&G.complete()},Ee=je=>Ie<te?be(je):pe.push(je),be=je=>{Me&&G.next(je),Ie++;let Be=!1;(0,X.Xf)(H(je,Ke++)).subscribe((0,ne.x)(G,$=>{null==We||We($),Me?Ee($):G.next($)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ie--;pe.length&&Ie<te;){const $=pe.shift();Ne?(0,le.f)(G,Ne,()=>be($)):be($)}Te()}catch($){G.error($)}}))};return he.subscribe((0,ne.x)(G,Ee,()=>{Je=!0,Te()})),()=>{null==Ue||Ue()}}(te,We,he,H)))}},5363:(nt,we,N)=>{N.d(we,{Q:()=>le});var p=N(9672),X=N(4482),O=N(5403);function le(ne,ge=0){return(0,X.e)((ue,oe)=>{ue.subscribe((0,O.x)(oe,he=>(0,p.f)(oe,ne,()=>oe.next(he),ge),()=>(0,p.f)(oe,ne,()=>oe.complete(),ge),he=>(0,p.f)(oe,ne,()=>oe.error(he),ge)))})}},3099:(nt,we,N)=>{N.d(we,{B:()=>ge});var p=N(8996),X=N(5698),O=N(7579),le=N(2961),ne=N(4482);function ge(oe={}){const{connector:he=(()=>new O.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:te=!0}=oe;return We=>{let Me=null,Ne=null,Ue=null,pe=0,Ie=!1,Ke=!1;const Je=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Te=()=>{Je(),Me=Ue=null,Ie=Ke=!1},Ee=()=>{const be=Me;Te(),null==be||be.unsubscribe()};return(0,ne.e)((be,je)=>{pe++,!Ke&&!Ie&&Je();const Be=Ue=null!=Ue?Ue:he();je.add(()=>{pe--,0===pe&&!Ke&&!Ie&&(Ne=ue(Ee,te))}),Be.subscribe(je),Me||(Me=new le.Hp({next:$=>Be.next($),error:$=>{Ke=!0,Je(),Ne=ue(Te,G,$),Be.error($)},complete:()=>{Ie=!0,Je(),Ne=ue(Te,H),Be.complete()}}),(0,p.D)(be).subscribe(Me))})(We)}}function ue(oe,he,...G){return!0===he?(oe(),null):!1===he?null:he(...G).pipe((0,X.q)(1)).subscribe(()=>oe())}},9468:(nt,we,N)=>{N.d(we,{R:()=>X});var p=N(4482);function X(O,le=0){return(0,p.e)((ne,ge)=>{ge.add(O.schedule(()=>ne.subscribe(ge),le))})}},5698:(nt,we,N)=>{N.d(we,{q:()=>le});var p=N(515),X=N(4482),O=N(5403);function le(ne){return ne<=0?()=>p.E:(0,X.e)((ge,ue)=>{let oe=0;ge.subscribe((0,O.x)(ue,he=>{++oe<=ne&&(ue.next(he),ne<=oe&&ue.complete())}))})}},8505:(nt,we,N)=>{N.d(we,{b:()=>ne});var p=N(576),X=N(4482),O=N(5403),le=N(4671);function ne(ge,ue,oe){const he=(0,p.m)(ge)||ue||oe?{next:ge,error:ue,complete:oe}:ge;return he?(0,X.e)((G,H)=>{var te;null===(te=he.subscribe)||void 0===te||te.call(he);let We=!0;G.subscribe((0,O.x)(H,Me=>{var Ne;null===(Ne=he.next)||void 0===Ne||Ne.call(he,Me),H.next(Me)},()=>{var Me;We=!1,null===(Me=he.complete)||void 0===Me||Me.call(he),H.complete()},Me=>{var Ne;We=!1,null===(Ne=he.error)||void 0===Ne||Ne.call(he,Me),H.error(Me)},()=>{var Me,Ne;We&&(null===(Me=he.unsubscribe)||void 0===Me||Me.call(he)),null===(Ne=he.finalize)||void 0===Ne||Ne.call(he)}))}):le.y}},4408:(nt,we,N)=>{N.d(we,{o:()=>ne});var p=N(727);class X extends p.w0{constructor(ue,oe){super()}schedule(ue,oe=0){return this}}const O={setInterval(ge,ue,...oe){const{delegate:he}=O;return(null==he?void 0:he.setInterval)?he.setInterval(ge,ue,...oe):setInterval(ge,ue,...oe)},clearInterval(ge){const{delegate:ue}=O;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ge)},delegate:void 0};var le=N(8737);class ne extends X{constructor(ue,oe){super(ue,oe),this.scheduler=ue,this.work=oe,this.pending=!1}schedule(ue,oe=0){if(this.closed)return this;this.state=ue;const he=this.id,G=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(G,he,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(G,this.id,oe),this}requestAsyncId(ue,oe,he=0){return O.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,oe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return oe;O.clearInterval(oe)}execute(ue,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,oe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,oe){let G,he=!1;try{this.work(ue)}catch(H){he=!0,G=H||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ue,scheduler:oe}=this,{actions:he}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(oe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,we,N)=>{N.d(we,{v:()=>O});var p=N(6063);class X{constructor(ne,ge=X.now){this.schedulerActionCtor=ne,this.now=ge}schedule(ne,ge=0,ue){return new this.schedulerActionCtor(this,ne).schedule(ue,ge)}}X.now=p.l.now;class O extends X{constructor(ne,ge=X.now){super(ne,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:ge}=this;if(this._active)return void ge.push(ne);let ue;this._active=!0;do{if(ue=ne.execute(ne.state,ne.delay))break}while(ne=ge.shift());if(this._active=!1,ue){for(;ne=ge.shift();)ne.unsubscribe();throw ue}}}},4986:(nt,we,N)=>{N.d(we,{z:()=>O});var p=N(4408);const O=new(N(7565).v)(p.o)},6063:(nt,we,N)=>{N.d(we,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(nt,we,N)=>{N.d(we,{z:()=>p});const p={setTimeout(X,O,...le){const{delegate:ne}=p;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(X,O,...le):setTimeout(X,O,...le)},clearTimeout(X){const{delegate:O}=p;return((null==O?void 0:O.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(nt,we,N)=>{N.d(we,{h:()=>X});const X=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,we,N)=>{N.d(we,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,we,N)=>{N.d(we,{_6:()=>ge,jO:()=>le,yG:()=>ne});var p=N(576);function O(ue){return ue[ue.length-1]}function le(ue){return(0,p.m)(O(ue))?ue.pop():void 0}function ne(ue){return function X(ue){return ue&&(0,p.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function ge(ue,oe){return"number"==typeof O(ue)?ue.pop():oe}},8737:(nt,we,N)=>{function p(X,O){if(X){const le=X.indexOf(O);0<=le&&X.splice(le,1)}}N.d(we,{P:()=>p})},3888:(nt,we,N)=>{function p(X){const le=X(ne=>{Error.call(ne),ne.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}N.d(we,{d:()=>p})},2806:(nt,we,N)=>{N.d(we,{x:()=>O,O:()=>le});var p=N(2416);let X=null;function O(ne){if(p.v.useDeprecatedSynchronousErrorHandling){const ge=!X;if(ge&&(X={errorThrown:!1,error:null}),ne(),ge){const{errorThrown:ue,error:oe}=X;if(X=null,ue)throw oe}}else ne()}function le(ne){p.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ne)}},9672:(nt,we,N)=>{function p(X,O,le,ne=0,ge=!1){const ue=O.schedule(function(){le(),ge?X.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(X.add(ue),!ge)return ue}N.d(we,{f:()=>p})},4671:(nt,we,N)=>{function p(X){return X}N.d(we,{y:()=>p})},1144:(nt,we,N)=>{N.d(we,{z:()=>p});const p=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(nt,we,N)=>{N.d(we,{D:()=>X});var p=N(576);function X(O){return Symbol.asyncIterator&&(0,p.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(nt,we,N)=>{function p(X){return"function"==typeof X}N.d(we,{m:()=>p})},3670:(nt,we,N)=>{N.d(we,{c:()=>O});var p=N(8822),X=N(576);function O(le){return(0,X.m)(le[p.L])}},6495:(nt,we,N)=>{N.d(we,{T:()=>O});var p=N(2202),X=N(576);function O(le){return(0,X.m)(null==le?void 0:le[p.h])}},8239:(nt,we,N)=>{N.d(we,{t:()=>X});var p=N(576);function X(O){return(0,p.m)(null==O?void 0:O.then)}},3260:(nt,we,N)=>{N.d(we,{Q:()=>O,L:()=>le});var p=N(655),X=N(576);function O(ne){return(0,p.FC)(this,arguments,function*(){const ue=ne.getReader();try{for(;;){const{value:oe,done:he}=yield(0,p.qq)(ue.read());if(he)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(oe)}}finally{ue.releaseLock()}})}function le(ne){return(0,X.m)(null==ne?void 0:ne.getReader)}},4482:(nt,we,N)=>{N.d(we,{A:()=>X,e:()=>O});var p=N(576);function X(le){return(0,p.m)(null==le?void 0:le.lift)}function O(le){return ne=>{if(X(ne))return ne.lift(function(ge){try{return le(ge,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,we,N)=>{N.d(we,{h:()=>O});var p=N(2416),X=N(3410);function O(le){X.z.setTimeout(()=>{const{onUnhandledError:ne}=p.v;if(!ne)throw le;ne(le)})}},4532:(nt,we,N)=>{function p(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(we,{z:()=>p})},655:(nt,we,N)=>{function le(Z,re){var ee={};for(var ye in Z)Object.prototype.hasOwnProperty.call(Z,ye)&&re.indexOf(ye)<0&&(ee[ye]=Z[ye]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(ye=Object.getOwnPropertySymbols(Z);ae<ye.length;ae++)re.indexOf(ye[ae])<0&&Object.prototype.propertyIsEnumerable.call(Z,ye[ae])&&(ee[ye[ae]]=Z[ye[ae]])}return ee}function oe(Z,re,ee,ye){return new(ee||(ee=Promise))(function(Oe,dt){function Gt(tn){try{Xe(ye.next(tn))}catch(xn){dt(xn)}}function Ut(tn){try{Xe(ye.throw(tn))}catch(xn){dt(xn)}}function Xe(tn){tn.done?Oe(tn.value):function ae(Oe){return Oe instanceof ee?Oe:new ee(function(dt){dt(Oe)})}(tn.value).then(Gt,Ut)}Xe((ye=ye.apply(Z,re||[])).next())})}function pe(Z){return this instanceof pe?(this.v=Z,this):new pe(Z)}function Ie(Z,re,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ye=ee.apply(Z,re||[]),Oe=[];return ae={},dt("next"),dt("throw"),dt("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function dt(un){ye[un]&&(ae[un]=function(Xt){return new Promise(function(Ar,Wt){Oe.push([un,Xt,Ar,Wt])>1||Gt(un,Xt)})})}function Gt(un,Xt){try{!function Ut(un){un.value instanceof pe?Promise.resolve(un.value.v).then(Xe,tn):xn(Oe[0][2],un)}(ye[un](Xt))}catch(Ar){xn(Oe[0][3],Ar)}}function Xe(un){Gt("next",un)}function tn(un){Gt("throw",un)}function xn(un,Xt){un(Xt),Oe.shift(),Oe.length&&Gt(Oe[0][0],Oe[0][1])}}function Je(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,re=Z[Symbol.asyncIterator];return re?re.call(Z):(Z=function te(Z){var re="function"==typeof Symbol&&Symbol.iterator,ee=re&&Z[re],ye=0;if(ee)return ee.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ye>=Z.length&&(Z=void 0),{value:Z&&Z[ye++],done:!Z}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ee={},ye("next"),ye("throw"),ye("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ye(Oe){ee[Oe]=Z[Oe]&&function(dt){return new Promise(function(Gt,Ut){!function ae(Oe,dt,Gt,Ut){Promise.resolve(Ut).then(function(Xe){Oe({value:Xe,done:Gt})},dt)}(Gt,Ut,(dt=Z[Oe](dt)).done,dt.value)})}}}N.d(we,{_T:()=>le,mG:()=>oe,qq:()=>pe,FC:()=>Ie,KL:()=>Je})},5e3:(nt,we,N)=>{N.d(we,{deG:()=>gf,tb:()=>$r,AFp:()=>Bb,ip1:()=>Il,CZH:()=>e0,hGG:()=>BT,z2F:()=>s0,sBO:()=>TT,Sil:()=>mT,_Vd:()=>zm,EJc:()=>pT,SBq:()=>$h,qLn:()=>vc,vpe:()=>xo,tBr:()=>dn,XFs:()=>mt,OlP:()=>En,zs3:()=>Oi,ZZ4:()=>dy,aQg:()=>m0,soG:()=>ny,YKP:()=>nr,h0i:()=>Sp,PXZ:()=>CT,R0b:()=>us,FiY:()=>Lr,Lbi:()=>Up,g9A:()=>Vp,Qsj:()=>Kt,FYo:()=>Cp,JOm:()=>T,tp0:()=>pi,Rgc:()=>od,dDg:()=>wT,q4F:()=>Tn,GfV:()=>rb,s_b:()=>wl,ifc:()=>qt,eFA:()=>Ys,G48:()=>u0,Gpc:()=>H,X6Q:()=>DT,_c5:()=>UT,VLi:()=>XA,c2e:()=>Hb,zSh:()=>os,wAp:()=>_t,vHH:()=>Ne,cg1:()=>vp,kL8:()=>Sm,dqk:()=>Bt,sIi:()=>tp,CqO:()=>R_,QGY:()=>x_,F4k:()=>cp,RDi:()=>Vl,AaK:()=>oe,qOj:()=>rm,TTD:()=>qi,_Bn:()=>Kw,xp6:()=>oE,uIk:()=>__,ekj:()=>H_,Suo:()=>Eb,Xpm:()=>ht,lG2:()=>Su,Yz7:()=>Xt,cJS:()=>Wt,oAB:()=>xr,Yjl:()=>Ua,Y36:()=>Zs,_UZ:()=>Sa,qZA:()=>lp,TgZ:()=>yu,EpF:()=>ew,n5z:()=>$u,LFG:()=>Ve,$8M:()=>nu,$Z:()=>zc,NdJ:()=>P_,CRH:()=>wb,oxw:()=>N_,Q6J:()=>hm,s9C:()=>dp,iGM:()=>_b,CHM:()=>Ou,LSH:()=>iu,YNc:()=>um,_uU:()=>mp,Oqu:()=>Yc});var p=N(7579),X=N(727),O=N(8306),le=N(6451),ne=N(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return oe(this())},s}function te(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class Ne extends Error{constructor(o,a){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function Ee(s,o){const a=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${Ie(s)} found${a}`)}function Ut(s,o){null==s&&function Xe(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Wt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Vt(s){return hs(s,Vi)||hs(s,ri)}function hs(s,o){return s.hasOwnProperty(o)?s[o]:null}function Mr(s){return s&&(s.hasOwnProperty(ks)||s.hasOwnProperty(Ii))?s[ks]:null}const Vi=ge({\u0275prov:ge}),ks=ge({\u0275inj:ge}),ri=ge({ngInjectableDef:ge}),Ii=ge({ngInjectorDef:ge});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let ii;function Rn(s){const o=ii;return ii=s,o}function Js(s,o,a){const l=Vt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&mt.Optional?null:void 0!==o?o:void Ee(oe(s),"Injector")}function Qn(s){return{toString:s}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),qt=(()=>{return(s=qt||(qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",qt;var s})();const at="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,gr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bt=at||"undefined"!=typeof global&&global||Et||gr,yr={},U=[],z=ge({\u0275cmp:ge}),W=ge({\u0275dir:ge}),Ce=ge({\u0275pipe:ge}),q=ge({\u0275mod:ge}),J=ge({\u0275fac:ge}),Re=ge({__NG_ELEMENT_ID__:ge});let tt=0;function ht(s){return Qn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||U,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||qt.Emulated,id:"c",styles:s.styles||U,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=tt++,l.inputs=Va(s.inputs,a),l.outputs=Va(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(fn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(It):null,l})}function fn(s){return Kn(s)||function Rr(s){return s[W]||null}(s)}function It(s){return function fs(s){return s[Ce]||null}(s)}const Wn={};function xr(s){return Qn(()=>{const o={type:s.type,bootstrap:s.bootstrap||U,declarations:s.declarations||U,imports:s.imports||U,exports:s.exports||U,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Wn[s.id]=s.type),o})}function Va(s,o){if(null==s)return yr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Su=ht;function Ua(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Kn(s){return s[z]||null}function Zn(s,o){const a=s[q]||null;if(!a&&!0===o)throw new Error(`Type ${oe(s)} does not have '\u0275mod' property.`);return a}function Zr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Hi(s){return Array.isArray(s)&&!0===s[1]}function xu(s){return 0!=(8&s.flags)}function wd(s){return 2==(2&s.flags)}function $i(s){return 1==(1&s.flags)}function Gi(s){return null!==s.template}function Ol(s){return 0!=(512&s[2])}function vr(s,o){return s.hasOwnProperty(J)?s[J]:null}class no{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function qi(){return Go}function Go(s){return s.type.prototype.ngOnChanges&&(s.setInput=lf),Md}function Md(){const s=ro(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===yr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function lf(s,o,a,l){const d=ro(s)||function qo(s,o){return s[xd]=o}(s,{previous:yr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],C=v[w];g[w]=new no(C&&C.currentValue,o,v===yr),s[l]=o}qi.ngInherit=!0;const xd="__ngSimpleChanges__";function ro(s){return s[xd]||null}let Wo;function Vl(s){Wo=s}function rn(s){return!!s.listen}const $a={createRenderer:(s,o)=>function zi(){return void 0!==Wo?Wo:"undefined"!=typeof document?document:void 0}()};function en(s){for(;Array.isArray(s);)s=s[0];return s}function js(s,o){return en(o[s])}function or(s,o){return en(o[s.index])}function bn(s,o){return s.data[o]}function ar(s,o){const a=o[s];return Zr(a)?a:a[0]}function so(s){return 4==(4&s[2])}function gs(s){return 128==(128&s[2])}function Si(s,o){return null==o?null:s[o]}function Ki(s){s[18]=0}function Ko(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const ft={lFrame:Nd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Wa(){return ft.bindingsEnabled}function Se(){return ft.lFrame.lView}function Lt(){return ft.lFrame.tView}function Ou(s){return ft.lFrame.contextLView=s,s[8]}function gn(){let s=Yo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Yo(){return ft.lFrame.currentTNode}function ui(s,o){const a=ft.lFrame;a.currentTNode=s,a.isParent=o}function Ka(){return ft.lFrame.isParent}function Za(){return ft.isInCheckNoChangesMode}function Fu(s){ft.isInCheckNoChangesMode=s}function Hs(){return ft.lFrame.bindingIndex++}function ql(s,o){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=s,Qa(o)}function Qa(s){ft.lFrame.currentDirectiveIndex=s}function zl(){return ft.lFrame.currentQueryIndex}function Ja(s){ft.lFrame.currentQueryIndex=s}function dg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Wl(s,o,a){if(a&mt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&mt.Host||(d=dg(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=ft.lFrame=Xa();return l.currentTNode=o,l.lView=s,!0}function Jo(s){const o=Xa(),a=s[1];ft.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Xa(){const s=ft.lFrame,o=null===s?null:s.child;return null===o?Nd(s):o}function Nd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Xo(){const s=ft.lFrame;return ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Od=Xo;function ea(){const s=Xo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Xn(){return ft.lFrame.selectedIndex}function Yi(s){ft.lFrame.selectedIndex=s}function An(){const s=ft.lFrame;return bn(s.tView,s.selectedIndex)}function Fd(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function eu(s,o,a){er(s,o,3,a)}function ys(s,o,a,l){(3&s[2])===a&&er(s,o,a,l)}function ta(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function er(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let C=void 0!==l?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=l&&w>=l)break}else o[C]<0&&(s[18]+=65536),(w<g||-1==g)&&(ff(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function ff(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Uu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function kt(s,o,a){const l=rn(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],C=a[d++];l?s.setAttribute(o,w,C,v):o.setAttributeNS(v,w,C)}else{const v=g,w=a[++d];pt(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function Ji(s){return 3===s||4===s||6===s}function pt(s){return 64===s.charCodeAt(0)}function Ht(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||na(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function na(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function Ud(s){return-1!==s}function li(s){return 32767&s}function sn(s,o){let a=function ur(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let $n=!0;function _s(s){const o=$n;return $n=s,o}let tu=0;function lo(s,o){const a=On(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Er(l.data,s),Er(o,null),Er(l.blueprint,null));const d=co(s,o),g=s.injectorIndex;if(Ud(d)){const v=li(d),w=sn(d,o),C=w[1].data;for(let A=0;A<8;A++)o[g+A]=w[v+A]|C[v+A]}return o[g+8]=d,g}function Er(s,o){s.push(0,0,0,0,0,0,0,0,o)}function On(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function co(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function lr(s,o,a){!function Bd(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Re)&&(l=a[Re]),null==l&&(l=a[Re]=tu++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function wr(s,o,a){if(a&mt.Optional)return s;Ee(o,"NodeInjector")}function Mi(s,o,a,l){if(a&mt.Optional&&void 0===l&&(l=null),0==(a&(mt.Self|mt.Host))){const d=s[9],g=Rn(void 0);try{return d?d.get(o,l,a&mt.Optional):Js(o,l,a&mt.Optional)}finally{Rn(g)}}return wr(l,o,a)}function ci(s,o,a,l=mt.Default,d){if(null!==s){const g=function xt(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Re)?s[Re]:void 0;return"number"==typeof o?o>=0?255&o:ho:o}(a);if("function"==typeof g){if(!Wl(o,s,l))return l&mt.Host?wr(d,a,l):Mi(o,a,l,d);try{const v=g(l);if(null!=v||l&mt.Optional)return v;Ee(a)}finally{Od()}}else if("number"==typeof g){let v=null,w=On(s,o),C=-1,A=l&mt.Host?o[16][6]:null;for((-1===w||l&mt.SkipSelf)&&(C=-1===w?co(s,o):o[w+8],-1!==C&&ia(l,!1)?(v=o[1],w=li(C),o=sn(C,o)):w=-1);-1!==w;){const x=o[1];if(Xi(g,w,x.data)){const k=di(w,o,a,v,l,A);if(k!==yt)return k}C=o[w+8],-1!==C&&ia(l,o[1].data[w+8]===A)&&Xi(g,w,o)?(v=x,w=li(C),o=sn(C,o)):w=-1}}}return Mi(o,a,l,d)}const yt={};function ho(){return new es(gn(),Se())}function di(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=et(w,v,a,null==l?wd(w)&&$n:l!=v&&0!=(3&w.type),d&mt.Host&&g===w);return null!==x?fo(o,v,x,w):yt}function et(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,C=s.directiveStart,x=g>>20,j=d?w+x:s.directiveEnd;for(let Q=l?w:w+x;Q<j;Q++){const _e=v[Q];if(Q<C&&a===_e||Q>=C&&_e.type===a)return Q}if(d){const Q=v[C];if(Q&&Gi(Q)&&Q.type===a)return C}return null}function fo(s,o,a,l){let d=s[a];const g=o.data;if(function Ld(s){return s instanceof Uu}(d)){const v=d;v.resolving&&function Ke(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ie(g[a]));const w=_s(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Rn(v.injectImpl):null;Wl(s,l,mt.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function hg(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Go(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==C&&Rn(C),_s(w),v.resolving=!1,Od()}}return d}function Xi(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function ia(s,o){return!(s&mt.Self||s&mt.Host&&o)}class es{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return ci(this._tNode,this._lView,o,l,a)}}function $u(s){return Qn(()=>{const o=s.prototype.constructor,a=o[J]||po(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[J]||po(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function po(s){return We(s)?()=>{const o=po(te(s));return o&&o()}:vr(s)}function nu(s){return function me(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(Ji(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(gn(),s)}const vs="__parameters__";function Yr(s,o,a){return Qn(()=>{const l=function Mn(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(C,A,x){const k=C.hasOwnProperty(vs)?C[vs]:Object.defineProperty(C,vs,{value:[]})[vs];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class En{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gf=new En("AnalyzeForEntryComponents");function Qr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Qr(l,o)):o!==s&&o.push(l)}return o}function br(s,o){s.forEach(a=>Array.isArray(a)?br(a,o):o(a))}function ru(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function sa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Fr(s,o,a){let l=$s(s,o);return l>=0?s[1|l]=a:(l=~l,function ts(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function oa(s,o){const a=$s(s,o);if(a>=0)return s[1|a]}function $s(s,o){return function Hd(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const aa={},qs="__NG_DI_FLAG__",Cs="ngTempTokenPath",I=/\n/gm,R="__source",L=ge({provide:String,useValue:ge});let Y;function ie(s){const o=Y;return Y=s,o}function Pe(s,o=mt.Default){if(void 0===Y)throw new Ne(203,"");return null===Y?Js(s,void 0,o):Y.get(s,o&mt.Optional?null:void 0,o)}function Ve(s,o=mt.Default){return(function Sn(){return ii}()||Pe)(te(s),o)}const bt=Ve;function jt(s){const o=[];for(let a=0;a<s.length;a++){const l=te(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let d,g=mt.Default;for(let v=0;v<l.length;v++){const w=l[v],C=cr(w);"number"==typeof C?-1===C?d=w.token:g|=C:d=w}o.push(Ve(d,g))}else o.push(Ve(l))}return o}function Ct(s,o){return s[qs]=o,s.prototype[qs]=o,s}function cr(s){return s[qs]}const dn=Ct(Yr("Inject",s=>({token:s})),-1),Lr=Ct(Yr("Optional"),8),pi=Ct(Yr("SkipSelf"),4);class Ef{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Is(s){return s instanceof Ef?s.changingThisBreaksApplicationSecurity:s}const Oy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,If=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var yn=(()=>((yn=yn||{})[yn.NONE=0]="NONE",yn[yn.HTML=1]="HTML",yn[yn.STYLE=2]="STYLE",yn[yn.SCRIPT=3]="SCRIPT",yn[yn.URL=4]="URL",yn[yn.RESOURCE_URL=5]="RESOURCE_URL",yn))();function iu(s){const o=function is(){const s=Se();return s&&s[12]}();return o?o.sanitize(yn.URL,s)||"":function da(s,o){const a=function bf(s){return s instanceof Ef&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?Is(s):function rs(s){return(s=String(s)).match(Oy)||s.match(If)?s:"unsafe:"+s}(pe(s))}const ga="__ngContext__";function dr(s,o){s[ga]=o}function mc(s){const o=function ou(s){return s[ga]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function gi(s){return s.ngOriginalError}function Of(s,...o){s.error(...o)}class vc{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function _c(s){return s&&s.ngErrorLogger||Of}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&gi(o);for(;a&&gi(a);)a=gi(a);return a||null}}const Pg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bt))();function Ts(s){return s instanceof Function?s():s}var T=(()=>((T=T||{})[T.Important=1]="Important",T[T.DashCase=2]="DashCase",T))();function K(s,o){return undefined(s,o)}function Qe(s){const o=s[3];return Hi(o)?o[3]:o}function Fn(s){return au(s[13])}function _i(s){return au(s[4])}function au(s){for(;null!==s&&!Hi(s);)s=s[4];return s}function Do(s,o,a,l,d){if(null!=l){let g,v=!1;Hi(l)?g=l:Zr(l)&&(v=!0,l=l[0]);const w=en(l);0===s&&null!==a?null==d?Y0(o,a,w):nl(o,a,w,d||null,!0):1===s&&null!==a?nl(o,a,w,d||null,!0):2===s?function Rt(s,o,a){const l=Bf(s,o);l&&function wI(s,o,a,l){rn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function Ur(s,o,a,l,d){const g=a[7];g!==en(a)&&Do(o,s,l,g,d);for(let w=10;w<a.length;w++){const C=a[w];qe(C[1],C,s,o,l,g)}}(o,s,g,a,d)}}function zs(s,o,a){if(rn(s))return s.createElement(o,a);{const l=null!==a?function Ll(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function jy(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Ko(d,-1)),a.splice(l,1)}function kg(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&jy(d,l),o>0&&(s[a-1][4]=l[4]);const g=sa(s,10+o);!function Lf(s,o){qe(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function bc(s,o){if(!(256&o[2])){const a=o[11];rn(a)&&a.destroyNode&&qe(s,o,a,3,null,null),function Og(s){let o=s[13];if(!o)return Hy(s[1],s);for(;o;){let a=null;if(Zr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Zr(o)&&Hy(o[1],o),o=o[3];null===o&&(o=s),Zr(o)&&Hy(o[1],o),a=o&&o[4]}o=a}}(o)}}function Hy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function $y(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Uu)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],C=g[v+1];try{C.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function EI(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):en(o[v]),C=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],C,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&rn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Hi(o[3])){a!==o[3]&&jy(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function K0(s,o,a){return function Z0(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===qt.None||d===qt.Emulated)return null}return or(l,a)}(s,o.parent,a)}function nl(s,o,a,l,d){rn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function Y0(s,o,a){rn(s)?s.appendChild(o,a):o.appendChild(a)}function Uf(s,o,a,l,d){null!==l?nl(s,o,a,l,d):Y0(s,o,a)}function Bf(s,o){return rn(s)?s.parentNode(o):o.parentNode}let Fg=function lu(s,o,a){return 40&s.type?or(s,a):null};function qn(s,o,a,l){const d=K0(s,l,o),g=o[11],w=function Cc(s,o,a){return Fg(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Uf(g,d,a[C],w,!1);else Uf(g,d,a,w,!1)}function rl(s,o){if(null!==o){const a=o.type;if(3&a)return or(o,s);if(4&a)return st(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return rl(s,l);{const d=s[o.index];return Hi(d)?st(-1,d):en(d)}}if(32&a)return K(o,s)()||en(s[o.index]);{const l=Lg(s,o);return null!==l?Array.isArray(l)?l[0]:rl(Qe(s[16]),l):rl(s,o.next)}}return null}function Lg(s,o){return null!==o?s[16][6].projection[o.projection]:null}function st(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return rl(l,d)}return o[7]}function qy(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],C=a.type;if(v&&0===o&&(w&&dr(en(w),l),a.flags|=4),64!=(64&a.flags))if(8&C)qy(s,o,a.child,l,d,g,!1),Do(o,s,d,w,g);else if(32&C){const A=K(a,l);let x;for(;x=A();)Do(o,s,d,x,g);Do(o,s,d,w,g)}else 16&C?xe(s,o,l,a,d,g):Do(o,s,d,w,g);a=v?a.projectionNext:a.next}}function qe(s,o,a,l,d,g){qy(a,l,s.firstChild,o,d,g,!1)}function xe(s,o,a,l,d,g){const v=a[16],C=v[6].projection[l.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Do(o,s,d,C[A],g);else qy(s,o,C,v[3],d,g,!0)}function J0(s,o,a){rn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function zy(s,o,a){rn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function X0(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const eE="ng-template";function tE(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==X0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function nE(s){return 4===s.type&&s.value!==eE}function RA(s,o,a){return o===(4!==s.type||a?s.value:eE)}function Ss(s,o,a){let l=4;const d=s.attrs||[],g=function iE(s){for(let o=0;o<s.length;o++)if(Ji(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!v)if(4&l){if(l=2|1&l,""!==C&&!RA(s,C,a)||""===C&&1===o.length){if(To(l))return!1;v=!0}}else{const A=8&l?C:o[++w];if(8&l&&null!==s.attrs){if(!tE(s.attrs,A,a)){if(To(l))return!1;v=!0}continue}const k=rE(8&l?"class":C,d,nE(s),a);if(-1===k){if(To(l))return!1;v=!0;continue}if(""!==A){let j;j=k>g?"":d[k+1].toLowerCase();const Q=8&l?j:null;if(Q&&-1!==X0(Q,A,0)||2&l&&A!==j){if(To(l))return!1;v=!0}}}}else{if(!v&&!To(l)&&!To(C))return!1;if(v&&To(C))continue;v=!1,l=C|1&l}}return To(l)||v}function To(s){return 0==(1&s)}function rE(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function tr(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Ft(s,o,a=!1){for(let l=0;l<o.length;l++)if(Ss(s,o[l],a))return!0;return!1}function Wy(s,o){return s?":not("+o.trim()+")":o}function Ic(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!To(v)&&(o+=Wy(g,d),d=""),l=v,g=g||!To(l);a++}return""!==d&&(o+=Wy(g,d)),o}const Ye={};function oE(s){hr(Lt(),Se(),Xn()+s,Za())}function hr(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&eu(o,g,a)}else{const g=s.preOrderHooks;null!==g&&ys(o,g,0,a)}Yi(a)}function Vg(s,o){return s<<17|o<<2}function hn(s){return s>>17&32767}function Ln(s){return 2|s}function Pi(s){return(131068&s)>>2}function Hf(s,o){return-131069&s|o<<2}function Tc(s){return 1|s}function Mc(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Ja(d),v.contentQueries(2,o[g],g)}}}function So(s,o,a,l,d,g,v,w,C,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,Ki(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=C||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function gh(s,o,a,l,d){let g=s.data[o];if(null===g)g=function xc(s,o,a,l,d){const g=Yo(),v=Ka(),C=s.data[o]=function AI(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,a,l,d),function Gl(){return ft.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function oo(){const s=ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ui(g,!0),g}function du(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function al(s,o,a){Jo(o);try{const l=s.viewQuery;null!==l&&Qg(1,l,a);const d=s.template;null!==d&&Br(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Mc(s,o),s.staticViewQueries&&Qg(2,s.viewQuery,a);const g=s.components;null!==g&&function gE(s,o){for(let a=0;a<o.length;a++)Kf(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,ea()}}function Rc(s,o,a,l){const d=o[2];if(256==(256&d))return;Jo(o);const g=Za();try{Ki(o),function Ya(s){return ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Br(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&eu(o,A,null)}else{const A=s.preOrderHooks;null!==A&&ys(o,A,0,null),ta(o,0)}if(function vh(s){for(let o=Fn(s);null!==o;o=_i(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Ko(g,1),d[2]|=1024}}}(o),function SE(s){for(let o=Fn(s);null!==o;o=_i(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];gs(l)&&Rc(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&Mc(s,o),!g)if(v){const A=s.contentCheckHooks;null!==A&&eu(o,A)}else{const A=s.contentHooks;null!==A&&ys(o,A,1),ta(o,1)}!function pE(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Yi(~d);else{const g=d,v=a[++l],w=a[++l];ql(v,g),w(2,o[g])}}}finally{Yi(-1)}}(s,o);const w=s.components;null!==w&&function TI(s,o){for(let a=0;a<o.length;a++)AE(s,o[a])}(o,w);const C=s.viewQuery;if(null!==C&&Qg(2,C,l),!g)if(v){const A=s.viewCheckHooks;null!==A&&eu(o,A)}else{const A=s.viewHooks;null!==A&&ys(o,A,2),ta(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ko(o[3],-1))}finally{ea()}}function mE(s,o,a,l){const d=o[10],g=!Za(),v=so(o);try{g&&!v&&d.begin&&d.begin(),v&&al(s,o,l),Rc(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function Br(s,o,a,l,d){const g=Xn(),v=2&l;try{Yi(-1),v&&o.length>20&&hr(s,o,20,Za()),a(l,d)}finally{Yi(g)}}function Qy(s,o,a){!Wa()||(function t_(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||lo(a,o),dr(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const C=s.data[w],A=Gi(C);A&&xI(o,a,C);const x=fo(o,s,w,a);dr(x,o),null!==v&&_h(0,w-d,x,C,0,v),A&&(ar(a.index,o)[8]=x)}}(s,o,a,or(a,o)),128==(128&a.flags)&&function n_(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function Vu(){return ft.lFrame.currentDirectiveIndex}();try{Yi(v);for(let C=l;C<d;C++){const A=s.data[C],x=o[C];Qa(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&r_(A,x)}}finally{Yi(-1),Qa(w)}}(s,o,a))}function Jy(s,o,a=or){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function Xy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=$g(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function $g(s,o,a,l,d,g,v,w,C,A){const x=20+l,k=x+d,j=function SI(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ye);return a}(x,k),Q="function"==typeof A?A():A;return j[1]={type:s,blueprint:j,template:a,queries:null,viewQuery:w,declTNode:o,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function Pc(s,o,a,l){const d=o_(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&a_(s).push(l,d.length-1))}function e_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function ss(s,o,a,l,d,g,v,w){const C=or(o,a);let x,A=o.inputs;!w&&null!=A&&(x=A[l])?(Xg(s,a,x,l,d),wd(o)&&function mh(s,o){const a=ar(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function fu(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,rn(g)?g.setProperty(C,l,d):pt(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}function qg(s,o,a,l){let d=!1;if(Wa()){const g=function CE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];Ft(a,v.selectors,!1)&&(d||(d=[]),lr(lo(a,o),s,v.type),Gi(v)?(IE(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,i_(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const k=g[x];k.providersResolver&&k.providersResolver(k)}let w=!1,C=!1,A=du(s,o,g.length,null);for(let x=0;x<g.length;x++){const k=g[x];a.mergedAttrs=Ht(a.mergedAttrs,k.hostAttrs),Wf(s,a,o,A,k),TE(A,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const j=k.type.prototype;!w&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!C&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),A++}!function vE(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,C=null;for(let A=o.directiveStart;A<l;A++){const x=d[A],k=x.inputs,j=null===g||nE(o)?null:Nc(k,g);v.push(j),w=e_(k,A,w),C=e_(x.outputs,A,C)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=C}(s,a)}v&&function DE(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Ne(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=Ht(a.mergedAttrs,a.attrs),d}function yh(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~o.index;(function bE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=C&&w.push(C),w.push(l,d,v)}}function r_(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function IE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function TE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Gi(o)&&(a[""]=s)}}function i_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Wf(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=vr(d.type)),v=new Uu(g,Gi(d),null);s.blueprint[l]=v,a[l]=v,yh(s,o,0,l,du(s,a,d.hostVars,Ye),d)}function xI(s,o,a){const l=or(o,s),d=Xy(a),g=s[10],v=Kg(s,So(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function wa(s,o,a,l,d,g){const v=or(s,o);!function zg(s,o,a,l,d,g,v){if(null==g)rn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?pe(g):v(g,l||"",d);rn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function _h(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let C=0;C<v.length;){const A=v[C++],x=v[C++],k=v[C++];null!==w?l.setInput(a,k,A,x):a[x]=k}}}function Nc(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function ul(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function AE(s,o){const a=ar(o,s);if(gs(a)){const l=a[1];80&a[2]?Rc(l,a,l.template,a[8]):a[5]>0&&Wg(a)}}function Wg(s){for(let l=Fn(s);null!==l;l=_i(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];Rc(v,g,v.template,g[8])}else g[5]>0&&Wg(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=ar(a[l],s);gs(d)&&d[5]>0&&Wg(d)}}function Kf(s,o){const a=ar(o,s),l=a[1];(function PI(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),al(l,a,a[8])}function Kg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Yn(s){for(;s;){s[2]|=64;const o=Qe(s);if(Ol(s)&&!o)return s;s=o}return null}function s_(s,o,a){const l=o[10];l.begin&&l.begin();try{Rc(s,o,s.template,a)}catch(d){throw wh(o,d),d}finally{l.end&&l.end()}}function Yg(s){!function Eh(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=mc(a),d=l[1];mE(d,l,d.template,a)}}(s[8])}function Qg(s,o,a){Ja(0),o(s,a)}const Oc=(()=>Promise.resolve(null))();function o_(s){return s[7]||(s[7]=[])}function a_(s){return s.cleanup||(s.cleanup=[])}function wh(s,o){const a=s[9],l=a?a.get(vc,null):null;l&&l.handleError(o)}function Xg(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],C=o[v],A=s.data[v];null!==A.setInput?A.setInput(C,d,l,w):C[w]=d}}function pu(s,o,a){const l=js(o,s);!function oh(s,o,a){rn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function zn(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=he(d,w):2==g&&(l=he(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const ba=new En("INJECTOR",-1);class RE{get(o,a=aa){if(a===aa){const l=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw l.name="NullInjectorError",l}return a}}const os=new En("Set Injector scope."),Zf={},l_={};let kc;function PE(){return void 0===kc&&(kc=new RE),kc}function NE(s,o=null,a=null,l){const d=on(s,o,a,l);return d._resolveInjectorDefTypes(),d}function on(s,o=null,a=null,l){return new kI(s,a,o||PE(),l)}class kI{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&br(a,w=>this.processProvider(w,o,a)),br([o],w=>this.processInjectorType(w,[],g)),this.records.set(ba,Fc(void 0,this));const v=this.records.get(os);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=aa,l=mt.Default){this.assertNotDestroyed();const d=ie(this),g=Rn(void 0);try{if(!(l&mt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const C=function UI(s){return"function"==typeof s||"object"==typeof s&&s instanceof En}(o)&&Vt(o);w=C&&this.injectableDefInScope(C)?Fc(bh(o),Zf):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&mt.Self?PE():this.parent).get(o,a=l&mt.Optional&&a===aa?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Cs]=v[Cs]||[]).unshift(oe(o)),d)throw v;return function Gn(s,o,a,l){const d=s[Cs];throw o[R]&&d.unshift(o[R]),s.message=function wn(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=oe(o);if(Array.isArray(o))d=o.map(oe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):oe(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Cs]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Rn(g),ie(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(oe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(o,a,l){if(!(o=te(o)))return!1;let d=Mr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=Mr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{br(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:j,providers:Q}=x[k];br(Q,_e=>this.processProvider(_e,j,Q||U))}}this.injectorDefTypes.add(v);const C=vr(v)||(()=>new v);this.records.set(v,Fc(C,Zf));const A=d.providers;if(null!=A&&!w){const x=o;br(A,k=>this.processProvider(k,x,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=Lc(o=te(o))?o:te(o&&o.provide);const g=function Qf(s,o,a){return c_(s)?Fc(void 0,s.useValue):Fc(Jf(s),Zf)}(o);if(Lc(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Fc(void 0,Zf,!0),v.factory=()=>jt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===Zf&&(a.value=l_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function VI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=te(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function bh(s){const o=Vt(s),a=null!==o?o.factory:vr(s);if(null!==a)return a;if(s instanceof En)throw new Ne(204,!1);if(s instanceof Function)return function Yf(s){const o=s.length;if(o>0)throw function hi(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ne(204,!1);const a=function ni(s){const o=s&&(s[Vi]||s[ri]);if(o){const a=function pr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ne(204,!1)}function Jf(s,o,a){let l;if(Lc(s)){const d=te(s);return vr(d)||bh(d)}if(c_(s))l=()=>te(s.useValue);else if(function FI(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...jt(s.deps||[]));else if(function OE(s){return!(!s||!s.useExisting)}(s))l=()=>Ve(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function LI(s){return!!s.deps}(s))return vr(d)||bh(d);l=()=>new d(...jt(s.deps))}return l}function Fc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function c_(s){return null!==s&&"object"==typeof s&&L in s}function Lc(s){return"function"==typeof s}let Oi=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return NE({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return NE({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=aa,s.NULL=new RE,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>Ve(ba)}),s.__NG_ELEMENT_ID__=-1,s})();function qI(s,o){Fd(mc(s)[1],gn())}function rm(s){let o=function BE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Gi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=m_(s.inputs),v.declaredInputs=m_(s.declaredInputs),v.outputs=m_(s.outputs);const w=d.hostBindings;w&&HE(s,w);const C=d.viewQuery,A=d.contentQueries;if(C&&jE(s,C),A&&Ia(s,A),ue(s.inputs,d.inputs),ue(s.declaredInputs,d.declaredInputs),ue(s.outputs,d.outputs),Gi(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===rm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function ki(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Ht(d.hostAttrs,a=Ht(a,d.hostAttrs))}}(l)}function m_(s){return s===yr?{}:s===U?[]:s}function jE(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Ia(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function HE(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let sm=null;function Ih(){if(!sm){const s=Bt.Symbol;if(s&&s.iterator)sm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(sm=l)}}}return sm}function tp(s){return!!y_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ih()in s)}function y_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function vi(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function __(s,o,a,l){const d=Se();return vi(d,Hs(),o)&&(Lt(),wa(An(),d,s,o,a,l)),__}function Dh(s,o,a,l){return vi(s,Hs(),a)?o+pe(a)+l:Ye}function um(s,o,a,l,d,g,v,w){const C=Se(),A=Lt(),x=s+20,k=A.firstCreatePass?function w_(s,o,a,l,d,g,v,w,C){const A=o.consts,x=gh(o,s,4,v||null,Si(A,w));qg(o,a,x,Si(A,C)),Fd(o,x);const k=x.tViews=$g(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),k.queries=o.queries.embeddedTView(x)),x}(x,A,C,o,a,l,d,g,v):A.data[x];ui(k,!1);const j=C[11].createComment("");qn(A,C,j,k),dr(j,C),Kg(C,C[x]=ul(j,C,j,k)),$i(k)&&Qy(A,C,k),null!=v&&Jy(C,k,w)}function Zs(s,o=mt.Default){const a=Se();return null===a?Ve(s,o):ci(gn(),a,te(s),o)}function zc(){throw new Error("invalid")}function hm(s,o,a){const l=Se();return vi(l,Hs(),o)&&ss(Lt(),An(),l,s,o,l[11],a,!1),hm}function mu(s,o,a,l,d){const v=d?"class":"style";Xg(s,a,o.inputs[v],v,l)}function yu(s,o,a,l){const d=Se(),g=Lt(),v=20+s,w=d[11],C=d[v]=zs(w,o,function kd(){return ft.lFrame.currentNamespace}()),A=g.firstCreatePass?function oD(s,o,a,l,d,g,v){const w=o.consts,A=gh(o,s,2,d,Si(w,g));return qg(o,a,A,Si(w,v)),null!==A.attrs&&zn(A,A.attrs,!1),null!==A.mergedAttrs&&zn(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,d,0,o,a,l):g.data[v];ui(A,!0);const x=A.mergedAttrs;null!==x&&kt(w,C,x);const k=A.classes;null!==k&&zy(w,C,k);const j=A.styles;return null!==j&&J0(w,C,j),64!=(64&A.flags)&&qn(g,d,C,A),0===function Nu(){return ft.lFrame.elementDepthCount}()&&dr(C,d),function za(){ft.lFrame.elementDepthCount++}(),$i(A)&&(Qy(g,d,A),function yE(s,o,a){if(xu(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,d)),null!==l&&Jy(d,A),yu}function lp(){let s=gn();Ka()?function $l(){ft.lFrame.isParent=!1}():(s=s.parent,ui(s,!1));const o=s;!function Bl(){ft.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(Fd(a,s),xu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Vd(s){return 0!=(16&s.flags)}(o)&&mu(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function fg(s){return 0!=(32&s.flags)}(o)&&mu(a,o,Se(),o.stylesWithoutHost,!1),lp}function Sa(s,o,a,l){return yu(s,o,a,l),lp(),Sa}function ew(){return Se()}function x_(s){return!!s&&"function"==typeof s.then}function cp(s){return!!s&&"function"==typeof s.subscribe}const R_=cp;function P_(s,o,a,l){const d=Se(),g=Lt(),v=gn();return function gl(s,o,a,l,d,g,v,w){const C=$i(l),x=s.firstCreatePass&&a_(s),k=o[8],j=o_(o);let Q=!0;if(3&l.type||w){const He=or(l,o),ot=w?w(He):He,Ae=j.length,vt=w?$t=>w(en($t[l.index])):l.index;if(rn(a)){let $t=null;if(!w&&C&&($t=function nw(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],C=d[g+2];return w.length>C?w[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=g,$t.__ngLastListenerFn__=g,Q=!1;else{g=pm(l,o,k,g,!1);const cn=a.listen(ot,d,g);j.push(g,cn),x&&x.push(d,vt,Ae,Ae+1)}}else g=pm(l,o,k,g,!0),ot.addEventListener(d,g,v),j.push(g),x&&x.push(d,vt,Ae,v)}else g=pm(l,o,k,g,!1);const _e=l.outputs;let Le;if(Q&&null!==_e&&(Le=_e[d])){const He=Le.length;if(He)for(let ot=0;ot<He;ot+=2){const Qs=o[Le[ot]][Le[ot+1]].subscribe(g),Kh=j.length;j.push(g,Qs),x&&x.push(d,l.index,Kh,-(Kh+1))}}}(g,d,d[11],v,s,o,!!a,l),P_}function Nh(s,o,a,l){try{return!1!==a(l)}catch(d){return wh(s,d),!1}}function pm(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?ar(s.index,o):o;0==(32&o[2])&&Yn(w);let C=Nh(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)C=Nh(o,0,A,v)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function N_(s=1){return function Zi(s){return(ft.lFrame.contextLView=function df(s,o){for(;s>0;)o=o[15],s--;return o}(s,ft.lFrame.contextLView))[8]}(s)}function dp(s,o,a){return Wc(s,"",o,"",a),dp}function Wc(s,o,a,l,d){const g=Se(),v=Dh(g,o,a,l);return v!==Ye&&ss(Lt(),An(),g,s,v,g[11],d,!1),Wc}function uw(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?hn(g):Pi(g),C=!1;for(;0!==w&&(!1===C||v);){const x=s[w+1];lw(s[w],o)&&(C=!0,s[w+1]=l?Tc(x):Ln(x)),w=l?hn(x):Pi(x)}C&&(s[a+1]=l?Ln(g):Tc(g))}function lw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&$s(s,o)>=0}function H_(s,o){return function Mo(s,o,a,l){const d=Se(),g=Lt(),v=function Ai(s){const o=ft.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);g.firstUpdatePass&&function G_(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Xn()],v=function $_(s,o){return o>=s.expandoStartIndex}(s,a);(function Z_(s,o){return 0!=(s.flags&(o?16:32))})(g,l)&&null===o&&!v&&(o=!1),o=function q_(s,o,a,l){const d=function Qo(s){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Zc(a=gp(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=gp(d,s,o,a,l),null===g){let C=function _m(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Pi(l))return s[hn(l)]}(s,o,l);void 0!==C&&Array.isArray(C)&&(C=gp(null,s,o,C[1],l),C=Zc(C,o.attrs,l),function pp(s,o,a,l){s[hn(a?o.classBindings:o.styleBindings)]=l}(s,o,l,C))}else g=function vm(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=Zc(l,s[g].hostAttrs,a);return Zc(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function uD(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=hn(v),C=Pi(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||$s(k,x)>0)&&(A=!0)}else x=a;if(d)if(0!==C){const j=hn(s[w+1]);s[l+1]=Vg(j,w),0!==j&&(s[j+1]=Hf(s[j+1],l)),s[w+1]=function il(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=Vg(w,0),0!==w&&(s[w+1]=Hf(s[w+1],l)),w=l;else s[l+1]=Vg(C,0),0===w?w=l:s[C+1]=Hf(s[C+1],l),C=l;A&&(s[l+1]=Ln(s[l+1])),uw(s,x,l,!0),uw(s,x,l,!1),function aw(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&$s(g,o)>=0&&(a[l+1]=Tc(a[l+1]))}(o,x,s,l,g),v=Vg(w,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}(g,s,v,l),o!==Ye&&vi(d,v,o)&&function K_(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const C=s.data,A=C[w+1];Em(function Ky(s){return 1==(1&s)}(A)?fw(C,o,a,d,Pi(A),v):void 0)||(Em(g)||function aE(s){return 2==(2&s)}(A)&&(g=fw(C,null,a,d,w,v)),function Q0(s,o,a,l,d){const g=rn(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:T.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=T.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,js(Xn(),a),d,g))}(g,g.data[Xn()],d,d[11],s,d[v+1]=function pD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=oe(Is(s)))),s}(o,a),l,v)}(s,o,null,!0),H_}function gp(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=Zc(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function Zc(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Fr(s,v,!!a||o[++g]))}return void 0===s?null:s}function fw(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const C=s[d],A=Array.isArray(C),x=A?C[1]:C,k=null===x;let j=a[d+1];j===Ye&&(j=k?U:void 0);let Q=k?oa(j,l):x===l?j:void 0;if(A&&!Em(Q)&&(Q=oa(C,l)),Em(Q)&&(w=Q,v))return w;const _e=s[d+1];d=v?hn(_e):Pi(_e)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(w=oa(C,l))}return w}function Em(s){return void 0!==s}function mp(s,o=""){const a=Se(),l=Lt(),d=s+20,g=l.firstCreatePass?gh(l,d,1,o,null):l.data[d],v=a[d]=function uu(s,o){return rn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);qn(l,a,v,g),ui(g,!1)}function Yc(s){return yp("",s,""),Yc}function yp(s,o,a){const l=Se(),d=Dh(l,s,o,a);return d!==Ye&&pu(l,Xn(),d),yp}const Jc=void 0;var _D=["en",[["a","p"],["AM","PM"],Jc],[["AM","PM"],Jc,Jc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jc,"{1} 'at' {0}",Jc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uv(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let yl={};function vp(s){const o=function Vh(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Xc(o);if(a)return a;const l=o.split("-")[0];if(a=Xc(l),a)return a;if("en"===l)return _D;throw new Error(`Missing locale data for the locale "${s}".`)}function Sm(s){return vp(s)[_t.PluralCase]}function Xc(s){return s in yl||(yl[s]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[s]),yl[s]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const _u="en-US";let Mm=_u;function qm(s,o,a,l,d){if(s=te(s),Array.isArray(s))for(let g=0;g<s.length;g++)qm(s[g],o,a,l,d);else{const g=Lt(),v=Se();let w=Lc(s)?s:te(s.provide),C=Jf(s);const A=gn(),x=1048575&A.providerIndexes,k=A.directiveStart,j=A.providerIndexes>>20;if(Lc(s)||!s.multi){const Q=new Uu(C,d,Zs),_e=bp(w,o,d?x:x+j,k);-1===_e?(lr(lo(A,v),g,w),wp(g,s,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[_e]=Q,v[_e]=Q)}else{const Q=bp(w,o,x+j,k),_e=bp(w,o,x,x+j),Le=Q>=0&&a[Q],He=_e>=0&&a[_e];if(d&&!He||!d&&!Le){lr(lo(A,v),g,w);const ot=function UD(s,o,a,l,d){const g=new Uu(s,a,Zs);return g.multi=[],g.index=o,g.componentProviders=0,xv(g,d,l&&!a),g}(d?Rv:Hh,a.length,d,l,C);!d&&He&&(a[_e].providerFactory=ot),wp(g,s,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(ot),v.push(ot)}else wp(g,s,Q>-1?Q:_e,xv(a[d?_e:Q],C,!d&&l));!d&&l&&He&&a[_e].componentProviders++}}}function wp(s,o,a,l){const d=Lc(o),g=function kE(s){return!!s.useClass}(o);if(d||g){const C=(g?te(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,C]):A[x+1].push(l,C)}else A.push(a,C)}}}function xv(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function bp(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Hh(s,o,a,l){return Pv(this.multi,[])}function Rv(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=fo(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),Pv(d,g);for(let C=v;C<w.length;C++)g.push(w[C])}else g=[],Pv(d,g);return g}function Pv(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Kw(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Mv(s,o,a){const l=Lt();if(l.firstCreatePass){const d=Gi(s);qm(a,l.data,l.blueprint,d,!0),qm(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Yw{}class BD{resolveComponentFactory(o){throw function Qw(s){const o=Error(`No component factory found for ${oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let zm=(()=>{class s{}return s.NULL=new BD,s})();function Xw(){return vl(gn(),Se())}function vl(s,o){return new $h(or(s,o))}let $h=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Xw,s})();function eb(s){return s instanceof $h?s.nativeElement:s}class Cp{}let Kt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function nb(){const s=Se(),a=ar(gn().index,s);return function tb(s){return s[11]}(Zr(a)?a:s)}(),s})(),Ip=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class rb{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Tn=new rb("13.2.7"),jr={};function xs(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(en(g)),Hi(g))for(let w=10;w<g.length;w++){const C=g[w],A=C[1].firstChild;null!==A&&xs(C[1],C,A,l)}const v=a.type;if(8&v)xs(s,o,a.child,l);else if(32&v){const w=K(a,o);let C;for(;C=w();)l.push(C)}else if(16&v){const w=Lg(o,a);if(Array.isArray(w))l.push(...w);else{const C=Qe(o[16]);xs(C[1],C,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class Gh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return xs(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Hi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(kg(o,l),sa(a,l))}this._attachedToViewContainer=!1}bc(this._lView[1],this._lView)}onDestroy(o){Pc(this._lView[1],this._lView,null,o)}markForCheck(){Yn(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){s_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function NI(s,o,a){Fu(!0);try{s_(s,o,a)}finally{Fu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vf(s,o){qe(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class HD extends Gh{constructor(o){super(o),this._view=o}detectChanges(){Yg(this._view)}checkNoChanges(){!function ME(s){Fu(!0);try{Yg(s)}finally{Fu(!1)}}(this._view)}get context(){return null}}class Dp extends zm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Kn(o);return new Tp(a,this.ngModule)}}function Nv(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Tp extends Yw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function sE(s){return s.map(Ic).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Nv(this.componentDef.inputs)}get outputs(){return Nv(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function $D(s,o){return{get:(a,l,d)=>{const g=s.get(a,jr,d);return g!==jr||l===jr?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(Cp,$a),w=g.get(Ip,null),C=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function hu(s,o,a){if(rn(s))return s.selectRootElement(o,a===qt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(C,l,this.componentDef.encapsulation):zs(v.createRenderer(null,this.componentDef),A,function ib(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),k=this.componentDef.onPush?576:528,j=function Uc(s,o){return{components:[],scheduler:s||Pg,clean:Oc,playerHandler:o||null,flags:0}}(),Q=$g(0,null,null,1,0,null,null,null,null,null),_e=So(null,Q,j,k,null,null,v,C,w,g);let Le,He;Jo(_e);try{const ot=function UE(s,o,a,l,d,g){const v=a[1];a[20]=s;const C=gh(v,20,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(zn(C,A,!0),null!==s&&(kt(d,s,A),null!==C.classes&&zy(d,s,C.classes),null!==C.styles&&J0(d,s,C.styles)));const x=l.createRenderer(s,o),k=So(a,Xy(o),null,o.onPush?64:16,a[20],C,l,x,g||null,null);return v.firstCreatePass&&(lr(lo(C,a),v,o.type),IE(v,C),i_(C,a.length,1)),Kg(a,k),a[20]=k}(x,this.componentDef,_e,v,C);if(x)if(l)kt(C,x,["ng-version",Tn.full]);else{const{attrs:Ae,classes:vt}=function jf(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!To(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ae&&kt(C,x,Ae),vt&&vt.length>0&&zy(C,x,vt.join(" "))}if(He=bn(Q,20),void 0!==a){const Ae=He.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const $t=a[vt];Ae.push(null!=$t?Array.from($t):null)}}Le=function Vc(s,o,a,l,d){const g=a[1],v=function Ws(s,o,a){const l=gn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Wf(s,l,o,du(s,o,1,null),a));const d=fo(o,s,l.directiveStart,l);dr(d,o);const g=or(l,o);return g&&dr(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(C=>C(v,o)),o.contentQueries){const C=gn();o.contentQueries(1,v,C.directiveStart)}const w=gn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Yi(w.index),yh(a[1],w,0,w.directiveStart,w.directiveEnd,o),r_(o,v)),v}(ot,this.componentDef,_e,j,[qI]),al(Q,_e,null)}finally{ea()}return new Bn(this.componentType,Le,vl(He,_e),_e,He)}}class Bn extends class Zw{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new HD(d),this.componentType=o}get injector(){return new es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Sp{}class nr{}const rd=new Map;class ub extends Sp{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Dp(this);const l=Zn(o);this._bootstrapComponents=Ts(l.bootstrap),this._r3Injector=on(o,a,[{provide:Sp,useValue:this},{provide:zm,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Oi.THROW_IF_NOT_FOUND,l=mt.Default){return o===Oi||o===Sp||o===ba?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class lb extends nr{constructor(o){super(),this.moduleType=o,null!==Zn(o)&&function ob(s){const o=new Set;!function a(l){const d=Zn(l,!0),g=d.id;null!==g&&(function sb(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${oe(o)} vs ${oe(o.name)}`)}(g,rd.get(g),l),rd.set(g,l));const v=Ts(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new ub(this.moduleType,o)}}function bu(s){return o=>{setTimeout(s,void 0,o)}}const xo=class fb extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,C=a||(()=>null),A=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),C=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(C=bu(C),w&&(w=bu(w)),A&&(A=bu(A)));const x=super.subscribe({next:w,error:C,complete:A});return o instanceof X.w0&&o.add(x),x}};function pb(){return this._results[Ih()]()}class Rp{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ih(),l=Rp.prototype;l[a]||(l[a]=pb)}get changes(){return this._changes||(this._changes=new xo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Qr(o);(this._changesDetected=!function zu(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let od=(()=>{class s{}return s.__NG_ELEMENT_ID__=Zm,s})();const JD=od,Km=class extends JD{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=So(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),al(a,l,o),new Gh(l)}};function Zm(){return Pp(gn(),Se())}function Pp(s,o){return 4&s.type?new Km(o,s,vl(s,o)):null}let wl=(()=>{class s{}return s.__NG_ELEMENT_ID__=XD,s})();function XD(){return Cu(gn(),Se())}const Ym=wl,bl=class extends Ym{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return vl(this._hostTNode,this._hostLView)}get injector(){return new es(this._hostTNode,this._hostLView)}get parentInjector(){const o=co(this._hostTNode,this._hostLView);if(Ud(o)){const a=sn(o,this._hostLView),l=li(o);return new es(a[1].data[l+8],a)}return new es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Ra(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function Es(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,g=k.ngModuleRef}const C=v?o:new Tp(Kn(o)),A=l||this.parentInjector;if(!g&&null==C.ngModule){const j=(v?A:this.parentInjector).get(Sp,null);j&&(g=j)}const x=C.create(A,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function qa(s){return Hi(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const k=l[3],j=new bl(k,k[6],k[3]);j.detach(j.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function tl(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],ru(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Ri(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=st(g,v),C=l[11],A=Bf(C,v[7]);return null!==A&&function uh(s,o,a,l,d,g){l[0]=d,l[6]=o,qe(s,l,a,1,d,g)}(d,v[6],C,l,A,w),o.attachToViewContainerRef(),ru(ad(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Ra(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=kg(this._lContainer,a);l&&(sa(ad(this._lContainer),a),bc(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=kg(this._lContainer,a);return l&&null!=sa(ad(this._lContainer),a)?new Gh(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Ra(s){return s[8]}function ad(s){return s[8]||(s[8]=[])}function Cu(s,o){let a;const l=o[s.index];if(Hi(l))a=l;else{let d;if(8&s.type)d=en(l);else{const g=o[11];d=g.createComment("");const v=or(s,o);nl(g,Bf(g,v),d,function ei(s,o){return rn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=ul(l,o,d,s),Kg(o,a)}return new bl(a,s,o)}class ud{constructor(o){this.queryList=o,this.matches=null}clone(){return new ud(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pa{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Pa(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Ib(o,a).matches&&this.queries[a].setDirty()}}class mb{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Lv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Lv(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Vv{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Vv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,nT(a,g)),this.matchTNodeWithReadOption(o,a,et(a,o,g,!1,!1))}else l===od?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,et(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===$h||d===wl||d===od&&4&a.type)this.addMatch(a.index,-2);else{const g=et(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function nT(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function rT(s,o,a,l){return-1===a?function yb(s,o){return 11&s.type?vl(s,o):4&s.type?Pp(s,o):null}(o,s):-2===a?function iT(s,o,a){return a===$h?vl(o,s):a===od?Pp(o,s):a===wl?Cu(o,s):void 0}(s,o,l):fo(s,s[1],a,o)}function Uv(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let C=0;C<v.length;C+=2){const A=v[C];w.push(A<0?null:rT(o,g[A],v[C+1],a.metadata.read))}d.matches=w}return d.matches}function Bv(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Uv(s,o,d,a);for(let w=0;w<g.length;w+=2){const C=g[w];if(C>0)l.push(v[w/2]);else{const A=g[w+1],x=o[-C];for(let k=10;k<x.length;k++){const j=x[k];j[17]===j[3]&&Bv(j[1],j,A,l)}if(null!==x[9]){const k=x[9];for(let j=0;j<k.length;j++){const Q=k[j];Bv(Q[1],Q,A,l)}}}}}return l}function _b(s){const o=Se(),a=Lt(),l=zl();Ja(l+1);const d=Ib(a,l);if(s.dirty&&so(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Bv(a,o,l,[]):Uv(a,o,d,l);s.reset(g,eb),s.notifyOnChanges()}return!0}return!1}function Eb(s,o,a,l){const d=Lt();if(d.firstCreatePass){const g=gn();(function Hv(s,o,a){null===s.queries&&(s.queries=new Lv),s.queries.track(new Vv(o,a))})(d,new mb(o,a,l),g.index),function Cb(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function jv(s,o,a){const l=new Rp(4==(4&a));Pc(s,o,l,l.destroy),null===o[19]&&(o[19]=new Pa),o[19].queries.push(new ud(l))}(d,Se(),a)}function wb(){return function bb(s,o){return s[19].queries[o].queryList}(Se(),zl())}function Ib(s,o){return s.queries.getByIndex(o)}function Na(...s){}const Il=new En("Application Initializer");let e0=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Na,this.reject=Na,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(x_(g))a.push(g);else if(R_(g)){const v=new Promise((w,C)=>{g.subscribe({complete:w,error:C})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Ve(Il,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Bb=new En("AppId",{providedIn:"root",factory:function jb(){return`${t0()}${t0()}${t0()}`}});function t0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vp=new En("Platform Initializer"),Up=new En("Platform ID"),$r=new En("appBootstrapListener");let Hb=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();const ny=new En("LocaleId",{providedIn:"root",factory:()=>bt(ny,mt.Optional|mt.SkipSelf)||function fT(){return"undefined"!=typeof $localize&&$localize.locale||_u}()}),pT=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Gb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let mT=(()=>{class s{compileModuleSync(a){return new lb(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=Ts(Zn(a).declarations).reduce((v,w)=>{const C=Kn(w);return C&&v.push(new Tp(C)),v},[]);return new Gb(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const zb=(()=>Promise.resolve(0))();function Bp(s){"undefined"==typeof Zone?zb.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class us{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xo(!1),this.onMicrotaskEmpty=new xo(!1),this.onStable=new xo(!1),this.onError=new xo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Wb(){let s=Bt.requestAnimationFrame,o=Bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function r0(s){const o=()=>{!function _T(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Zb(s),s.isCheckStableRunning=!0,Kb(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Zb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return vT(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Yb(s)}},onInvoke:(a,l,d,g,v,w,C)=>{try{return vT(s),a.invoke(d,g,v,w,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Yb(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Zb(s),Kb(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!us.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(us.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,yT,Na,Na);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const yT={};function Kb(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Zb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function vT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Yb(s){s._nesting--,Kb(s)}class ET{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xo,this.onMicrotaskEmpty=new xo,this.onStable=new xo,this.onError=new xo}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let wT=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{us.assertNotInAngularZone(),Bp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Ve(us))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),bT=(()=>{class s{constructor(){this._applications=new Map,Qb.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Qb.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();class JA{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function XA(s){Qb=s}let Oa,Qb=new JA;const Xb=new En("AllowMultipleToken");class CT{constructor(o,a){this.name=o,this.token=a}}function Ys(s,o,a=[]){const l=`Platform: ${o}`,d=new En(l);return(g=[])=>{let v=tC();if(!v||v.injector.get(Xb,!1))if(s)s(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:os,useValue:"platform"});!function Gr(s){if(Oa&&!Oa.destroyed&&!Oa.injector.get(Xb,!1))throw new Ne(400,"");Oa=s.get(nC);const o=s.get(Vp,null);o&&o.forEach(a=>a())}(Oi.create({providers:w,name:l}))}return function ry(s){const o=tC();if(!o)throw new Ne(401,"");return o}()}}function tC(){return Oa&&!Oa.destroyed?Oa:null}let nC=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function IT(s,o){let a;return a="noop"===s?new ET:("zone.js"===s?void 0:s)||new us({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:us,useValue:w}];return w.run(()=>{const A=Oi.create({providers:C,parent:this.injector,name:a.moduleType.name}),x=a.create(A),k=x.injector.get(vc,null);if(!k)throw new Ne(402,"");return w.runOutsideAngular(()=>{const j=w.onError.subscribe({next:Q=>{k.handleError(Q)}});x.onDestroy(()=>{o0(this._modules,x),j.unsubscribe()})}),function rC(s,o,a){try{const l=a();return x_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,w,()=>{const j=x.injector.get(e0);return j.runInitializers(),j.donePromise.then(()=>(function wD(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(Mm=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(ny,_u)||_u),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=iC({},l);return function eM(s,o,a){const l=new lb(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(s0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Ve(Oi))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();function iC(s,o){return Array.isArray(o)?o.reduce(iC,s):Object.assign(Object.assign({},s),o)}let s0=(()=>{class s{constructor(a,l,d,g,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),C=new O.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{us.assertNotInAngularZone(),Bp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{us.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,le.T)(w,C.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let d;d=a instanceof Yw?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function Jb(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Sp),w=d.create(Oi.NULL,[],l||d.selector,g),C=w.location.nativeElement,A=w.injector.get(wT,null),x=A&&w.injector.get(bT);return A&&x&&x.registerApplication(C,A),w.onDestroy(()=>{this.detachView(w.hostView),o0(this.components,w),x&&x.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;o0(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get($r,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Ve(us),Ve(Oi),Ve(vc),Ve(zm),Ve(e0))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function o0(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let jp=!0,a0=!1;function DT(){return a0=!0,jp}function u0(){if(a0)throw new Error("Cannot enable prod mode after platform setup.");jp=!1}let TT=(()=>{class s{}return s.__NG_ELEMENT_ID__=ST,s})();function ST(s){return function AT(s,o,a){if(wd(s)&&!a){const l=ar(s.index,o);return new Gh(l,l)}return 47&s.type?new Gh(o[16],o):null}(gn(),Se(),16==(16&s))}class h0{constructor(){}supports(o){return tp(o)}create(o){return new OT(o)}}const f0=(s,o)=>o;class OT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||f0}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<ly(l,d,g)?a:l,w=ly(v,d,g),C=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const A=w-d,x=C-d;if(A!=x){for(let j=0;j<A;j++){const Q=j<g.length?g[j]:g[j]=0,_e=Q+j;x<=_e&&_e<A&&(g[j]=Q+1)}g[v.previousIndex]=x-A}}w!==C&&o(v,w,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!tp(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function ZI(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Ih()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new kT(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new $p),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $p),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class kT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class $p{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new FT,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ly(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class cy{constructor(){}supports(o){return o instanceof Map||y_(o)}create(){return new p0}}class p0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||y_(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new dC(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class dC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hC(){return new dy([new h0])}let dy=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||hC()),deps:[[s,new pi,new Lr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:hC}),s})();function fC(){return new m0([new cy])}let m0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||fC()),deps:[[s,new pi,new Lr]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Ne(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:fC}),s})();const UT=Ys(null,"core",[{provide:Up,useValue:"unknown"},{provide:nC,deps:[Oi]},{provide:bT,deps:[]},{provide:Hb,deps:[]}]);let BT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Ve(s0))},s.\u0275mod=xr({type:s}),s.\u0275inj=Wt({}),s})()},3942:(nt,we,N)=>{N.d(we,{Z:()=>Ne});var p=N(2090),X=N(4859),O=N(9681),le=N(1877);class ne{constructor(pe,Ie){this._delegate=pe,this.firebase=Ie,(0,O._addComponent)(pe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Ie=O._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(pe);return!Je.isInitialized()&&"EXPLICIT"===(null===(Ke=Je.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:Ie})}_removeServiceInstance(pe,Ie=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ie)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const Ue=function oe(Ue){const pe={},Ie={__esModule:!0,initializeApp:function Te(Be,$={}){const ve=O.initializeApp(Be,$);if((0,p.r3)(pe,ve.name))return pe[ve.name];const Z=new Ue(ve,Ie);return pe[ve.name]=Z,Z},app:Je,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function be(Be){const $=Be.name,ve=$.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const Z=(re=Je())=>{if("function"!=typeof re[ve])throw ue.create("invalid-app-argument",{appName:$});return re[ve]()};void 0!==Be.serviceProps&&(0,p.ZB)(Z,Be.serviceProps),Ie[ve]=Z,Ue.prototype[ve]=function(...re){return this._getService.bind(this,$).apply(this,Be.multipleInstances?re:[])}}return"PUBLIC"===Be.type?Ie[ve]:null},removeApp:function Ke(Be){delete pe[Be]},useAsService:function je(Be,$){return"serverAuth"===$?null:$},modularAPIs:O}};function Je(Be){if(!(0,p.r3)(pe,Be=Be||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Be});return pe[Be]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Ee(){return Object.keys(pe).map(Be=>pe[Be])}}),Je.App=Ue,Ie}(ne);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function pe(Ie){(0,p.ZB)(Ue,Ie)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Ue}(),H=new le.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=G;!function Me(Ue){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Ue)}()},9681:(nt,we,N)=>{N.r(we),N.d(we,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Vi,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>un,_addOrOverwriteComponent:()=>Xt,_apps:()=>tn,_clearComponents:()=>hs,_components:()=>xn,_getProvider:()=>Wt,_registerComponent:()=>Ar,_removeServiceInstance:()=>Vt,deleteApp:()=>mt,getApp:()=>ri,getApps:()=>Ii,initializeApp:()=>ks,onLog:()=>Rn,registerVersion:()=>Sn,setLogLevel:()=>Js});var p=N(5861),X=N(4859),O=N(1877),le=N(2090),ne=N(8766);class ge{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function ue(q){const J=q.getComponent();return"VERSION"===(null==J?void 0:J.type)}(Re)){const tt=Re.getImmediate();return`${tt.library}/${tt.version}`}return null}).filter(Re=>Re).join(" ")}}const oe="@firebase/app",G=new O.Yd("@firebase/app"),Ut="[DEFAULT]",Xe={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,xn=new Map;function un(q,J){try{q.container.addComponent(J)}catch(Re){G.debug(`Component ${J.name} failed to register with FirebaseApp ${q.name}`,Re)}}function Xt(q,J){q.container.addOrOverwriteComponent(J)}function Ar(q){const J=q.name;if(xn.has(J))return G.debug(`There were multiple attempts to register component ${J}.`),!1;xn.set(J,q);for(const Re of tn.values())un(Re,q);return!0}function Wt(q,J){const Re=q.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),q.container.getProvider(J)}function Vt(q,J,Re=Ut){Wt(q,J).clearInstance(Re)}function hs(){xn.clear()}const pr=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Mr{constructor(J,Re,tt){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=tt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const Vi="9.8.2";function ks(q,J={}){"object"!=typeof J&&(J={name:J});const Re=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},J),tt=Re.name;if("string"!=typeof tt||!tt)throw pr.create("bad-app-name",{appName:String(tt)});const ht=tn.get(tt);if(ht){if((0,le.vZ)(q,ht.options)&&(0,le.vZ)(Re,ht.config))return ht;throw pr.create("duplicate-app",{appName:tt})}const Tt=new X.H0(tt);for(const It of xn.values())Tt.addComponent(It);const fn=new Mr(q,Re,Tt);return tn.set(tt,fn),fn}function ri(q=Ut){const J=tn.get(q);if(!J)throw pr.create("no-app",{appName:q});return J}function Ii(){return Array.from(tn.values())}function mt(q){return ii.apply(this,arguments)}function ii(){return(ii=(0,p.Z)(function*(q){const J=q.name;tn.has(J)&&(tn.delete(J),yield Promise.all(q.container.getProviders().map(Re=>Re.delete())),q.isDeleted=!0)})).apply(this,arguments)}function Sn(q,J,Re){var tt;let ht=null!==(tt=Xe[q])&&void 0!==tt?tt:q;Re&&(ht+=`-${Re}`);const Tt=ht.match(/\s|\//),fn=J.match(/\s|\//);if(Tt||fn){const It=[`Unable to register library "${ht}" with version "${J}":`];return Tt&&It.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Tt&&fn&&It.push("and"),fn&&It.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void G.warn(It.join(" "))}Ar(new X.wA(`${ht}-version`,()=>({library:ht,version:J}),"VERSION"))}function Rn(q,J){if(null!==q&&"function"!=typeof q)throw pr.create("invalid-log-argument");(0,O.Am)(q,J)}function Js(q){(0,O.Ub)(q)}const jn="firebase-heartbeat-store";let Di=null;function Bo(){return Di||(Di=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(q,J)=>{0===J&&q.createObjectStore(jn)}}).catch(q=>{throw pr.create("storage-open",{originalErrorMessage:q.message})})),Di}function at(){return(at=(0,p.Z)(function*(q){try{return(yield Bo()).transaction(jn).objectStore(jn).get(oi(q))}catch(J){throw pr.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function Et(q,J){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(q,J){try{const tt=(yield Bo()).transaction(jn,"readwrite");return yield tt.objectStore(jn).put(J,oi(q)),tt.done}catch(Re){throw pr.create("storage-set",{originalErrorMessage:Re.message})}})).apply(this,arguments)}function oi(q){return`${q.name}!${q.options.appId}`}class mr{constructor(J){this.container=J,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new z(Re),this._heartbeatsCachePromise=this._storage.read().then(tt=>(this._heartbeatsCache=tt,tt))}triggerHeartbeat(){var J=this;return(0,p.Z)(function*(){const tt=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=yr();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ht&&!J._heartbeatsCache.heartbeats.some(Tt=>Tt.date===ht))return J._heartbeatsCache.heartbeats.push({date:ht,agent:tt}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Tt=>{const fn=new Date(Tt.date).valueOf();return Date.now()-fn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,p.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Re=yr(),{heartbeatsToSend:tt,unsentEntries:ht}=function U(q,J=1024){const Re=[];let tt=q.slice();for(const ht of q){const Tt=Re.find(fn=>fn.agent===ht.agent);if(Tt){if(Tt.dates.push(ht.date),W(Re)>J){Tt.dates.pop();break}}else if(Re.push({agent:ht.agent,dates:[ht.date]}),W(Re)>J){Re.pop();break}tt=tt.slice(1)}return{heartbeatsToSend:Re,unsentEntries:tt}}(J._heartbeatsCache.heartbeats),Tt=(0,le.L)(JSON.stringify({version:2,heartbeats:tt}));return J._heartbeatsCache.lastSentHeartbeatDate=Re,ht.length>0?(J._heartbeatsCache.heartbeats=ht,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Tt})()}}function yr(){return(new Date).toISOString().substring(0,10)}class z{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,p.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function qt(q){return at.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Re=this;return(0,p.Z)(function*(){var tt;if(yield Re._canUseIndexedDBPromise){const Tt=yield Re.read();return Et(Re.app,{lastSentHeartbeatDate:null!==(tt=J.lastSentHeartbeatDate)&&void 0!==tt?tt:Tt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Re=this;return(0,p.Z)(function*(){var tt;if(yield Re._canUseIndexedDBPromise){const Tt=yield Re.read();return Et(Re.app,{lastSentHeartbeatDate:null!==(tt=J.lastSentHeartbeatDate)&&void 0!==tt?tt:Tt.lastSentHeartbeatDate,heartbeats:[...Tt.heartbeats,...J.heartbeats]})}})()}}function W(q){return(0,le.L)(JSON.stringify({version:2,heartbeats:q})).length}!function Ce(q){Ar(new X.wA("platform-logger",J=>new ge(J),"PRIVATE")),Ar(new X.wA("heartbeat",J=>new mr(J),"PRIVATE")),Sn(oe,"0.7.25",q),Sn(oe,"0.7.25","esm2017"),Sn("fire-js","")}("")},4859:(nt,we,N)=>{N.d(we,{wA:()=>O,H0:()=>oe});var p=N(5861),X=N(2090);class O{constructor(G,H,te){this.name=G,this.instanceFactory=H,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const le="[DEFAULT]";class ne{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const te=new X.BH;if(this.instancesDeferred.set(H,te),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&te.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const te=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),We=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Me){if(We)return null;throw Me}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:le})}catch(H){}for(const[H,te]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const Me=this.getOrInitializeService({instanceIdentifier:We});te.resolve(Me)}catch(Me){}}}}clearInstance(G=le){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,p.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...H.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=le){return this.instances.has(G)}getOptions(G=le){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,te=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:te,options:H});for(const[Me,Ne]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Me)&&Ne.resolve(We);return We}onInit(G,H){var te;const We=this.normalizeInstanceIdentifier(H),Me=null!==(te=this.onInitCallbacks.get(We))&&void 0!==te?te:new Set;Me.add(G),this.onInitCallbacks.set(We,Me);const Ne=this.instances.get(We);return Ne&&G(Ne,We),()=>{Me.delete(G)}}invokeOnInitCallbacks(G,H){const te=this.onInitCallbacks.get(H);if(te)for(const We of te)try{We(G,H)}catch(Me){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let te=this.instances.get(G);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===le?void 0:he),options:H}),this.instances.set(G,te),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(te,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,te)}catch(We){}var he;return te||null}normalizeInstanceIdentifier(G=le){return this.component?this.component.multipleInstances?G:le:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new ne(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,we,N)=>{N.d(we,{in:()=>X,Yd:()=>ue,Ub:()=>oe,Am:()=>he});const p=[];var X=(()=>{return(G=X||(X={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",X;var G})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},le=X.INFO,ne={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ge=(G,H,...te)=>{if(H<G.logLevel)return;const We=(new Date).toISOString(),Me=ne[H];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Me](`[${We}]  ${G.name}:`,...te)};class ue{constructor(H){this.name=H,this._logLevel=le,this._logHandler=ge,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function oe(G){p.forEach(H=>{H.setLogLevel(G)})}function he(G,H){for(const te of p){let We=null;H&&H.level&&(We=O[H.level]),te.userLogHandler=null===G?null:(Me,Ne,...Ue)=>{const pe=Ue.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(Ke){return null}}).filter(Ie=>Ie).join(" ");Ne>=(null!=We?We:Me.logLevel)&&G({level:X[Ne].toLowerCase(),message:pe,args:Ue,type:Me.name})}}}},8766:(nt,we,N)=>{N.d(we,{Lj:()=>Te,X3:()=>Je});var p=N(5861);let O,le;const ue=new WeakMap,oe=new WeakMap,he=new WeakMap,G=new WeakMap,H=new WeakMap;let Me={get($,ve,Z){if($ instanceof IDBTransaction){if("done"===ve)return oe.get($);if("objectStoreNames"===ve)return $.objectStoreNames||he.get($);if("store"===ve)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Ie($[ve])},set:($,ve,Z)=>($[ve]=Z,!0),has:($,ve)=>$ instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in $};function pe($){return"function"==typeof $?function Ue($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...ve){return $.apply(Ke(this),ve),Ie(ue.get(this))}:function(...ve){return Ie($.apply(Ke(this),ve))}:function(ve,...Z){const re=$.call(Ke(this),ve,...Z);return he.set(re,ve.sort?ve.sort():[ve]),Ie(re)}}($):($ instanceof IDBTransaction&&function We($){if(oe.has($))return;const ve=new Promise((Z,re)=>{const ee=()=>{$.removeEventListener("complete",ye),$.removeEventListener("error",ae),$.removeEventListener("abort",ae)},ye=()=>{Z(),ee()},ae=()=>{re($.error||new DOMException("AbortError","AbortError")),ee()};$.addEventListener("complete",ye),$.addEventListener("error",ae),$.addEventListener("abort",ae)});oe.set($,ve)}($),(($,ve)=>ve.some(Z=>$ instanceof Z))($,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Me):$)}function Ie($){if($ instanceof IDBRequest)return function te($){const ve=new Promise((Z,re)=>{const ee=()=>{$.removeEventListener("success",ye),$.removeEventListener("error",ae)},ye=()=>{Z(Ie($.result)),ee()},ae=()=>{re($.error),ee()};$.addEventListener("success",ye),$.addEventListener("error",ae)});return ve.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,$)}).catch(()=>{}),H.set(ve,$),ve}($);if(G.has($))return G.get($);const ve=pe($);return ve!==$&&(G.set($,ve),H.set(ve,$)),ve}const Ke=$=>H.get($);function Je($,ve,{blocked:Z,upgrade:re,blocking:ee,terminated:ye}={}){const ae=indexedDB.open($,ve),Oe=Ie(ae);return re&&ae.addEventListener("upgradeneeded",dt=>{re(Ie(ae.result),dt.oldVersion,dt.newVersion,Ie(ae.transaction))}),Z&&ae.addEventListener("blocked",()=>Z()),Oe.then(dt=>{ye&&dt.addEventListener("close",()=>ye()),ee&&dt.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Oe}function Te($,{blocked:ve}={}){const Z=indexedDB.deleteDatabase($);return ve&&Z.addEventListener("blocked",()=>ve()),Ie(Z).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function Be($,ve){if(!($ instanceof IDBDatabase)||ve in $||"string"!=typeof ve)return;if(je.get(ve))return je.get(ve);const Z=ve.replace(/FromIndex$/,""),re=ve!==Z,ee=be.includes(Z);if(!(Z in(re?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ee.includes(Z))return;const ye=function(){var ae=(0,p.Z)(function*(Oe,...dt){const Gt=this.transaction(Oe,ee?"readwrite":"readonly");let Ut=Gt.store;return re&&(Ut=Ut.index(dt.shift())),(yield Promise.all([Ut[Z](...dt),ee&&Gt.done]))[0]});return function(dt){return ae.apply(this,arguments)}}();return je.set(ve,ye),ye}!function Ne($){Me=$(Me)}($=>NN(PN({},$),{get:(ve,Z,re)=>Be(ve,Z)||$.get(ve,Z,re),has:(ve,Z)=>!!Be(ve,Z)||$.has(ve,Z)}))},5861:(nt,we,N)=>{function p(O,le,ne,ge,ue,oe,he){try{var G=O[oe](he),H=G.value}catch(te){return void ne(te)}G.done?le(H):Promise.resolve(H).then(ge,ue)}function X(O){return function(){var le=this,ne=arguments;return new Promise(function(ge,ue){var oe=O.apply(le,ne);function he(H){p(oe,ge,ue,he,G,"next",H)}function G(H){p(oe,ge,ue,he,G,"throw",H)}he(void 0)})}}N.d(we,{Z:()=>X})}},nt=>{nt(nt.s=2130)}]);